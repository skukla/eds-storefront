import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=4272;export const ids=[4272];export const modules={6900:(e,t,r)=>{r.d(t,{m:()=>d});var n=r(3584),i=e=>e?e.filter(Boolean).filter((e=>(null==e?void 0:e.label)&&(null==e?void 0:e.value))).map((e=>({text:e.label,value:e.value}))):[],o=e=>e?e.filter(Boolean).filter((e=>(null==e?void 0:e.name)&&(null==e?void 0:e.value))):[],a=r(764),s=r(1092);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){var e,t=(e=function*(){return(0,n.CA)('\n  query fetchAddressFormFields {\n    attributesForm(formCode: "customer_register_address") {\n      items {\n        frontend_input\n        code\n        label\n        default_value\n        is_required\n        options {\n          label\n          value\n          is_default\n        }\n        ... on CustomerAttributeMetadata {\n          multiline_count\n          sort_order\n          validate_rules {\n            name\n            value\n          }\n        }\n      }\n      errors {\n        message\n        type\n      }\n    }\n  }\n',{method:"GET",cache:"no-cache"}).then((e=>{var{data:t,errors:r}=e;return(0,a.Y)(r),(e=>e?e.filter(Boolean).map((e=>({code:e.code,defaultValue:e.default_value||void 0,frontendInput:e.frontend_input||void 0,isDisabled:!1,isRequired:e.is_required,label:e.label||void 0,multilineCount:e.multiline_count||void 0,options:i(e.options),sortOrder:e.sort_order||void 0,validateRules:o(e.validate_rules)}))):[])(t.attributesForm.items)})).catch(s.i)},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}()},9624:(e,t,r)=>{r.d(t,{S:()=>p});var n=r(3584),i=e=>!!e&&("code"in e&&"value"in e),o=e=>e.filter(i).map((e=>{var{code:t,value:r}=e;return{code:t,value:r}})),a=e=>{var t,r,n,i=e.street.filter(Boolean),a=null===(t=e.region)||void 0===t?void 0:t.region_id,s=a&&a>0;return{id:String(e.id),firstName:e.firstname,lastName:e.lastname,company:e.company||void 0,city:e.city,street:i,postCode:e.postcode||void 0,vatId:e.vat_id||void 0,telephone:e.telephone||void 0,region:{id:s?a:void 0,code:null===(r=e.region)||void 0===r?void 0:r.region_code,name:null===(n=e.region)||void 0===n?void 0:n.region},country:{value:e.country_code,label:e.country_code},customAttributes:o(e.custom_attributesV2)}},s=e=>e?e.filter(Boolean).map(a):[],l=(e,t)=>{if(t){var r=t.find((t=>!0===(null==t?void 0:t[e])));if(r)return a(r)}},d=r(764),c=r(1092);function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}var p=function(){var e,t=(e=function*(){return(0,n.CA)("\n  query getCustomer {\n    customer {\n      firstname\n      lastname\n      email\n      addresses {\n        id\n        default_shipping\n        default_billing\n        city\n        country_code\n        firstname\n        lastname\n        company\n        postcode\n        vat_id\n        region {\n          region\n          region_id\n          region_code\n        }\n        street\n        telephone\n        custom_attributesV2 {\n          ... on AttributeValue {\n            code\n            value\n          }\n        }\n      }\n    }\n  }\n",{method:"GET",cache:"no-cache"}).then((e=>{var{data:t,errors:r}=e;return r&&(0,d.Y)(r),(e=>{if(e){var t=e.addresses;return{firstName:e.firstname||"",lastName:e.lastname||"",email:e.email||"",addresses:s(t),defaultBillingAddress:l("default_billing",t),defaultShippingAddress:l("default_shipping",t)}}})(t.customer)})).catch(c.i)},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}()},2532:(e,t,r)=>{r.d(t,{W:()=>d});var n=r(3760),i=r(7696),o="\n  mutation setBillingAddress($cartId: String!, $input: BillingAddressInput!) {\n    setBillingAddressOnCart(\n      input: { cart_id: $cartId, billing_address: $input }\n    ) {\n      cart {\n        id\n        ...CartData\n        ...CartSummaryItems\n      }\n    }\n  }\n  ".concat(i.Qp,"\n  ").concat(i.Qz,"\n"),a=r(9120),s=r(6824);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){var e,t=(e=function*(e){var{signal:t,cartId:r,input:i}=e,{address:l,same_as_shipping:d}=i;if(!r)throw new n.Ij;if(!d&&!l)throw new n.o8;return yield(0,a.m)({type:"mutation",query:o,options:{signal:t,variables:{cartId:r,input:i}},path:"setBillingAddressOnCart.cart",signalType:"cart",transformer:s.o})},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},8572:(e,t,r)=>{r.d(t,{_:()=>$,i:()=>G});var n=r(2532),i=r(4944),o=r(3792),a=r(3388),s=r(8412),l=()=>(0,s.im)(a.W,{className:"bill-to-shipping-address__skeleton",children:(0,s.im)(a.K,{variant:"row",size:"small"})}),d=r(5536),c=r.n(d),u=r(7008),p=r.n(u),f=r(1496),v=r.n(f),m=r(9356),h=r.n(m),b=r(9904),g=r.n(b),y=r(9960),S={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.22.0"},styleTagTransform:function(e,t){window._loadedStyles=window._loadedStyles??{};const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk"),i=r?`sdk/${r}`:t.getAttribute("data-dropin");t.setAttribute("data-dropin",i),t.removeAttribute("data-sdk");const o=window._loadedStyles[i];if(o){const i=function(e,t){const[r,n]=e.split("-"),[i,o]=t.split("-"),a=[...r.split("."),n],s=[...i.split("."),o],l=parseInt(a[0],10),d=parseInt(s[0],10);if(l!==d)return l>d?e:t;const c=parseInt(a[1],10),u=parseInt(s[1],10);if(c!==u)return c>u?e:t;const p=parseInt(a[2],10),f=parseInt(s[2],10);if(p!==f)return p>f?e:t;if(a[3]&&s[3]){const r=/(alpha|beta)(.*)/,n=a[3].match(r),i=s[3].match(r),o=n[1],l=i[1],d=parseInt(n[2],10),c=parseInt(i[2],10);if(o===l)return d>c?e:t;if("alpha"===o&&"beta"===l)return t;if("beta"===o&&"alpha"===l)return e}return a[3]?t:e}(n,o.sdk);if(!r||r&&i===o.sdk){const t=o.style.textContent;o.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else r&&i!==o.sdk&&(o.style.textContent=`/* --- UPGRADED --- */\n${e}`);return void t.remove()}t.textContent=e,window._loadedStyles[i]={sdk:n,core:r,style:t};const a=document.querySelector("head"),{lastDropinStyleInjected:s,lastSDKStyleInjected:l}=window._loadedStyles;r?(l?a.insertBefore(t,l.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastSDKStyleInjected=t):(s?a.insertBefore(t,s.nextSibling):l?a.insertBefore(t,l.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastDropinStyleInjected=t)}};S.setAttributes=h(),S.insert=v().bind(null,"head"),S.domAPI=p(),S.insertStyleElement=g();c()(y.c,S);y.c&&y.c.locals&&y.c.locals;var _=r(2460),O=["className","isInitialized","checked"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var k=e=>{var{className:t,isInitialized:r=!0,checked:n=!0}=e,a=I(e,O),d=(0,_.cF)({title:"Checkout.BillToShippingAddress.title"});return r?(0,s.im)("div",{className:(0,i.i)(["checkout-bill-to-shipping-address",t]),children:(0,s.im)(o.y,j({"data-testid":"bill-to-shipping-checkbox",className:"checkout-bill-to-shipping-address__checkbox",checked:n,name:"checkout-bill-to-shipping-address__checkbox",label:d.title},a))}):(0,s.im)(l,{})},B=r(5668),A=r(9488),C=r(2796),x=r(40),T=r(2236),E=r(6892),D=["children"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function G(e,t,r){return!t&&!r||!(!t||!r)&&e.every((e=>{var n=e.code;return function(e,t,r){var n=e[r],i=t[r];return void 0===n&&void 0===i||null===n&&null===i||("object"==typeof n&&"object"==typeof i?JSON.stringify(n)===JSON.stringify(i):n===i)}(t,r,n)}))}var $=e=>{var{children:t}=e,r=q(e,D),i=A.isBillToShippingSignal.value.checked,{cartId:o,hasShippingAddress:a,isInitialized:l}=(e=>{var t,{isBillToShipping:r}=e,[n,i]=(0,C.oT)(!1),{fields:o}=(0,T.q)(),a=B.cartSignal.value.data,s=(null==a?void 0:a.id)||"",l=!!a,d=null==a?void 0:a.billingAddress,c=null==a||null===(t=a.shippingAddresses)||void 0===t?void 0:t[0],u=Boolean(c),p=Boolean(d&&c),{customer:f}=(0,E.An)(),v=null==f?void 0:f.defaultShippingAddress,m=null==f?void 0:f.defaultBillingAddress,h=Boolean(v&&m);return(0,C.YB)((()=>{if(!n){var e=localStorage.getItem(x.c);e&&(i(!0),r.value={checked:"true"===e,setByUser:!1})}}),[n,r]),(0,C.YB)((()=>{if(o&&l&&!p&&h){i(!0);var e=G(o,m,v);r.value={checked:e,setByUser:!1}}}),[m,v,o,l,p,h,r,n]),(0,C.YB)((()=>{if(!n&&o&&l){i(!0);var e=G(o,d,c);r.value={checked:d?e:r.value.checked,setByUser:!1}}}),[d,o,l,r,n,c]),{cartId:s,isInitialized:n,hasShippingAddress:u}})({isBillToShipping:A.isBillToShippingSignal});return(0,s.im)(k,F(F({},r),{},{checked:i,isInitialized:l,onChange:e=>{var t=e.target.checked;if(A.isBillToShippingSignal.value={checked:t,setByUser:!0},localStorage.setItem(x.c,t.toString()),l&&t&&a){var r=new AbortController;return(0,n.W)({signal:r.signal,cartId:o,input:{same_as_shipping:!0}}).catch((e=>{console.error(e)})),()=>{r.abort()}}},disabled:B.cartSignal.value.pending}))}},40:(e,t,r)=>{r.d(t,{c:()=>n});var n="is_bill_to_shipping_address"},9700:(e,t,r)=>{r.d(t,{_k:()=>i._,cT:()=>n.c,cp:()=>i._,iI:()=>i.i});var n=r(40),i=r(8572)},2236:(e,t,r)=>{r.d(t,{Y:()=>l,q:()=>d});var n=r(6900),i=r(304),o=r(8596),a=r(8412),s=(0,i.GY)(void 0);function l(e){var{children:t}=e,[r,i]=(0,o.oT)({});return(0,o.YB)((()=>{(0,n.m)().then((e=>i({fields:e})))}),[]),(0,a.im)(s.Provider,{value:r,children:t})}function d(){var e=(0,o.Co)(s);if(void 0!==e)return e;throw new Error("useAddressFormFields must be used within an AddressFormFieldsProvider")}},6892:(e,t,r)=>{r.d(t,{An:()=>c,kb:()=>d});var n=r(9624),i=r(304),o=r(8596),a=r(8412);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}var l=(0,i.GY)(void 0),d=e=>{var{children:t}=e,[r,i]=(0,o.oT)(),d=function(){var e,t=(e=function*(){if(!r)try{var e=yield(0,n.S)();i(e)}catch(e){console.error("Failed to load customer:",e)}},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),c={customer:r,loadCustomer:d,resetCustomer:()=>{i(void 0)}};return(0,a.im)(l.Provider,{value:c,children:t})};function c(){var e=(0,o.Co)(l);if(void 0!==e)return e;throw new Error("useCustomer must be used within a CustomerProvider")}},764:(e,t,r)=>{r.d(t,{Y:()=>n});var n=e=>{if(e&&0!==e.length)throw Error(e.map((e=>e.message)).join(" "))}},9488:(e,t,r)=>{r.d(t,{isBillToShippingSignal:()=>n});var n=(0,r(1520).OC)({checked:!0,setByUser:!1})},9960:(e,t,r)=>{r.d(t,{c:()=>s});var n=r(6008),i=r.n(n),o=r(2076),a=r.n(o)()(i());a.push([e.id,".checkout-bill-to-shipping-address{\n  display:grid;\n}\n\n.checkout-bill-to-shipping-address label{\n  font:var(--type-body-2-default-font);\n  letter-spacing:var(--type-body-2-default-letter-spacing);\n  gap:0;\n}\n",""]);const s=a},8122:(t,r,n)=>{t.exports=(e=>{var t={};return n.d(t,e),t})({events:()=>e.events})},8616:(e,r,n)=>{e.exports=(e=>{var t={};return n.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as n from"../8412.js";r.C(n);import*as i from"../2892.js";r.C(i);import*as o from"../2328.js";r.C(o);import*as a from"../8668.js";r.C(a);import*as s from"../8096.js";r.C(s);import*as l from"./BillToShippingAddress.js";r.C(l);var d,c=(d=9700,r(r.s=d)),u=c.cT,p=c._k,f=c.iI,v=c.cp;export{u as BILL_TO_SHIPPING_KEY,p as BillToShippingAddress,f as compareAddresses,v as default};