{"version":3,"file":"Checkout.js","sources":["../../../ElsieSDK/packages/elsie/src/icons/Cart.svg","../../../ElsieSDK/packages/elsie/src/icons/OrderError.svg","../../src/components/EmptyCart/EmptyCart.tsx","../../src/components/OutOfStock/OutOfStock.tsx","../../src/components/ServerError/ServerError.tsx","../../src/containers/Checkout/constants.ts","../../src/containers/Checkout/Checkout.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgCart = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_102_196)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3601 18.16H6.5601L4.8801 3H2.3501M19.6701 19.59C19.6701 20.3687 19.0388 21 18.2601 21C17.4814 21 16.8501 20.3687 16.8501 19.59C16.8501 18.8113 17.4814 18.18 18.2601 18.18C19.0388 18.18 19.6701 18.8113 19.6701 19.59ZM7.42986 19.59C7.42986 20.3687 6.79858 21 6.01986 21C5.24114 21 4.60986 20.3687 4.60986 19.59C4.60986 18.8113 5.24114 18.18 6.01986 18.18C6.79858 18.18 7.42986 18.8113 7.42986 19.59Z\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M5.25 6.37L20.89 8.06L20.14 14.8H6.19\", stroke: \"currentColor\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_102_196\" }, /* @__PURE__ */ React.createElement(\"rect\", { vectorEffect: \"non-scaling-stroke\", width: 19.29, height: 19.5, fill: \"white\", transform: \"translate(2.3501 2.25)\" }))));\nexport default SvgCart;\n","import * as React from \"react\";\nconst SvgOrderError = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_4797_15331)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M10.25 20.91L1.5 17.55V6.51996L10.25 9.92996V20.91Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M6.24023 4.64001L14.9902 8.06001V11.42\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"error-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M19 13.31L15.5 19.37H22.5L19 13.31Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"error-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M19.0202 17.11H18.9802L18.9502 15.56H19.0502L19.0202 17.11ZM18.9602 18.29V18.06H19.0502V18.29H18.9602Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M19 12.16V6.51996L10.25 9.92996V20.91L14.27 19.37L14.4 19.32\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M1.5 6.51999L10.25 3.04999L19 6.51999L10.25 9.92999L1.5 6.51999Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_4797_15331\" }, /* @__PURE__ */ React.createElement(\"rect\", { width: 22, height: 18.86, fill: \"white\", transform: \"translate(1 2.54999)\" }))));\nexport default SvgOrderError;\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/EmptyCart/EmptyCart.css';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { Cart } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface EmptyCartProps extends HTMLAttributes<HTMLDivElement> {\n  title?: string;\n  routeHome?: () => string;\n}\n\nexport const EmptyCart: FunctionComponent<EmptyCartProps> = ({\n  className,\n  title,\n  routeHome,\n  ...props\n}) => {\n  const translations = useText({\n    Title: 'Checkout.EmptyCart.title',\n    Button: 'Checkout.EmptyCart.button',\n  });\n\n  return (\n    <IllustratedMessage\n      {...props}\n      data-testid=\"checkout-empty-cart\"\n      className={classes(['checkout-empty-cart', className])}\n      heading={title ?? translations.Title}\n      icon={\n        <Icon\n          className={classes(['checkout-empty-cart__icon'])}\n          source={Cart}\n        />\n      }\n      action={\n        routeHome?.() ? (\n          <Button\n            className=\"checkout-empty-cart__button\"\n            size=\"medium\"\n            variant=\"primary\"\n            key=\"routeHome\"\n            type=\"submit\"\n            href={routeHome?.()}\n          >\n            {translations.Button}\n          </Button>\n        ) : undefined\n      }\n    />\n  );\n};\n","import { FunctionComponent, JSX } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/OutOfStock/OutOfStock.css';\nimport { Text, useText } from '@adobe/elsie/i18n';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { OrderError } from '@adobe/elsie/icons';\n\nexport interface OutOfStockProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  icon?: FunctionComponent<JSX.SVGAttributes<SVGElement>>;\n  routeCart?: () => string;\n}\n\nexport const OutOfStock: FunctionComponent<OutOfStockProps> = ({\n  className,\n  icon,\n  routeCart,\n  ...props\n}) => {\n  const translations = useText({\n    Title: 'Checkout.OutOfStock.title',\n    Message: 'Checkout.OutOfStock.message',\n  });\n\n  return (\n    <div\n      {...props}\n      className={classes(['checkout-out-of-stock', className])}\n      data-testid=\"checkout-out-of-stock\"\n    >\n      <IllustratedMessage\n        heading={translations.Title}\n        message={<p>{translations.Message}</p>}\n        icon={\n          <Icon\n            source={icon ?? OrderError}\n            className={classes(['checkout-out-of-stock__icon'])}\n          />\n        }\n      />\n\n      {routeCart?.() && (\n        <Button\n          className=\"checkout-out-of-stock__button\"\n          size=\"medium\"\n          variant=\"primary\"\n          key=\"routeCart\"\n          type=\"submit\"\n          href={routeCart?.()}\n        >\n          <Text id=\"Checkout.OutOfStock.button\" />\n        </Button>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/ServerError/ServerError.css';\nimport { MarkupText, useText } from '@adobe/elsie/i18n';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { OrderError } from '@adobe/elsie/icons';\n\nexport interface ServerErrorProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  errorMessage: string;\n  contactSupport?: string;\n  onClick?: (e: any) => void;\n}\n\nexport const ServerError: FunctionComponent<ServerErrorProps> = ({\n  className,\n  errorMessage,\n  contactSupport,\n  ...props\n}) => {\n  const { onClick } = props;\n\n  const translations = useText({\n    Title: 'Checkout.ServerError.title',\n    Message: 'Checkout.ServerError.message',\n    ContactSupport: 'Checkout.ServerError.contactSupport',\n    Button: 'Checkout.ServerError.button',\n  });\n\n  return (\n    <IllustratedMessage\n      aria-invalid=\"true\"\n      aria-describedby=\"checkout-server-error__message\"\n      aria-live=\"polite\"\n      className={classes(['checkout-server-error', className])}\n      data-testid=\"checkout-server-error\"\n      heading={errorMessage ?? translations.Title}\n      message={\n        <p id={classes(['checkout-server-error__message'])}>\n          {translations.Message}\n          <br />\n          <MarkupText id=\"\">\n            {contactSupport ?? translations.ContactSupport}\n          </MarkupText>\n        </p>\n      }\n      icon={\n        <Icon\n          className={classes(['checkout-server-error__icon'])}\n          source={OrderError}\n        />\n      }\n      action={\n        <Button\n          className={classes(['checkout-server-error__button'])}\n          onClick={onClick}\n        >\n          {translations.Button}\n        </Button>\n      }\n    />\n  );\n};\n","export const OUT_OF_STOCK = 'OUT_OF_STOCK';\n","import { ProductStockStatus } from '@/checkout/__generated__/types';\nimport {\n  getCheckoutData,\n  getStockStatus,\n  placeOrder,\n  UnexpectedError,\n} from '@/checkout/api';\nimport {\n  Checkout as CheckoutComponent,\n  EmptyCart,\n  OutOfStock,\n  ServerError,\n} from '@/checkout/components';\nimport {\n  BillingForm,\n  BillToShippingAddress,\n  CartSummary,\n  ErrorBanner,\n  LoginForm as Login,\n  OrderSummary,\n  PaymentMethods,\n  PlaceOrder,\n  ShippingForm,\n  ShippingMethods,\n} from '@/checkout/containers';\nimport { PaymentMethodSlotContext } from '@/checkout/containers/PaymentMethods';\nimport { cartSignal, isBillToShippingSignal } from '@/checkout/signals';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Slot, SlotProps } from '@adobe/elsie/lib';\nimport { events } from '@adobe/event-bus';\nimport {\n  HTMLAttributes,\n  useCallback,\n  useEffect,\n  useState,\n} from 'preact/compat';\n\nexport type PreselectedAddressFields = {\n  countryCode?: string;\n  region?: string;\n  postCode?: string;\n};\n\nexport type PreselectedShippingMethod = {\n  carrierCode: string;\n  methodCode: string;\n};\n\nexport type PreselectedCartData = {\n  address?: PreselectedAddressFields;\n  shippingMethod?: PreselectedShippingMethod;\n};\n\nexport interface CheckoutProps extends HTMLAttributes<HTMLDivElement> {\n  cartId?: string;\n  routeHome?: () => string;\n  routeCart?: () => string;\n  slots?: {\n    BillingForm?: SlotProps;\n    BillToShipping?: SlotProps;\n    CartSummary?: SlotProps;\n    Login?: SlotProps;\n    OrderSummary?: SlotProps;\n    PaymentMethods?: SlotProps<PaymentMethodSlotContext>;\n    PlaceOrder?: SlotProps;\n    ShippingForm?: SlotProps;\n    ShippingMethods?: SlotProps;\n  };\n  preselectedCartData?: PreselectedCartData;\n}\n\nexport const Checkout = (props: CheckoutProps) => {\n  const {\n    className,\n    cartId,\n    slots,\n    routeHome,\n    routeCart,\n    preselectedCartData,\n    ...restProps\n  } = props;\n  const [serverError, setServerError] = useState('');\n  const [handlePlaceOrder, setHandlePlaceOrder] =\n    useState<() => Promise<void> | undefined>();\n  const [isComplete, setIsComplete] = useState(false);\n  const [hasOutOfStock, setHasOutOfStock] = useState(false);\n\n  const hasProvidedCartId = Boolean(cartId);\n  const { data: cartData } = cartSignal.value;\n\n  const isInitialized = cartData !== undefined;\n  const isVirtual = cartData?.virtual || false;\n  const isPending = hasProvidedCartId && !isInitialized;\n  const hasErrors = serverError !== '';\n  const cartItems = cartData?.items;\n  const hasCartItems = cartItems !== undefined && cartItems!.length > 0;\n  const isEmptyCart = !isPending && !hasCartItems;\n\n  const translations = useText({\n    CheckoutUnexpectedError: 'Checkout.ServerError.unexpected',\n  });\n\n  const defaultPlaceOrderHandler = useCallback(async () => {\n    if (!cartData) return;\n    await placeOrder(cartData.id);\n    cartSignal.value = { pending: false };\n    setIsComplete(true);\n  }, [cartData]);\n\n  const onPlaceOrder = (fn: () => Promise<void>) => {\n    setHandlePlaceOrder(() => fn);\n  };\n\n  const dismissError = async () => {\n    setServerError('');\n\n    if (!cartData) return;\n    await loadCheckoutData(cartData.id);\n  };\n\n  const handleServerError = (error: any) => {\n    setServerError(\n      error instanceof TypeError || error instanceof UnexpectedError\n        ? translations.CheckoutUnexpectedError\n        : error.message\n    );\n  };\n\n  const loadCheckoutData = async (cartId: string) => {\n    const data = await getCheckoutData(cartId);\n    if (data?.virtual) {\n      isBillToShippingSignal.value = { checked: false, setByUser: false };\n    }\n  };\n\n  const checkStockStatus = async (cartId: string) => {\n    const result = await getStockStatus(cartId);\n    setHasOutOfStock(result === ProductStockStatus.OutOfStock);\n  };\n\n  /*\n  Load the checkout data with the provided cart reference and check for out of stock items.\n  After placing the order, the cart will no longer be available but the reference received via prop will still be present.\n  When the checkout is complete, do nothing even if we still have the old cart reference.\n */\n  useEffect(() => {\n    if (!cartId || isComplete) return;\n    loadCheckoutData(cartId);\n    checkStockStatus(cartId);\n  }, [cartId, isComplete]);\n\n  useEffect(() => {\n    const onCartData = events.on(\n      'cart/data',\n      (cart) => {\n        if (!cartId && cart) {\n          loadCheckoutData(cart.id);\n          checkStockStatus(cart.id);\n        }\n      },\n      { eager: true }\n    );\n\n    return () => {\n      onCartData?.off();\n    };\n  }, [cartId]);\n\n  if (isComplete) {\n    return null;\n  }\n\n  if (isEmptyCart) {\n    return <EmptyCart routeHome={routeHome} />;\n  }\n\n  if (hasErrors) {\n    return <ServerError errorMessage={serverError} onClick={dismissError} />;\n  }\n\n  const renderMain = () => {\n    if (hasOutOfStock) {\n      return (\n        <CheckoutComponent.Main\n          outOfStock={<OutOfStock routeCart={routeCart} />}\n        />\n      );\n    }\n\n    return (\n      <CheckoutComponent.Main\n        sections={{\n          billingAddress: (\n            <Slot name=\"BillingForm\" slot={slots?.BillingForm}>\n              <BillingForm />\n            </Slot>\n          ),\n          billToShippingAddress: isVirtual ? undefined : (\n            <Slot name=\"BillToShipping\" slot={slots?.BillToShipping}>\n              <BillToShippingAddress />\n            </Slot>\n          ),\n          login: (\n            <Slot name=\"Login\" slot={slots?.Login}>\n              <Login />\n            </Slot>\n          ),\n          paymentMethods: (\n            <PaymentMethods\n              isShippingInfoRequired={!isVirtual}\n              onPlaceOrder={onPlaceOrder}\n              handleServerError={handleServerError}\n              paymentMethodsSlot={slots?.PaymentMethods}\n            />\n          ),\n          placeOrder: (\n            <PlaceOrder\n              onClick={handlePlaceOrder ?? defaultPlaceOrderHandler}\n              handleServerError={handleServerError}\n            />\n          ),\n          shippingAddress: isVirtual ? undefined : (\n            <Slot name=\"ShippingForm\" slot={slots?.ShippingForm}>\n              <ShippingForm preselectedFields={preselectedCartData?.address} />\n            </Slot>\n          ),\n          shippingMethods: isVirtual ? undefined : (\n            <Slot name=\"ShippingMethods\" slot={slots?.ShippingMethods}>\n              <ShippingMethods\n                preSelectedMethod={preselectedCartData?.shippingMethod}\n              />\n            </Slot>\n          ),\n        }}\n      />\n    );\n  };\n\n  const renderAside = () => {\n    return (\n      <CheckoutComponent.Aside\n        sections={{\n          cartSummary: (\n            <Slot name=\"CartSummary\" slot={slots?.CartSummary}>\n              <CartSummary routeCart={routeCart} />\n            </Slot>\n          ),\n          orderSummary: (\n            <Slot name=\"OrderSummary\" slot={slots?.OrderSummary}>\n              <OrderSummary />\n            </Slot>\n          ),\n        }}\n      />\n    );\n  };\n\n  return (\n    <CheckoutComponent\n      className={className}\n      banner={<ErrorBanner />}\n      {...restProps}\n    >\n      {renderAside()}\n      {renderMain()}\n    </CheckoutComponent>\n  );\n};\n"],"names":["SvgCart","props","React","SvgOrderError","EmptyCart","className","title","routeHome","translations","useText","Title","Button","_jsx","IllustratedMessage","classes","heading","icon","Icon","source","Cart","action","size","variant","type","href","children","undefined","OutOfStock","routeCart","Message","_jsxs","message","OrderError","Text","id","ServerError","errorMessage","contactSupport","onClick","ContactSupport","MarkupText","OUT_OF_STOCK","Checkout","cartId","slots","preselectedCartData","restProps","serverError","setServerError","useState","handlePlaceOrder","setHandlePlaceOrder","isComplete","setIsComplete","hasOutOfStock","setHasOutOfStock","hasProvidedCartId","Boolean","data","cartData","cartSignal","value","isInitialized","isVirtual","virtual","isPending","hasErrors","cartItems","items","hasCartItems","length","isEmptyCart","CheckoutUnexpectedError","defaultPlaceOrderHandler","useCallback","placeOrder","pending","onPlaceOrder","fn","dismissError","loadCheckoutData","handleServerError","error","TypeError","UnexpectedError","getCheckoutData","isBillToShippingSignal","checked","setByUser","checkStockStatus","result","getStockStatus","ProductStockStatus","useEffect","onCartData","events","on","cart","eager","off","renderMain","CheckoutComponent","Main","outOfStock","sections","billingAddress","Slot","name","slot","BillingForm","billToShippingAddress","BillToShipping","BillToShippingAddress","login","Login","paymentMethods","PaymentMethods","isShippingInfoRequired","paymentMethodsSlot","PlaceOrder","shippingAddress","ShippingForm","preselectedFields","address","shippingMethods","ShippingMethods","preSelectedMethod","shippingMethod","renderAside","Aside","cartSummary","CartSummary","orderSummary","OrderSummary","banner","ErrorBanner"],"mappings":"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"}