{"version":3,"file":"OrderConfirmation.js","sources":["../../src/reducers/orderConfirmation.ts","../../src/hooks/useBreakpoint/useBreakpoint.ts","../../src/components/OrderConfirmation/OrderConfirmation.tsx","../../../ElsieSDK/packages/elsie/src/icons/Close.svg","../../../ElsieSDK/packages/elsie/src/icons/OrderSuccess.svg","../../../ElsieSDK/packages/elsie/src/icons/CheckWithCircle.svg","../../../ElsieSDK/packages/elsie/src/icons/WarningFilled.svg","../../src/components/Header/Header.tsx","../../src/components/Header/HeaderSkeleton.tsx","../../src/components/InLineAlert/InLineAlert.tsx","../../src/components/OrderSearchForm/OrderSearchForm.tsx","../../src/components/Details/Details.tsx","../../src/components/Details/DetailsSkeleton.tsx","../../src/components/Footer/Footer.tsx","../../src/components/Footer/FooterSkeleton.tsx","../../src/components/StaticSkeleton/StaticSkeleton.tsx","../../src/components/OrderSummary/OrderSummary.tsx","../../src/components/OrderSummary/OrderSummarySkeleton.tsx","../../src/components/CartSummaryItem/CartSummaryItem.tsx","../../src/data/transforms/transform-order-items.ts","../../src/components/CartSummary/CartSummary.tsx","../../../ElsieSDK/packages/elsie/src/components/CartItem/CartItemSkeleton.tsx","../../src/components/CartSummary/CartSummarySkeleton.tsx","../../src/containers/OrderConfirmation/OrderConfirmation.tsx"],"sourcesContent":["import {\n  GuestOrderByTokenQuery,\n  GuestOrderQuery,\n} from '@/order-confirmation/__generated__/types';\n\nexport enum Actions {\n  ADD_ORDER_REFERENCE = 'ADD_ORDER_REFERENCE',\n  LOADING = 'LOADING',\n  SET_DETAILS = 'SET_DETAILS',\n  ALERT = 'ALERT',\n  DISMISS_ALERT = 'DISMISS_ALERT',\n}\n\nexport type OrderDetails =\n  | GuestOrderQuery['guestOrder']\n  | GuestOrderByTokenQuery['guestOrderByToken'];\n\ninterface LoadingAction {\n  type: Actions.LOADING;\n}\n\ninterface SetDetailsAction {\n  type: Actions.SET_DETAILS;\n  details: OrderDetails | null;\n  alert?: Alert;\n}\n\nexport enum AlertType {\n  ERROR = 'error',\n  WARNING = 'warning',\n  SUCCESS = 'success',\n}\n\nexport enum AlertCode {\n  INVALID_ORDER = 'invalid_order',\n  INVALID_SEARCH = 'invalid_search',\n  UNKNOWN = 'unknown_error',\n}\n\nexport type Alert = {\n  type: AlertType;\n  code: AlertCode;\n  message: string;\n};\n\ninterface AlertAction {\n  type: Actions.ALERT;\n  alert: Alert;\n}\n\ninterface DismissAlertAction {\n  type: Actions.DISMISS_ALERT;\n}\n\nexport interface State {\n  isLoading: boolean;\n  details: OrderDetails | null;\n  token?: string;\n  alert?: Alert;\n}\n\ntype Action =\n  | LoadingAction\n  | SetDetailsAction\n  | AlertAction\n  | DismissAlertAction;\n\nexport function orderConfirmationReducer(state: State, action: Action): State {\n  switch (action.type) {\n    case Actions.LOADING:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case Actions.SET_DETAILS:\n      return {\n        ...state,\n        isLoading: false,\n        details: action.details,\n        alert: action.alert,\n      };\n    case Actions.ALERT:\n      return {\n        ...state,\n        isLoading: false,\n        alert: action.alert,\n      };\n    case Actions.DISMISS_ALERT:\n      return {\n        ...state,\n        alert: undefined,\n      };\n    default:\n      return state;\n  }\n}\n","import { useEffect, useState } from 'preact/hooks';\n\nexport const useBreakpoint = () => {\n  const getBreakpoint = () => {\n    if (window.innerWidth >= 1920) return 'xxlarge';\n    if (window.innerWidth >= 1366) return 'xlarge';\n    if (window.innerWidth >= 1024) return 'large';\n    if (window.innerWidth >= 768) return 'medium';\n\n    return 'small';\n  };\n\n  const [breakpoint, setBreakpoint] = useState<\n    ReturnType<typeof getBreakpoint>\n  >(getBreakpoint());\n\n  useEffect(() => {\n    let timeoutId: ReturnType<typeof setTimeout>;\n\n    const handleResize = () => {\n      if (timeoutId) clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => setBreakpoint(getBreakpoint()), 50);\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      if (timeoutId) clearTimeout(timeoutId);\n    };\n  }, []);\n\n  return breakpoint;\n};\n","import { HTMLAttributes } from 'preact/compat';\nimport { FunctionComponent, VNode } from 'preact';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/order-confirmation/components/OrderConfirmation/OrderConfirmation.css';\nimport {\n  CartSummary,\n  Details,\n  Footer,\n  Header,\n  OrderSearchFields,\n  OrderSearchForm,\n  OrderSummary,\n  Summary,\n} from '@/order-confirmation/components';\nimport {\n  AlertCode,\n  State,\n} from '@/order-confirmation/reducers/orderConfirmation';\nimport { useBreakpoint } from '@/order-confirmation/hooks/useBreakpoint';\n\nconst ConditionalWrapper: FunctionComponent<{\n  children?: VNode;\n  className: string;\n}> = ({ children, className }) => {\n  const breakpoint = useBreakpoint();\n  return breakpoint !== 'small' ? (\n    <div className={className}>{children}</div>\n  ) : (\n    <>{children}</>\n  );\n};\n\nexport interface OrderConfirmationProps extends HTMLAttributes<HTMLDivElement> {\n  state: State;\n  dismissAlert: () => void;\n  onOrderSearch: (fields: OrderSearchFields) => void;\n  routeHome?: () => string;\n  routeSupport?: () => string;\n}\n\n// TODO types\nfunction mapDetailsToSummary(orderDetails: any): Summary | undefined {\n  const total = orderDetails?.total;\n\n  if (!total) {\n    return undefined;\n  }\n\n  const grandTotal = total?.grand_total;\n  const subtotal = total?.subtotal;\n  const shipping = total?.total_shipping;\n  const tax = total?.total_tax;\n\n  return {\n    total: {\n      inclTax: {\n        amount: grandTotal?.value || 0,\n        currency: grandTotal?.currency || '',\n      },\n    },\n    subtotal: {\n      amount: subtotal?.value || 0,\n      currency: subtotal?.currency || '',\n      isTaxIncl: false,\n    },\n    shipping: {\n      amount: shipping?.value || 0,\n      currency: shipping?.currency || '',\n    },\n    tax: {\n      amount: tax?.value || 0,\n      currency: tax?.currency || '',\n    },\n  };\n}\n\ntype AsideProps = {\n  state: State;\n};\n\nconst Aside: FunctionComponent<AsideProps> = ({ state }) => {\n  const { isLoading, details } = state;\n  const summary = mapDetailsToSummary(details);\n\n  return (\n    <>\n      <OrderSummary isLoading={isLoading} summary={summary} />\n      <CartSummary isLoading={isLoading} details={details} />\n    </>\n  );\n};\n\nconst AsideElement: FunctionComponent<AsideProps> = ({ state }) => {\n  return (\n    <ConditionalWrapper className=\"order-confirmation__aside\">\n      <Aside state={state} />\n    </ConditionalWrapper>\n  );\n};\n\nconst Main: FunctionComponent<OrderConfirmationProps> = ({\n  state,\n  routeHome,\n  routeSupport,\n}) => {\n  const { details, isLoading } = state;\n\n  const billingAddress = details?.billing_address;\n  const customerName = billingAddress?.firstname || '';\n  const orderNumber = details?.number || '';\n  const orderStatus = details?.status || '';\n\n  const showCustomerHeader = !!customerName && !!orderNumber;\n\n  return (\n    <>\n      {(isLoading || (!isLoading && showCustomerHeader)) && (\n        <Header\n          isLoading={isLoading}\n          customerName={customerName}\n          orderNumber={orderNumber}\n          orderStatus={orderStatus}\n        />\n      )}\n\n      <Details isLoading={isLoading} orderDetails={details} />\n\n      <Footer\n        isLoading={isLoading}\n        routeHome={routeHome}\n        routeSupport={routeSupport}\n      />\n    </>\n  );\n};\n\nconst MainElement: FunctionComponent<OrderConfirmationProps> = ({\n  state,\n  routeHome,\n  routeSupport,\n  dismissAlert,\n  onOrderSearch,\n}) => {\n  return (\n    <ConditionalWrapper className=\"order-confirmation__main\">\n      <Main\n        state={state}\n        routeHome={routeHome}\n        routeSupport={routeSupport}\n        dismissAlert={dismissAlert}\n        onOrderSearch={onOrderSearch}\n      />\n    </ConditionalWrapper>\n  );\n};\n\nexport const OrderConfirmation: FunctionComponent<OrderConfirmationProps> = ({\n  className,\n  state,\n  dismissAlert,\n  routeHome,\n  routeSupport,\n  onOrderSearch,\n}) => {\n  const { details, alert, isLoading } = state;\n  const hasOrderDetails = !!details?.number;\n  const isInvalidOrder = alert && alert.code === AlertCode.INVALID_ORDER;\n  const isInvalidSearch = alert && alert.code === AlertCode.INVALID_SEARCH;\n\n  if (!isLoading && !hasOrderDetails) {\n    return (\n      <div className={classes(['order-confirmation', className])}>\n        <OrderSearchForm\n          alert={\n            isInvalidOrder || isInvalidSearch\n              ? {\n                  heading: alert.message,\n                  description: '',\n                  type: alert.type,\n                  onDismiss: dismissAlert,\n                }\n              : undefined\n          }\n          onOrderSearch={onOrderSearch}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes(['order-confirmation', className])}>\n      <MainElement\n        state={state}\n        dismissAlert={dismissAlert}\n        routeHome={routeHome}\n        routeSupport={routeSupport}\n        onOrderSearch={onOrderSearch}\n      />\n      <AsideElement state={state} />\n    </div>\n  );\n};\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import * as React from \"react\";\nconst SvgOrderSuccess = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_4797_15077)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M10.15 20.85L1.5 17.53V6.63L10.15 10V20.85Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M1.5 6.63001L10.15 3.20001L18.8 6.63001L10.15 10L1.5 6.63001Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M6.17969 4.77002L14.8297 8.15002V11.47\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.7896 12.64V6.63L10.1396 10V20.85L14.8296 19.05\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"success-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M15.71 17.26C15.71 15.38 17.23 13.86 19.11 13.86C20.99 13.86 22.51 15.38 22.51 17.26C22.51 19.14 20.99 20.66 19.11 20.66C17.23 20.66 15.71 19.14 15.71 17.26Z\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"success-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M17.4805 17.49L18.5605 18.41L20.7205 16.33\", stroke: \"currentColor\", strokeLinecap: \"square\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_4797_15077\" }, /* @__PURE__ */ React.createElement(\"rect\", { width: 22, height: 18.65, fill: \"white\", transform: \"translate(1 2.70001)\" }))));\nexport default SvgOrderSuccess;\n","import * as React from \"react\";\nconst SvgCheckWithCircle = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M6.75 12.762L10.2385 15.75L17.25 9\", stroke: \"currentColor\" }));\nexport default SvgCheckWithCircle;\n","import * as React from \"react\";\nconst SvgWarningFilled = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M1 20.8953L12.1922 1.5L23.395 20.8953H1ZM13.0278 13.9638L13.25 10.0377V9H11.25V10.0377L11.4722 13.9638H13.0278ZM11.2994 16V17.7509H13.2253V16H11.2994Z\", fill: \"currentColor\" }));\nexport default SvgWarningFilled;\n","import { FunctionComponent } from 'preact';\nimport { Icon } from '@adobe/elsie/components';\nimport { OrderSuccess } from '@adobe/elsie/icons';\nimport { Text } from '@adobe/elsie/i18n';\nimport { HeaderSkeleton } from '@/order-confirmation/components';\nimport '@/order-confirmation/components/Header/Header.css';\n\nexport interface HeaderProps {\n  isLoading: boolean;\n  customerName?: string;\n  orderNumber?: string;\n  orderStatus?: string;\n}\nexport const Header: FunctionComponent<HeaderProps> = ({\n  isLoading,\n  customerName,\n  orderNumber,\n  orderStatus,\n}) => {\n  if (isLoading) {\n    return <HeaderSkeleton />;\n  }\n\n  return (\n    <div className={'order-confirmation-header order-confirmation__card'}>\n      <Icon\n        source={OrderSuccess}\n        size=\"64\"\n        className={'order-confirmation-header__icon'}\n      />\n\n      <h1 className={'order-confirmation-header__title'}>\n        {customerName ? (\n          <Text\n            id={'OrderConfirmation.Header.title'}\n            fields={{ name: customerName }}\n          />\n        ) : (\n          <Text id={'OrderConfirmation.Header.defaultTitle'} />\n        )}\n      </h1>\n\n      {orderNumber && (\n        <p>\n          <Text\n            id={'OrderConfirmation.Header.order'}\n            fields={{ order: orderNumber }}\n          />\n          {orderStatus !== undefined && orderStatus !== '' && (\n            <span className={'order-confirmation-header__status'}>\n              {' '}\n              ({orderStatus})\n            </span>\n          )}\n        </p>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const HeaderSkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton\n      data-testid=\"order-confirmation-header-skeleton\"\n      className={'order-confirmation-header'}\n    >\n      <SkeletonRow variant={'empty'} size=\"xlarge\" fullWidth={true} />\n      <SkeletonRow variant={'empty'} size=\"medium\" />\n      <SkeletonRow variant={'empty'} size=\"medium\" />\n      <SkeletonRow variant={'empty'} size=\"medium\" />\n      <SkeletonRow variant={'empty'} size=\"medium\" />\n      <SkeletonRow variant={'empty'} size=\"medium\" />\n      <SkeletonRow size=\"small\" fullWidth={true} />\n      <SkeletonRow variant={'heading'} size=\"xsmall\" fullWidth={true} />\n    </Skeleton>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/order-confirmation/components/InLineAlert/InLineAlert.css';\nimport { Button, Icon } from '@adobe/elsie/components';\nimport { CheckWithCircle, Close, WarningFilled } from '@adobe/elsie/icons';\n\nexport interface InLineAlertProps extends HTMLAttributes<HTMLDivElement> {\n  heading: string;\n  description: string;\n  type?: 'error' | 'warning' | 'success';\n  additionalActions?: Array<{\n    label: string;\n    onClick: (event: Event) => void;\n  }>;\n  onDismiss: (event: Event) => void;\n}\n\nconst VARIANT_TO_ICON_MAP = {\n  error: WarningFilled,\n  success: CheckWithCircle,\n  warning: WarningFilled,\n};\n\nexport const InLineAlert: FunctionComponent<InLineAlertProps> = ({\n  className,\n  type = 'warning',\n  additionalActions,\n  onDismiss,\n  heading,\n  description,\n  ...props\n}) => {\n  const icon = VARIANT_TO_ICON_MAP[type];\n  const translations = {\n    dismiss: 'OrderConfirmation.InlineAlert.Dismiss',\n  };\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'dropin-in-line-alert',\n        `dropin-in-line-alert--${type}`,\n        className,\n      ])}\n    >\n      <div className={'dropin-in-line-alert__heading'}>\n        <div className={'dropin-in-line-alert__title-container'}>\n          {icon && (\n            <Icon source={icon} className={'dropin-in-line-alert__icon'} />\n          )}\n\n          <span className={'dropin-in-line-alert__title'}>{heading}</span>\n        </div>\n\n        <div className={'dropin-in-line-alert__actions-container'}>\n          {additionalActions?.length == 1 && (\n            <Button\n              variant=\"tertiary\"\n              className={'dropin-in-line-alert__additional-action'}\n              onClick={additionalActions[0]?.onClick}\n              aria-label={additionalActions[0]?.label}\n            >\n              {additionalActions[0]?.label}\n            </Button>\n          )}\n          {onDismiss && (\n            <Button\n              icon={<Icon source={Close} size=\"24\" stroke=\"2\" />}\n              className={'dropin-in-line-alert__dismiss-button'}\n              variant=\"tertiary\"\n              onClick={onDismiss}\n              aria-label={translations.dismiss}\n            />\n          )}\n        </div>\n      </div>\n\n      {description && (\n        <p className={'dropin-in-line-alert__description'}>{description}</p>\n      )}\n\n      {additionalActions && additionalActions?.length > 1 && (\n        <div className={'dropin-in-line-alert__additional-actions-container'}>\n          {additionalActions.map((action) => (\n            <Button\n              key={action.label}\n              variant=\"tertiary\"\n              className={'dropin-in-line-alert__additional-action'}\n              onClick={action.onClick}\n            >\n              {action.label}\n            </Button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport '@/order-confirmation/components/OrderSearchForm/OrderSearchForm.css';\nimport { Button, Card, Field, Input } from '@adobe/elsie/components';\nimport { Text, useText } from '@adobe/elsie/i18n';\nimport { getFormValues } from '@adobe/elsie/lib';\nimport {\n  InLineAlert,\n  InLineAlertProps,\n} from '@/order-confirmation/components/InLineAlert';\n\nexport interface OrderSearchFields {\n  email: string;\n  number: string;\n  postcode?: string;\n}\n\nexport interface OrderSearchFormProps extends HTMLAttributes<HTMLDivElement> {\n  alert?: InLineAlertProps;\n  onOrderSearch?: (fields: OrderSearchFields) => void;\n}\n\nexport const OrderSearchForm: FunctionComponent<OrderSearchFormProps> = ({\n  alert,\n  onOrderSearch,\n}) => {\n  const translations = useText({\n    email: 'OrderConfirmation.OrderSearchForm.email',\n    postcode: 'OrderConfirmation.OrderSearchForm.postcode',\n    number: 'OrderConfirmation.OrderSearchForm.orderNumber',\n  });\n\n  const handleSubmit = (event: Event) => {\n    event.preventDefault();\n    const formValues = getFormValues(event.target as HTMLFormElement);\n    onOrderSearch?.(formValues as OrderSearchFields);\n  };\n\n  return (\n    <Card\n      variant={'secondary'}\n      className={\n        'order-confirmation-order-search-form order-confirmation__card'\n      }\n    >\n      <h2 className={'order-confirmation-order-search-form__title'}>\n        <Text id={'OrderConfirmation.OrderSearchForm.title'} />\n      </h2>\n\n      <p>\n        <Text id={'OrderConfirmation.OrderSearchForm.description'} />\n      </p>\n\n      {alert && (\n        <InLineAlert\n          className={'order-confirmation-order-search-form__alert'}\n          data-testid='order-confirmation-alert'\n          {...alert}\n        />\n      )}\n\n      <form\n        className={'order-confirmation-order-search-form__fields'}\n        onSubmit={handleSubmit}\n      >\n        <div className={'order-confirmation-order-search-form__fields-columns'}>\n          <Field>\n            <Input\n              id=\"order-email\"\n              name=\"email\"\n              type={'email'}\n              autocomplete={'email'}\n              placeholder={translations.email}\n              floatingLabel={translations.email}\n              required={true}\n              aria-label={translations.email}\n              aria-required={true}\n            />\n          </Field>\n\n          <Field>\n            <Input\n              id=\"postcode\"\n              name=\"postcode\"\n              type={'text'}\n              autocomplete={'postal-code'}\n              placeholder={translations.postcode}\n              floatingLabel={translations.postcode}\n              required={false}\n              aria-label={translations.postcode}\n              aria-required={true}\n            />\n          </Field>\n        </div>\n\n        <Field>\n          <Input\n            id=\"order-number\"\n            name=\"number\"\n            type={'text'}\n            placeholder={translations.number}\n            floatingLabel={translations.number}\n            required={true}\n            aria-label={translations.number}\n            aria-required={true}\n          />\n        </Field>\n\n        <Button\n          className={'order-confirmation-order-search-form__button'}\n          size={'medium'}\n          variant={'primary'}\n          key={'logIn'}\n          type={'submit'}\n        >\n          <Text id={'OrderConfirmation.OrderSearchForm.button'} />\n        </Button>\n      </form>\n    </Card>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport '@/order-confirmation/components/Details/Details.css';\nimport { Price, Card } from '@adobe/elsie/components';\nimport { Text } from '@adobe/elsie/i18n';\nimport { OrderDetails } from '@/order-confirmation/reducers/orderConfirmation';\nimport {\n  StaticSkeleton,\n  DetailsSkeleton,\n} from '@/order-confirmation/components';\n\nexport interface DetailsProps extends HTMLAttributes<HTMLDivElement> {\n  isLoading: boolean;\n  orderDetails: OrderDetails | null;\n}\n\nexport const Details: FunctionComponent<DetailsProps> = ({\n  isLoading,\n  orderDetails,\n}) => {\n  if (isLoading) {\n    return <DetailsSkeleton />;\n  }\n\n  const hasOrderDetails = orderDetails && orderDetails?.number;\n\n  const contactDetails = orderDetails?.email || '';\n  const hasToDisplayContactDetails = orderDetails && contactDetails !== '';\n\n  const shippingAddress = orderDetails?.shipping_address;\n  const hasToDisplayShippingAddress = orderDetails && shippingAddress !== null;\n\n  const billingAddress = orderDetails?.billing_address;\n  const hasToDisplayBillingAddress = orderDetails && billingAddress !== null;\n\n  const shippingMethod = orderDetails?.shipping_method;\n  const shippingCost = orderDetails?.total?.total_shipping?.value;\n  const shippingCurrency = orderDetails?.total?.total_shipping?.currency;\n  const hasToDisplayShippingMethod =\n    orderDetails && shippingMethod && shippingCurrency && shippingCost != null;\n\n  const paymentMethods = orderDetails?.payment_methods;\n  const hasPaymentMethod = paymentMethods && paymentMethods.length > 0;\n  const selectedPaymentMethod = hasPaymentMethod ? paymentMethods[0]?.name : '';\n  const hasToDisplayPaymentMethod =\n    orderDetails && hasPaymentMethod && selectedPaymentMethod !== '';\n\n  return (\n    <Card\n      variant={'secondary'}\n      className={'order-confirmation-details order-confirmation__card'}\n    >\n      <div className={'order-confirmation-details__header'}>\n        <h2 className={'order-confirmation-details__title'}>\n          <Text id={'OrderConfirmation.Details.title'} />\n        </h2>\n      </div>\n\n      <div className={'order-confirmation-details__contact'}>\n        {(!orderDetails || hasToDisplayContactDetails) && (\n          <h3>\n            <Text id={'OrderConfirmation.Details.contact'} />\n          </h3>\n        )}\n\n        {hasToDisplayContactDetails && <p>{contactDetails}</p>}\n\n        {!hasOrderDetails && (\n          <StaticSkeleton\n            rows={1}\n            data-testid=\"order-confirmation-details-contact-skeleton\"\n          />\n        )}\n      </div>\n\n      <div className={'order-confirmation-details__information'}>\n        <div className={'order-confirmation-details__shipping_address'}>\n          {(!hasOrderDetails || hasToDisplayShippingAddress) && (\n            <h3>\n              <Text id={'OrderConfirmation.Details.shippingAddress'} />\n            </h3>\n          )}\n\n          {hasToDisplayShippingAddress && (\n            <>\n              <p>\n                {shippingAddress?.firstname} {shippingAddress?.lastname}\n              </p>\n\n              {shippingAddress?.street.map((street, index) => (\n                <p key={index}>{street}</p>\n              ))}\n\n              <p>\n                {shippingAddress?.city} {shippingAddress?.region}{' '}\n                {shippingAddress?.postcode}, {shippingAddress?.country_code}\n              </p>\n            </>\n          )}\n\n          {!hasOrderDetails && (\n            <StaticSkeleton\n              rows={3}\n              data-testid=\"order-confirmation-shipping-address-skeleton\"\n            />\n          )}\n        </div>\n\n        <div className={'order-confirmation-details__billing_address'}>\n          {(!hasOrderDetails || hasToDisplayBillingAddress) && (\n            <h3>\n              <Text id={'OrderConfirmation.Details.billingAddress'} />\n            </h3>\n          )}\n\n          {hasToDisplayBillingAddress && (\n            <>\n              <p>\n                {billingAddress?.firstname} {billingAddress?.lastname}\n              </p>\n\n              {billingAddress?.street.map((street, index) => (\n                <p key={index}>{street}</p>\n              ))}\n\n              <p>\n                {billingAddress?.city} {billingAddress?.region}{' '}\n                {billingAddress?.postcode}, {billingAddress?.country_code}\n              </p>\n            </>\n          )}\n\n          {!hasOrderDetails && (\n            <StaticSkeleton\n              rows={3}\n              data-testid=\"order-confirmation-billing-address-skeleton\"\n            />\n          )}\n        </div>\n\n        <div className={'order-confirmation-details__shipping-method'}>\n          {(!hasOrderDetails || hasToDisplayShippingMethod) && (\n            <h3>\n              <Text id={'OrderConfirmation.Details.shippingMethod'} />\n            </h3>\n          )}\n\n          {hasToDisplayShippingMethod && (\n            <>\n              {shippingCost === 0 ? (\n                <p className=\"order-confirmation-order-summary__price\">\n                  <Text id=\"OrderConfirmation.Details.freeShipping\" />\n                </p>\n              ) : (\n                <p>\n                  <Price amount={shippingCost} currency={shippingCurrency} />{' '}\n                  {shippingMethod}\n                </p>\n              )}\n            </>\n          )}\n\n          {!hasOrderDetails && (\n            <StaticSkeleton\n              rows={1}\n              data-testid=\"order-confirmation-details-shipping-method-skeleton\"\n            />\n          )}\n        </div>\n\n        <div className={'order-confirmation-details__payment-method'}>\n          {(!hasOrderDetails || hasToDisplayPaymentMethod) && (\n            <h3>\n              <Text id={'OrderConfirmation.Details.paymentMethod'} />\n            </h3>\n          )}\n\n          {hasToDisplayPaymentMethod && <p>{selectedPaymentMethod}</p>}\n\n          {!hasOrderDetails && (\n            <StaticSkeleton\n              rows={1}\n              data-testid=\"order-confirmation-details-payment-method-skeleton\"\n            />\n          )}\n        </div>\n      </div>\n    </Card>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Card, Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const DetailsSkeleton: FunctionComponent = () => {\n  return (\n    <Card variant={'secondary'} className={'order-confirmation-details'}>\n      <Skeleton data-testid=\"order-confirmation-details-skeleton\">\n        <SkeletonRow variant={'heading'} size=\"medium\" fullWidth={true} />\n        <SkeletonRow size=\"medium\" />\n        <SkeletonRow variant={'empty'} size=\"medium\" />\n        <SkeletonRow size=\"xlarge\" />\n        <SkeletonRow size=\"xlarge\" />\n        <SkeletonRow size=\"xlarge\" />\n        <SkeletonRow size=\"xlarge\" />\n      </Skeleton>\n    </Card>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { Button } from '@adobe/elsie/components';\nimport { Text } from '@adobe/elsie/i18n';\nimport { FooterSkeleton } from '@/order-confirmation/components';\nimport '@/order-confirmation/components/Footer/Footer.css';\n\nexport interface FooterProps extends HTMLAttributes<HTMLDivElement> {\n  isLoading: boolean;\n  routeHome?: () => string;\n  routeSupport?: () => string;\n}\n\nexport const Footer: FunctionComponent<FooterProps> = ({\n  isLoading,\n  className,\n  routeHome,\n  routeSupport,\n  ...props\n}) => {\n  if (isLoading) {\n    return <FooterSkeleton />;\n  }\n\n  return (\n    <div\n      className={classes(['order-confirmation-footer', className])}\n      {...props}\n    >\n      {routeHome?.() && (\n        <Button\n          data-testid=\"order-confirmation-footer__continue-button\"\n          className=\"order-confirmation-footer__continue-button\"\n          size={'medium'}\n          variant={'primary'}\n          key={'continueShopping'}\n          type={'submit'}\n          href={routeHome?.()}\n        >\n          <Text id={'OrderConfirmation.Footer.continueShopping'} />\n        </Button>\n      )}\n\n      <p className=\"order-confirmation-footer__contact-support\">\n        <Text id={'OrderConfirmation.Footer.help'} />{' '}\n        {routeSupport?.() && (\n          <a\n            href={routeSupport?.()}\n            rel={'noreferrer'}\n            className=\"order-confirmation-footer__contact-support-link\"\n            data-testid=\"order-confirmation-footer__contact-support-link\"\n          >\n            <Text id={'OrderConfirmation.Footer.contactSupport'} />\n          </a>\n        )}\n      </p>\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const FooterSkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton className={'order-confirmation-footer'}>\n      <SkeletonRow size=\"small\" fullWidth={true} />\n      <SkeletonRow variant={'heading'} size=\"xsmall\" fullWidth={true} />\n    </Skeleton>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\nimport '@/order-confirmation/components/StaticSkeleton/StaticSkeleton.css';\nimport { HTMLAttributes } from 'preact/compat';\n\nexport interface StaticSkeletonProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'size'> {\n  rows: number;\n  size?: 'xsmall' | 'small' | 'medium' | 'large' | 'xlarge';\n}\nexport const StaticSkeleton: FunctionComponent<StaticSkeletonProps> = ({\n  rows,\n  size = 'xsmall',\n  ...props\n}) => {\n  return (\n    <Skeleton className={'static-skeleton'} {...props}>\n      {Array.from(Array(rows).keys()).map((i) => (\n        <SkeletonRow key={i} variant={'heading'} size={size} fullWidth={true} />\n      ))}\n    </Skeleton>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/order-confirmation/components/OrderSummary/OrderSummary.css';\nimport { Text } from '@adobe/elsie/i18n';\nimport { Card, Divider, Price } from '@adobe/elsie/components';\nimport {\n  StaticSkeleton,\n  OrderSummarySkeleton,\n} from '@/order-confirmation/components';\n\nexport type CartTaxItem = {\n  label: string;\n  amount: {\n    value?: number;\n    currency?: string;\n  };\n};\n\nexport type Summary = {\n  total: {\n    inclTax: {\n      amount: number;\n      currency: string;\n    };\n    exclTax?: {\n      amount: number;\n      currency: string;\n    };\n  };\n  subtotal: {\n    amount: number;\n    currency: string;\n    isTaxIncl: boolean;\n  };\n  shipping?: {\n    amount: number;\n    currency: string;\n  };\n  tax?: {\n    amount: number;\n    currency: string;\n    breakdown?: CartTaxItem[];\n  };\n};\n\nexport interface OrderSummaryProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'summary'> {\n  isLoading: boolean;\n  summary?: Summary;\n  variant?: 'primary' | 'secondary';\n}\n\nexport const OrderSummary: FunctionComponent<OrderSummaryProps> = ({\n  className,\n  isLoading,\n  summary,\n  variant = 'secondary',\n}) => {\n  if (isLoading) {\n    return <OrderSummarySkeleton />;\n  }\n\n  const { total, subtotal, shipping, tax } = summary ?? {};\n\n  return (\n    <Card\n      className={classes(['order-confirmation-order-summary', className])}\n      variant={variant}\n    >\n      {/* move heading to elsie? */}\n      <h2 className=\"order-confirmation-order-summary__title\">\n        <Text id=\"OrderConfirmation.OrderSummary.title\" />\n      </h2>\n\n      <Divider variant=\"primary\" />\n\n      {subtotal != undefined ? (\n        <div\n          data-testid=\"order-summary-subtotal\"\n          className=\"order-confirmation-order-summary__row\"\n        >\n          <p>\n            <Text id=\"OrderConfirmation.OrderSummary.subtotal\" />\n          </p>\n          <Price\n            amount={subtotal?.amount}\n            currency={subtotal?.currency}\n            className={classes([\n              'order-confirmation-order-summary__price',\n              className,\n            ])}\n          />\n        </div>\n      ) : (\n        <StaticSkeleton\n          rows={1}\n          data-testid=\"order-confirmation-order-summary-subtotal-skeleton\"\n        />\n      )}\n\n      {subtotal?.isTaxIncl && (\n        <div\n          data-testid=\"order-summary-subtotal-incl-tax\"\n          className=\"order-confirmation-order-summary__row order-confirmation-order-summary__row--muted\"\n        >\n          <p>\n            <Text id=\"OrderConfirmation.OrderSummary.includingTaxes\" />\n          </p>\n        </div>\n      )}\n\n      {shipping != undefined ? (\n        <div\n          data-testid=\"order-summary-shipping\"\n          className=\"order-confirmation-order-summary__row\"\n        >\n          <p>\n            <Text id=\"OrderConfirmation.OrderSummary.shipping\" />\n          </p>\n\n          {shipping.amount === 0 ? (\n            <p className=\"order-confirmation-order-summary__price\">\n              <Text id=\"OrderConfirmation.OrderSummary.freeShipping\" />\n            </p>\n          ) : (\n            <Price\n              amount={shipping.amount}\n              currency={shipping.currency}\n              className={classes([\n                'order-confirmation-order-summary__price',\n                className,\n              ])}\n            />\n          )}\n        </div>\n      ) : (\n        <StaticSkeleton\n          rows={1}\n          data-testid=\"order-confirmation-order-summary-shipping-skeleton\"\n        />\n      )}\n\n      {tax != undefined && !tax.breakdown && (\n        <div\n          data-testid=\"order-summary-tax\"\n          className=\"order-confirmation-order-summary__row\"\n        >\n          <p>\n            <Text id=\"OrderConfirmation.OrderSummary.tax\" />\n          </p>\n          <Price\n            amount={tax.amount}\n            currency={tax.currency}\n            className={classes([\n              'order-confirmation-order-summary__price',\n              className,\n            ])}\n          />\n        </div>\n      )}\n\n      {tax != undefined && tax.breakdown && (\n        <>\n          <Divider variant=\"secondary\" />\n\n          <div className=\"order-confirmation-order-summary__row order-confirmation-order-summary__row--margin-bottom\">\n            <p>\n              <Text id=\"OrderConfirmation.OrderSummary.taxBreakdown\" />\n            </p>\n          </div>\n\n          {tax.breakdown.map((tax) => (\n            <div\n              data-testid=\"order-summary-tax-breakdown\"\n              key={tax.label}\n              className=\"order-confirmation-order-summary__row order-confirmation-order-summary__row--muted\"\n            >\n              <p>{tax.label}</p>\n\n              <Price\n                amount={tax.amount.value!}\n                currency={tax.amount.currency!}\n                className={classes([\n                  'order-confirmation-order-summary__price',\n                  className,\n                ])}\n              />\n            </div>\n          ))}\n\n          <div\n            data-testid=\"order-summary-tax-breakdown-total\"\n            className=\"order-confirmation-order-summary__row order-confirmation-order-summary__row--strong order-confirmation-order-summary__row--margin-top\"\n          >\n            <p>\n              <Text id=\"OrderConfirmation.OrderSummary.taxTotal\" />\n            </p>\n\n            <Price\n              amount={tax.amount}\n              currency={tax.currency}\n              className={classes([\n                'order-confirmation-order-summary__price',\n                className,\n              ])}\n            />\n          </div>\n\n          <Divider variant=\"secondary\" />\n        </>\n      )}\n\n      {total != undefined ? (\n        <div\n          data-testid=\"order-summary-total-incl-tax\"\n          className=\"order-confirmation-order-summary__row order-confirmation-order-summary__row--emphasized\"\n        >\n          <p>\n            <Text id=\"OrderConfirmation.OrderSummary.total\" />\n          </p>\n\n          <Price\n            amount={total?.inclTax.amount}\n            currency={total?.inclTax.currency}\n            className={classes([\n              'order-confirmation-order-summary__price',\n              className,\n            ])}\n          />\n        </div>\n      ) : (\n        <StaticSkeleton\n          rows={1}\n          data-testid=\"order-confirmation-order-summary-total-skeleton\"\n        />\n      )}\n\n      {total?.exclTax != undefined && (\n        <div\n          data-testid=\"order-summary-total-excl-tax\"\n          className=\"order-confirmation-order-summary__row order-confirmation-order-summary__row--muted\"\n        >\n          <p>\n            <Text id=\"OrderConfirmation.OrderSummary.totalExclTax\" />\n          </p>\n\n          <Price\n            amount={total.exclTax.amount}\n            currency={total.exclTax.currency}\n            className={classes([\n              'order-confirmation-order-summary__price',\n              className,\n            ])}\n          />\n        </div>\n      )}\n    </Card>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const OrderSummarySkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton\n      data-testid=\"order-confirmation-order-summary-skeleton\"\n      className={'order-confirmation-order-summary'}\n    >\n      <SkeletonRow variant=\"heading\" size=\"small\" />\n      <SkeletonRow variant=\"empty\" size=\"small\" />\n      <SkeletonRow variant=\"empty\" size=\"small\" />\n      <SkeletonRow variant=\"empty\" size=\"small\" />\n      <SkeletonRow variant=\"heading\" size=\"small\" fullWidth={true} lines={3} />\n    </Skeleton>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\nimport '@/order-confirmation/components/CartSummaryItem/CartSummaryItem.css';\nimport { CartItem, Image, Price } from '@adobe/elsie/components';\nimport { transformItems } from '@/order-confirmation/data/transforms/transform-order-items';\n\nexport interface CartSummaryItemProps extends HTMLAttributes<HTMLDivElement> {\n  item: ReturnType<typeof transformItems>;\n  taxIncluded?: boolean;\n}\n\nexport const CartSummaryItem: FunctionComponent<CartSummaryItemProps> = ({\n  className,\n  item,\n  taxIncluded = false,\n}) => {\n  const translations = useText({\n    Sender: 'OrderConfirmation.CartSummary.GiftCard.sender',\n    Recipient: 'OrderConfirmation.CartSummary.GiftCard.recipient',\n  });\n\n  let price = item.regularPrice;\n  let total = item.total;\n\n  if (taxIncluded) {\n    price = item.priceInclTax;\n    total = item.totalInclTax;\n  }\n\n  const configurations = {\n    ...('configurableOptions' in item ? item.configurableOptions : {}),\n    ...('senderName' in item && item.senderName\n      ? { [translations.Sender]: item.senderName }\n      : {}),\n    ...('senderEmail' in item && item.senderEmail\n      ? { [translations.Sender]: item.senderEmail }\n      : {}),\n    ...('recipientName' in item && item.recipientName\n      ? { [translations.Recipient]: item.recipientName }\n      : {}),\n    ...('recipientEmail' in item && item.recipientEmail\n      ? { [translations.Recipient]: item.recipientEmail }\n      : {}),\n  };\n\n  return (\n    <div\n      className={classes(['order-confirmation-cart-summary-item', className])}\n    >\n      <CartItem\n        data-testid=\"cart-summary-item\"\n        key={item.uid}\n        taxIncluded={taxIncluded}\n        title={<div data-testid=\"product-name\">{item.name}</div>}\n        sku={<div>{item.sku}</div>}\n        quantity={item.quantity!}\n        image={\n          <Image\n            src={item.image.src!}\n            alt={item.image.alt!}\n            loading=\"lazy\"\n            width=\"80\"\n            height=\"80\"\n            params={{ width: 80 }}\n          />\n        }\n        configurations={configurations}\n        price={\n          <Price\n            amount={item.regularPrice.value}\n            currency={price.currency}\n            weight=\"normal\"\n          />\n        }\n        total={\n          <>\n            <Price\n              amount={item.regularPrice.value * item.quantity!}\n              currency={price.currency}\n              variant={item.discounted ? 'strikethrough' : 'default'}\n            />\n\n            {item.discounted && (\n              <Price amount={total.value} currency={total.currency!} sale />\n            )}\n          </>\n        }\n      />\n    </div>\n  );\n};\n","import { GuestOrderDataFragment } from '@/order-confirmation/__generated__/types';\n\ntype NonNullableItems = NonNullable<GuestOrderDataFragment['items']>;\ntype NonNullableItem = NonNullable<NonNullableItems[number]>;\n\nexport function transformItems(item: NonNullableItem) {\n  return {\n    uid: item.id,\n    quantity: item.quantity_ordered,\n    sku: item.product!.sku,\n    name: item.product!.name,\n    image: {\n      src: item.product!.thumbnail!.url,\n      alt: item.product!.thumbnail!.label,\n    },\n    price: {\n      value: item.product_sale_price.value,\n      currency: item.product_sale_price.currency,\n    },\n    priceInclTax: {\n      value: item.product_sale_price.value!,\n      currency: item.product_sale_price.currency!,\n    },\n    total: {\n      value: item.product_sale_price.value! * item.quantity_ordered!,\n      currency: item.product_sale_price.currency,\n    },\n    totalInclTax: {\n      value: item.product_sale_price.value! * item.quantity_ordered!,\n      currency: item.product_sale_price.currency,\n    },\n    discount: {\n      value: 0,\n      currency: item.product_sale_price.currency,\n    },\n    regularPrice: {\n      value: item.product!.price_range.maximum_price!.regular_price.value!,\n      currency:\n        item.product!.price_range.maximum_price!.regular_price.currency!,\n    },\n    discounted:\n      item.product!.price_range.maximum_price!.regular_price.value! *\n        item.quantity_ordered! !==\n      item.product_sale_price.value! * item.quantity_ordered!,\n    configurableOptions: transformConfigurableOptions(item),\n    senderName:\n      item.__typename === 'GiftCardOrderItem'\n        ? item.gift_card!.sender_name\n        : undefined,\n    senderEmail:\n      item.__typename === 'GiftCardOrderItem'\n        ? item.gift_card!.sender_email!\n        : undefined,\n    recipientEmail:\n      item.__typename === 'GiftCardOrderItem'\n        ? item.gift_card!.recipient_email!\n        : undefined,\n    recipientName:\n      item.__typename === 'GiftCardOrderItem'\n        ? item.gift_card!.recipient_name\n        : undefined,\n  };\n}\nfunction transformConfigurableOptions(item: NonNullableItem) {\n  if (!('selected_options' in item)) return;\n\n  const configurableOptions: Record<string, string> = {};\n\n  for (const option of item.selected_options!) {\n    configurableOptions[option!.label] = option!.value;\n  }\n\n  return configurableOptions;\n}\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { Text } from '@adobe/elsie/i18n';\nimport { Card, Divider } from '@adobe/elsie/components';\nimport '@/order-confirmation/components/CartSummary/CartSummary.css';\nimport { CartSummarySkeleton } from '@/order-confirmation/components/CartSummary';\nimport { CartSummaryItem } from '@/order-confirmation/components/CartSummaryItem';\nimport { transformItems } from '@/order-confirmation/data/transforms/transform-order-items';\nimport { State } from '@/order-confirmation/reducers';\n\n// TODO details type\nexport interface CartSummaryProps extends HTMLAttributes<HTMLDivElement> {\n  isLoading: boolean;\n  details: State['details'];\n}\n\nexport const CartSummary: FunctionComponent<CartSummaryProps> = ({\n  isLoading,\n  details,\n}) => {\n  if (isLoading) {\n    return <CartSummarySkeleton />;\n  }\n\n  // TODO tax included\n  const taxIncluded = false;\n  const items = details!.items!;\n\n  // const totalQuantity = details?.items?.reduce(\n  //   (total: number, item: any) => total + item.quantity_ordered,\n  //   0\n  // );\n\n  // TODO: Quantity should be based on config: https://jira.corp.adobe.com/browse/USF-1089\n  const totalQuantity = items.length;\n\n  return (\n    <div className=\"order-confirmation-cart-summary\">\n      <Card variant=\"secondary\">\n        <div className=\"order-confirmation-cart-summary__heading\">\n          <h2 className={'order-confirmation-cart-summary__title'}>\n            <Text id=\"OrderConfirmation.CartSummary.title\" /> ({totalQuantity})\n          </h2>\n        </div>\n        <Divider\n          className=\"order-confirmation-cart-summary__divider-top\"\n          variant=\"primary\"\n        />\n\n        <div className=\"order-confirmation-cart-summary__items\">\n          {items?.map((item: any) => {\n            const cartItem = transformItems(item);\n            return (\n              <CartSummaryItem\n                key={cartItem?.uid}\n                item={cartItem}\n                taxIncluded={taxIncluded}\n              />\n            );\n          })}\n        </div>\n      </Card>\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const CartItemSkeleton: FunctionComponent = () => {\n  return (\n    <div className=\"dropin-cart-item dropin-cart-item-skeleton\">\n      <Skeleton className=\"dropin-cart-item__skeleton dropin-cart-item__wrapper\">\n        <div className=\"dropin-cart-item__image\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__title\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__sku\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__price\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__quantity\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__total\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n      </Skeleton>\n    </div>\n  );\n};\n","import { CartItemSkeleton } from '@adobe/elsie/components/CartItem/CartItemSkeleton';\nimport { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const CartSummarySkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton\n      data-testid=\"cart-summary-skeleton\"\n      className=\"order-confirmation-cart-summary\"\n      style={{ gridTemplateColumns: '1fr' }}\n    >\n      <SkeletonRow variant=\"heading\" fullWidth={true} size=\"medium\" />\n      <CartItemSkeleton />\n      <CartItemSkeleton />\n      <CartItemSkeleton />\n      <CartItemSkeleton />\n      <CartItemSkeleton />\n    </Skeleton>\n  );\n};\n","import {\n  guestOrder,\n  GuestOrderInput,\n  guestOrderByToken,\n} from '@/order-confirmation/api';\nimport {\n  OrderSearchFields,\n  OrderConfirmation as Component,\n} from '@/order-confirmation/components';\nimport {\n  Actions,\n  Alert,\n  AlertCode,\n  AlertType,\n  orderConfirmationReducer,\n} from '@/order-confirmation/reducers/orderConfirmation';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Container } from '@adobe/elsie/lib';\nimport {\n  HTMLAttributes,\n  useCallback,\n  useEffect,\n  useReducer,\n} from 'preact/compat';\n\nexport interface OrderConfirmationProps extends HTMLAttributes<HTMLDivElement> {\n  token?: string;\n  routeHome?: () => string;\n  routeSupport?: () => string;\n}\n\nfunction useOrderConfirmation(token?: string) {\n  const [state, dispatch] = useReducer(orderConfirmationReducer, {\n    isLoading: false,\n    token,\n    details: null,\n  });\n\n  const translations = useText({\n    invalidOrder: 'OrderConfirmation.Errors.invalidOrder',\n    invalidSearch: 'OrderConfirmation.Errors.invalidSearch',\n    pageNotFound: 'OrderConfirmation.Errors.pageNotFound',\n    unknown: 'OrderConfirmation.Errors.unknown',\n  });\n\n  const buildAlert = useCallback(\n    (message: string): Alert | undefined => {\n      switch (message) {\n        case 'Invalid order':\n        case \"We couldn't locate an order with the information provided.\":\n          return {\n            type: AlertType.WARNING,\n            code: AlertCode.INVALID_ORDER,\n            message: translations.invalidOrder,\n          };\n        case 'Invalid search':\n          return {\n            type: AlertType.WARNING,\n            code: AlertCode.INVALID_SEARCH,\n            message: translations.invalidSearch,\n          };\n      }\n    },\n    [translations.invalidOrder, translations.invalidSearch]\n  );\n\n  const fetchOrderDetails = useCallback(\n    (fields?: OrderSearchFields) => {\n      guestOrder(fields as GuestOrderInput)\n        .then((details) => {\n          // order number is only returned if valid order inputs are provided\n          const hasOrderDetails = !!details?.number;\n\n          const alert = hasOrderDetails\n            ? undefined\n            : buildAlert('Invalid search');\n\n          dispatch({\n            type: Actions.SET_DETAILS,\n            details,\n            alert,\n          });\n        })\n        .catch(() => {\n          const alert = buildAlert('Invalid search');\n\n          dispatch({\n            type: Actions.SET_DETAILS,\n            details: null,\n            alert,\n          });\n        });\n    },\n    [buildAlert]\n  );\n\n  const fetchOrderDetailsByToken = useCallback(\n    (token: string) => {\n      guestOrderByToken(token)\n        .then((details) => {\n          // order number is only returned if valid order inputs are provided\n          const hasOrderDetails = !!details?.number;\n\n          const alert = hasOrderDetails\n            ? undefined\n            : buildAlert('Invalid order');\n\n          dispatch({\n            type: Actions.SET_DETAILS,\n            details,\n            alert,\n          });\n        })\n        .catch((error) => {\n          const knownAlert = buildAlert(error.message);\n\n          if (!knownAlert) {\n            console.error(error);\n            return;\n          }\n\n          dispatch({\n            type: Actions.ALERT,\n            alert: knownAlert,\n          });\n        });\n    },\n    [buildAlert]\n  );\n\n  const dismissAlert = () => {\n    dispatch({ type: Actions.DISMISS_ALERT });\n  };\n\n  const handleOrderSearch = function (fields: OrderSearchFields) {\n    fetchOrderDetails(fields);\n  };\n\n  useEffect(() => {\n    if (!state.token) return;\n\n    dispatch({ type: Actions.LOADING });\n\n    fetchOrderDetailsByToken(state.token);\n  }, [state.token, fetchOrderDetailsByToken]);\n\n  return {\n    state,\n    handleOrderSearch,\n    dismissAlert,\n  };\n}\n\nexport const OrderConfirmation: Container<OrderConfirmationProps> = ({\n  token,\n  routeHome,\n  routeSupport,\n}) => {\n  const { state, handleOrderSearch, dismissAlert } =\n    useOrderConfirmation(token);\n\n  return (\n    <Component\n      state={state}\n      dismissAlert={dismissAlert}\n      onOrderSearch={handleOrderSearch}\n      routeHome={routeHome}\n      routeSupport={routeSupport}\n    />\n  );\n};\n"],"names":["Actions","ADD_ORDER_REFERENCE","LOADING","SET_DETAILS","ALERT","DISMISS_ALERT","AlertType","ERROR","WARNING","SUCCESS","AlertCode","INVALID_ORDER","INVALID_SEARCH","UNKNOWN","orderConfirmationReducer","state","action","type","isLoading","details","alert","undefined","useBreakpoint","getBreakpoint","window","innerWidth","breakpoint","setBreakpoint","useState","useEffect","timeoutId","handleResize","clearTimeout","setTimeout","addEventListener","removeEventListener","ConditionalWrapper","children","className","_jsx","_Fragment","mapDetailsToSummary","orderDetails","total","grandTotal","grand_total","subtotal","shipping","total_shipping","tax","total_tax","inclTax","amount","value","currency","isTaxIncl","Aside","summary","_jsxs","OrderSummary","CartSummary","AsideElement","Main","routeHome","routeSupport","billingAddress","billing_address","customerName","firstname","orderNumber","number","orderStatus","status","Header","Details","Footer","MainElement","dismissAlert","onOrderSearch","OrderConfirmation","hasOrderDetails","isInvalidOrder","code","isInvalidSearch","classes","OrderSearchForm","heading","message","description","onDismiss","SvgClose","props","React","SvgOrderSuccess","SvgCheckWithCircle","SvgWarningFilled","HeaderSkeleton","Icon","source","OrderSuccess","size","Text","id","fields","name","order","Skeleton","SkeletonRow","variant","fullWidth","VARIANT_TO_ICON_MAP","error","WarningFilled","success","CheckWithCircle","warning","InLineAlert","additionalActions","icon","translations","dismiss","length","Button","onClick","label","Close","stroke","map","useText","email","postcode","handleSubmit","event","preventDefault","formValues","getFormValues","target","Card","onSubmit","Field","Input","autocomplete","placeholder","floatingLabel","required","DetailsSkeleton","contactDetails","hasToDisplayContactDetails","shippingAddress","shipping_address","hasToDisplayShippingAddress","hasToDisplayBillingAddress","shippingMethod","shipping_method","shippingCost","shippingCurrency","hasToDisplayShippingMethod","paymentMethods","payment_methods","hasPaymentMethod","selectedPaymentMethod","hasToDisplayPaymentMethod","StaticSkeleton","rows","lastname","street","index","city","region","country_code","Price","FooterSkeleton","href","rel","Array","from","keys","i","OrderSummarySkeleton","Divider","breakdown","exclTax","lines","CartSummaryItem","item","taxIncluded","Sender","Recipient","price","regularPrice","priceInclTax","totalInclTax","configurations","configurableOptions","senderName","senderEmail","recipientName","recipientEmail","CartItem","title","sku","quantity","image","Image","src","alt","loading","width","height","params","weight","discounted","sale","uid","transformItems","quantity_ordered","product","thumbnail","url","product_sale_price","discount","price_range","maximum_price","regular_price","transformConfigurableOptions","__typename","gift_card","sender_name","sender_email","recipient_email","recipient_name","option","selected_options","CartSummarySkeleton","items","totalQuantity","cartItem","CartItemSkeleton","style","gridTemplateColumns","useOrderConfirmation","token","dispatch","useReducer","invalidOrder","invalidSearch","pageNotFound","unknown","buildAlert","useCallback","fetchOrderDetails","then","catch","fetchOrderDetailsByToken","knownAlert","console","handleOrderSearch","Component"],"mappings":"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"}