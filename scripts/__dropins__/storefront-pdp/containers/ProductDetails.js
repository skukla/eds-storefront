import*as pe from"@dropins/tools/preact-compat.js";import{useState as K,Children as te,useRef as Se,useMemo as ve,useEffect as re,useCallback as Q}from"@dropins/tools/preact-compat.js";import{debounce as ge,classes as x,VComponent as W,toLanguageTag as Ne,Slot as U}from"@dropins/tools/lib.js";import{Button as we,Icon as be,Price as ye,Picker as Ve,ColorSwatch as He,ImageSwatch as qe,TextSwatch as ze,Incrementer as Ge,Breadcrumbs as Ue,Image as xe}from"@dropins/tools/components.js";import{jsxs as R,jsx as e,Fragment as Pe}from"@dropins/tools/preact-jsx-runtime.js";import{useText as z}from"@dropins/tools/i18n.js";import{c as Be,d as Ie}from"../chunks/getRefinedProduct.js";import{events as Te}from"@dropins/tools/event-bus.js";import{c as Ee}from"../chunks/initialize.js";import"@dropins/tools/fetch-graphql.js";const je=c=>pe.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...c},pe.createElement("path",{d:"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"square",strokeLinejoin:"round"})),Fe=c=>pe.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...c},pe.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M18.3599 5.64001L5.62988 18.37",stroke:"currentColor"}),pe.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M18.3599 18.37L5.62988 5.64001",stroke:"currentColor"})),me=({show:c=1,scrollbar:s=!1,peak:_=!1,arrows:v=!1,controls:p="dots",arrowsOnMainImage:y=!1,loop:u=!1,gap:D=null,direction:l="horizontal",width:ee="100%",height:j="100%",defaultIndex:r=0,className:V,children:H,thumbnails:Y=null,isZoomed:P,...A})=>{const h=z("PDP.Carousel.label").label,m=z("PDP.Carousel.Slide.label").label,n=z("PDP.Carousel.Previous.label").label,O=z("PDP.Carousel.Next.label").label,f=z("PDP.Carousel.Controls.label").label,t=z("PDP.Carousel.Controls.Button.label").label,[$,T]=K(()=>$e(c)),I=Math.ceil(te.toArray(H).length/$),ne={small:16,medium:24,large:64},E=_?24:0,k=D?ne[D]:0,Z=te.toArray(H).length%$,le=16,C=2,ce="32",[g,ae]=K(u?r+1:r),J=Se([]),[G,X]=K(0),[ie,se]=K(0),i=ve(()=>te.toArray(Y),[Y]),o=ve(()=>{const a=te.toArray(H).reduce((d,L,S)=>S%$===0?[...d,[L]]:[...d.slice(0,-1),[...d[d.length-1],L]],[]);return!u||a.length===1?a:u&&te.toArray(H).length%$===0?[a[I-1]].concat(a).concat([a[0],a[1]]):[te.toArray(H).slice(-$)].concat(a).concat([a[0],a[1]])},[H,$,I,u]),b=Se(null),N=Se(null),w=p==="thumbnailsRow"||p==="thumbnailsColumn";re(()=>{const a=document.body,d=ge(()=>{var B,Ae;X(((B=b.current)==null?void 0:B.offsetWidth)??0),se(((Ae=b.current)==null?void 0:Ae.offsetHeight)??0);const S=window.innerWidth,M=$e(c,S);M!==$&&T(M)},50),L=new ResizeObserver(d);return L.observe(a),()=>{L.unobserve(a)}},[$,c]);const F=Q(a=>{const d=u?a-1:a,L=J==null?void 0:J.current[0],S=(L==null?void 0:L.offsetWidth)+le,M=(L==null?void 0:L.offsetHeight)+le,B=N.current;p==="thumbnailsRow"&&(B!=null&&B.offsetWidth)&&(S*(d+1)>B.offsetWidth&&(B.style.scrollBehavior="smooth",B.scrollLeft=(d+C)*S),B.scrollLeft>S*d&&(B.style.scrollBehavior="smooth",B.scrollLeft=(d-C)*S)),p==="thumbnailsColumn"&&(B!=null&&B.offsetHeight)&&(M*(d+1)>B.offsetHeight&&(B.style.scrollBehavior="smooth",B.scrollTop=(d+C)*M),B.scrollTop>M*d&&(B.style.scrollBehavior="smooth",B.scrollTop=(d-C)*M))},[p,u]),q=Q((a,d,L)=>{(p==="thumbnailsRow"||p==="thumbnailsColumn")&&F(a);const S=b.current,M=E?S.offsetWidth-E:S.offsetWidth-E+k;if(!Array.from(S.querySelectorAll("[data-index]")).filter(_e=>{const oe=Number(_e.getAttribute("data-index"));return!isNaN(oe)&&oe>-1})[a])return;if(L){const _e=a===0?I:0,oe=M*(I+(Z||$)/$);if(S.scrollLeft>=0&&S.scrollLeft<M-5){q(1,!0);return}if(S.scrollLeft>oe-M&&S.scrollLeft<=oe){q(I,!0);return}S.style.scrollBehavior="auto",S.scrollLeft=_e===0?0:oe,q(_e===0?1:I,!0);return}const We=(S.offsetWidth-k)/$*o[a].length-E;S.style.scrollBehavior=d?"smooth":"auto",S.scrollLeft=o[a].length===$?M*a:M*(a-1)+We},[k,I,E,$,Z,o,F,p]),de=Q(()=>{if(u){const d=g-1;q(d,!0,g===1);return}const a=g<=0?0:g-1;q(a,!0)},[g,q,u]),he=Q(()=>{const a=o.length-1;if(u){const L=g+1;q(L,!0,g===I);return}const d=g>=a?a:g+1;q(d,!0)},[o.length,u,g,q,I]);re(()=>{const a=d=>{d.key==="ArrowLeft"&&(d.preventDefault(),de()),d.key==="ArrowRight"&&(d.preventDefault(),he())};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[he,de]),re(()=>{q(u?r+1:r,!1)},[r,q,u]);const fe=ge(()=>{const a=b.current,d=E?a.offsetWidth-E:a.offsetWidth-E+k,L=a.scrollLeft/d,S=Math.round(L)-L<1?Math.round(L):Math.ceil(L);if(w&&F(S),u){const M=d*(I+(Z||$)/$);if(Math.ceil(a.scrollLeft)>=Math.ceil(M)-5){a.style.scrollBehavior="auto",a.scrollLeft=a.offsetWidth*1+(Math.ceil(a.scrollLeft)-Math.ceil(M)-E);return}if(a.scrollLeft===0){a.style.scrollBehavior="auto",a.scrollLeft=M-a.offsetWidth+E;return}}g!==S&&ae(S)},100);re(()=>{const a=b.current;return a==null||a.addEventListener("scroll",fe),()=>{a==null||a.removeEventListener("scroll",fe)}},[fe]);const ue=(a,d,L)=>e(we,{className:x([["pdp-carousel__button",!a],[`pdp-carousel__button--${d}`,!a],[`pdp-carousel__button--${p}`,a]]),style:{"--height":`${ie}px`},variant:"tertiary","aria-label":d==="next"?O:n,onClick:L,disabled:u?!1:d==="next"?g>=o.length-1:g<1,children:e(be,{className:x([["pdp-carousel__button__icon",!a],[`pdp-carousel__button__icon--${d}`,!a],[`pdp-carousel__button__icon--${p}--${d}`,a]]),size:ce,source:je})}),Le=v&&o.length!=1&&ue(w,"prev",de),De=v&&o.length!=1&&ue(w,"next",he),Oe=v&&o.length!=1&&ue(!1,"prev",de),Re=v&&o.length!=1&&ue(!1,"next",he);return R("div",{role:"region","aria-roledescription":h,className:x(["pdp-carousel",["pdp-carousel--main-image-controls",y],["pdp-carousel--arrows",v&&!w],[`pdp-carousel--${p}`,w],V]),style:{"--flex-carousel":p==="thumbnailsColumn"?"row-reverse":"column","--gap":w?"0":"var(--spacing-small)","--width":ee},...A,children:[e("div",{ref:b,className:x(["pdp-carousel__wrapper",`pdp-carousel__wrapper--${l}`,["pdp-carousel__wrapper--scrollbar",s],["pdp-carousel__wrapper--peak",_]]),style:{"--total-width":p==="thumbnailsColumn"?"81.6%":"100%","--height":p==="thumbnailsColumn"?"auto":j,"--gap":D?`var(--spacing-${D})`:"0px","--per-page":$},tabIndex:0,children:o.map((a,d)=>{const L=a.length<$;return e("div",{role:"group","aria-roledescription":m,"data-index":d,className:x(["pdp-carousel__slide",`pdp-carousel__slide--${l}`,["pdp-carousel__slide--active",g===d],["pdp-carousel__slide--orphan",L]]),style:{"--length":a.length},children:a},d)})}),!w&&R(Pe,{children:[Le,De]}),w&&y&&R(Pe,{children:[Oe,Re]}),p&&o.length!=1&&R("div",{className:x([[`pdp-carousel__controls__container--${p}`,w],["pdp-carousel__controls__container--no-arrows",!v||y]]),style:{"--width":p==="thumbnailsRow"?`${G}px`:ee,"--height":`${ie}px`,"--nr-thumbnails":i.length},children:[(w||P)&&!y&&Le,e("div",{ref:N,className:x([[`pdp-carousel__controls__wrapper--${p}`,w],["pdp-carousel__controls__wrapper",w]]),children:e("div",{role:"group","aria-label":f,className:x(["pdp-carousel__controls",[`pdp-carousel__controls--${p}`,w]]),children:(u?o.slice(0,I):o).map((a,d)=>{const L=u?I:o.length,S=u?g-1===d:g===d;return w?R("label",{className:x(["pdp-carousel__thumbnail__container"]),ref:M=>{M&&(J.current[d]=M)},children:[e("input",{type:"radio",name:"carousel-thumbnails","aria-label":t.replace("{key}",String(d+1)).replace("{total}",String(L)),checked:S&&G!==0,onChange:()=>{q(u?d+1:d,!0)},...A,className:x(["pdp-carousel__thumbnail",["pdp-carousel__thumbnail--selected",S&&G!==0]])}),e("span",{className:x(["pdp-carousel__thumbnail__span"]),children:i[d]})]},d):e("button",{"aria-label":t.replace("{key}",String(d+1)).replace("{total}",String(L)),onClick:()=>{q(u?d+1:d,!0)},className:x(["pdp-carousel__controls__button",["pdp-carousel__controls__button--active",S]])},d)})})}),(w||P)&&!y&&De]})]})};function $e(c,s=0){if(typeof c=="number")return c;const{small:_,medium:v,large:p}=c,y=786;return s>1024?p:s>y?v:_}const Ke=({title:c,breadcrumbs:s,galleryContent:_,infoContent:v,productContent:p,sku:y,outOfStock:u,hideSku:D,shortDescription:l,description:ee,attributes:j,images:r,options:V,price:H,specialPrice:Y,className:P,children:A,quantity:h,actions:m,carouselConfig:n,...O})=>{var Z,le,C,ce,g,ae;const f=z("PDP.Product.RegularPrice.label").label,t=z("PDP.Product.SpecialPrice.label").label,$=z("PDP.Product.OutOfStock.label").label,T=z("PDP.Product.Image.label").label,[I,ne]=K(null),E=r!=null&&r.length?r.map((J,G)=>{var X;return e(W,{node:J,loading:G===0?"eager":"lazy",alt:((X=c==null?void 0:c.props)==null?void 0:X.children)&&(T==null?void 0:T.replace("{product}",c.props.children.toString()).replace("{key}",String(G+1)).replace("{total}",String(r.length))),onClick:()=>ne(G)},G)}):e("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product__images__placeholder","aria-hidden":!0}),k=(Z=n==null?void 0:n.thumbnails)!=null&&Z.length?n.thumbnails.map((J,G)=>{var X;return e(W,{node:J,loading:(n==null?void 0:n.thumbnailsLoadingMode)||"lazy",alt:((X=c==null?void 0:c.props)==null?void 0:X.children)&&(T==null?void 0:T.replace("{product}",c.props.children.toString()).replace("{key}",String(G+1)).replace("{total}",String(r.length)))},G)}):e("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product__images__placeholder","aria-hidden":!0});return R("div",{...O,className:x(["pdp-product",P]),children:[s&&e(W,{node:s,className:"pdp-product__breadcrumbs"}),R("div",{className:"pdp-product__column-container pdp-product__gallery-column",children:[e("div",{className:"pdp-product__column-body",children:n!=null&&n.controls?e(me,{className:"pdp-product__overlay__carousel",arrows:(r==null?void 0:r.length)>1,controls:(r==null?void 0:r.length)>1?n.controls:"dots",arrowsOnMainImage:n==null?void 0:n.arrowsOnMainImage,loop:(n==null?void 0:n.loopable)&&(r==null?void 0:r.length)>1,peak:((le=n==null?void 0:n.thumbnails)==null?void 0:le.length)>1&&((C=n==null?void 0:n.peak)==null?void 0:C.desktop)||!1,gap:(n==null?void 0:n.gap)||null,width:"100%",height:"100%",defaultIndex:I||0,thumbnails:k,children:E}):e(Qe,{className:"pdp-product__images",gap:"small",children:E})}),_&&e(W,{node:_,className:"pdp-product__gallery-content"})]}),R("div",{className:"pdp-product__column-container pdp-product__content-column",children:[R("div",{className:"pdp-product__column-body",children:[R("div",{className:"pdp-product__header",children:[c&&e(W,{node:c,className:"pdp-product__title"}),!D&&y&&e(W,{node:y,className:"pdp-product__sku"})]}),R("div",{className:"pdp-product__prices",children:[Y&&e(W,{node:Y,className:x(["pdp-product__price-special","pdp-product__price"]),"aria-label":t,role:"text"}),H&&e(W,{node:H,className:x(["pdp-product__price-regular","pdp-product__price--grey"]),"aria-label":f,role:"text"})]}),n!=null&&n.mobile?e(me,{className:"pdp-product__images pdp-product__images--carousel pdp-product__images--carousel--thumbnails",width:"100%",height:"auto",arrows:(r==null?void 0:r.length)>1,controls:(r==null?void 0:r.length)>1?"thumbnailsRow":null,loop:(n==null?void 0:n.loopable)&&(r==null?void 0:r.length)>1,peak:((ce=n==null?void 0:n.thumbnails)==null?void 0:ce.length)>1&&((g=n==null?void 0:n.peak)==null?void 0:g.mobile)||!1,gap:(n==null?void 0:n.gap)||null,thumbnails:k,children:E}):e(me,{className:"pdp-product__images pdp-product__images--carousel",peak:((ae=n==null?void 0:n.peak)==null?void 0:ae.mobile)&&(r==null?void 0:r.length)>1,gap:(n==null?void 0:n.gap)||null,width:"100%",height:"auto",arrows:(r==null?void 0:r.length)>1,controls:(r==null?void 0:r.length)>1?"dots":null,loop:(n==null?void 0:n.loopable)&&(r==null?void 0:r.length)>1,children:E}),R("div",{className:x(["pdp-product__actions",["pdp-product__actions--out-of-stock",u]]),children:[u&&e("div",{className:"pdp-product__out-of-stock__text",children:$}),V&&e(W,{node:V,className:x(["pdp-product__options"])}),h&&e("div",{className:"pdp-product__quantity",children:e(W,{node:h})}),m&&e(W,{node:m,className:x(["pdp-product__buttons"])})]}),l&&e(W,{node:l,className:x(["pdp-product__short_description"])}),ee&&e(W,{node:ee,className:x(["pdp-product__description"])}),j?e("div",{className:"pdp-product__attributes",children:j}):null]}),v&&e(W,{node:v,className:"pdp-product__info-content"})]}),p&&e(W,{node:p,className:"pdp-product__content"}),I===null?null:e(Ze,{className:"pdp-product__overlay",onClose:()=>ne(null),centered:!0,children:e(me,{className:"pdp-product__overlay__carousel",arrows:(r==null?void 0:r.length)>1,width:"100%",height:"100%",defaultIndex:I||0,loop:(r==null?void 0:r.length)>1,controls:(r==null?void 0:r.length)>1?"dots":null,isZoomed:!0,children:E})})]})},Qe=({children:c,gap:s=null,className:_,style:v,...p})=>{const y=te.count(c);return e("div",{...p,className:x(["pdp-gallery-grid",_]),style:{"--gap":s?`var(--spacing-${s})`:"0px",...v},children:te.map(c,(u,D)=>e("div",{className:"pdp-gallery-grid__item",children:e(W,{node:u,loading:D===0?"eager":"lazy"},u.props.src)},y+D))})},ke=({amount:c,currency:s,locale:_,variant:v,sale:p,minimumAmount:y,maximumAmount:u,className:D,...l})=>e(Pe,{children:c||y===u?e("div",{className:"pdp-price-range",...l,children:e(ye,{amount:c||y,currency:s,locale:_,variant:v,sale:p,className:D})}):R("div",{className:"pdp-price-range",...l,children:[e(ye,{amount:y,currency:s,locale:_,className:D}),e("span",{className:"pdp-price-range__label",children:"-"}),e(ye,{amount:u,currency:s,locale:_,className:D})]})}),Ze=({centered:c,onClose:s,className:_,children:v,...p})=>{const y=z("PDP.Overlay.Close.label").label,u=Q(()=>{s==null||s()},[s]);return re(()=>{const D=l=>{l.key==="Escape"&&u()};return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[u]),re(()=>{const D=document.scrollingElement,l=D.style.overflow;return D.style.overflow="hidden",()=>{D.style.overflow=l}},[]),R("div",{...p,className:x(["pdp-overlay",["pdp-overlay--centered",c],_]),children:[e("div",{className:"pdp-overlay__content",children:v}),e(we,{"aria-label":y,variant:"tertiary",className:"pdp-overlay__close-button",onClick:u,icon:e(Fe,{})})]})},Je=["text","image","color","dropdown"],Xe=c=>c.map(s=>({...s,text:s.label,disabled:!s.inStock})),Ye=({options:c,hideSelectedValue:s,onValues:_,onErrors:v,defaultOptions:p,selectionsToUpdate:y,className:u,children:D,...l})=>{const ee=z("PDP.Swatches.Required.label").label,[j,r]=K(()=>c==null?void 0:c.reduce((A,h)=>{const{items:m}=h,n=m==null?void 0:m.find(f=>p==null?void 0:p.includes(f.id)),O=m==null?void 0:m.find(f=>f.selected);return n?{...A,[h.id]:{label:n.label,value:n.id}}:O?{...A,[h.id]:{label:O.label,value:O.id}}:A},{}));re(()=>{y==null||y.forEach(P=>{r(A=>{var n;const h=(n=P==null?void 0:P.items)==null?void 0:n.find(O=>O.selected);return h?{...A,[P.id]:{label:h==null?void 0:h.label,value:h==null?void 0:h.id}}:A})})},[y,r]),ve(()=>{const P=c==null?void 0:c.reduce((A,h)=>{var m;return(m=h==null?void 0:h.items)==null||m.forEach(n=>{var f;const O=((f=j[h.id])==null?void 0:f.value)===n.id;h.required&&!O&&(A[h.id]=ee)}),A},{});return v==null||v(P),P},[j]);const V=Q((P,A,h)=>{r(m=>{const n={...m,[P]:{label:A,value:h}};return _==null||_(n,h),n})},[_]),H=(P,A)=>{var m;const h=((m=A.selectedOptions[0])==null?void 0:m.label)??"";V(P,h,A.value)},Y=Q(({items:P,id:A,required:h,type:m,selected:n,label:O})=>e("div",{className:x(["pdp-swatches__options"]),children:(m==null?void 0:m.toLowerCase())==="dropdown"?e(Ve,{"aria-label":O,handleSelect:f=>H(A,f.target),options:Xe(P),value:n}):P==null?void 0:P.map(f=>{const t={key:f.id,id:f.id,name:A,value:f.value,label:f.label,groupAriaLabel:O,selected:n===f.id,outOfStock:!f.inStock,required:h===null?!0:h,onValue:()=>{V(A,f.label,f.id)}};switch(m){case"text":return e(ze,{...t,label:f.label});case"image":return e(qe,{...t,src:f.value,alt:f.label});case"color":return e(He,{...t,size:"large",color:f.value});default:return console.warn(`Invalid swatch type ${m}`),null}})}),[V]);return e("div",{...l,className:x(["pdp-swatches",u]),children:c==null?void 0:c.map(({type:P,label:A,id:h,multiple:m,required:n,items:O})=>{var f;if(!P){console.warn("Bundle product not supported on UI.");return}return Je.includes(P)||console.warn(`Invalid swatch type ${P}`),m&&console.warn("Multiple selection swatches are not currently supported."),R("div",{id:`swatch-item-${h}`,"data-slot-key":`product-swatch--${h}`,className:"pdp-swatches__field",children:[e("div",{className:"pdp-swatches__field__label",children:j[h]?s?`${A}`:`${A}: ${j[h].label}`:A}),e(Y,{id:h,type:P,required:n,items:O,label:A,selected:(f=j[h])==null?void 0:f.value})]},`swatch-item-${h}`)})})};function Ce(c,s="en_US"){if(!Me(c))throw Error("Invalid date string");return c.split(" ")[1]||(c=`${c} 00:00:00`),new Date(c).toLocaleDateString(Ne(s)).toString()}function Me(c){if(![/^\d{4}-\d{2}-\d{2}$/,/^\d{1,2}\/\d{1,2}\/\d{4}$/,/^\d{2}\/\d{2}\/\d{4}$/,/^\d{4}\/\d{2}\/\d{2}$/,/^\d{1,2}\.\d{1,2}\.\d{4}$/,/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/].some(v=>v.test(c)))return!1;const _=new Date(c);return!isNaN(_.getTime())}function et(c){const s=new URLSearchParams(window.location.search);Object.entries(c).forEach(([v,p])=>{p===null?s.delete(v):s.set(v,String(p))});let _=window.location.pathname;_+=`?${s.toString()}`,_+=window.location.hash,window.history.replaceState({},"",_)}function tt(){const c=new URLSearchParams(window.location.search),s={};return c.forEach((_,v)=>{s[v]=_}),s}const rt=({sku:c,hideSku:s,hideQuantity:_,hideShortDescription:v,hideDescription:p,hideAttributes:y,hideURLParams:u,hideSelectedOptionValue:D,slots:l,children:ee,initialData:j,carousel:r,optionsConfig:V,onAddToCart:H,...Y})=>{var G,X,ie,se;const P=z("PDP.Product.AddToCart.label").label,A=z("PDP.Product.Incrementer.label").label,h=z("PDP.Product.Details.label").label,[m,n]=K(Ee.getConfig().defaultLocale||"en-US"),[O,f]=K(),[t=null,$]=K(j),[T,I]=K(()=>{const i={sku:c,quantity:1};return t!=null&&t.optionUIDs&&(i.optionsUIDs=t.optionUIDs),i}),[ne,E]=K(()=>{var i,o;return!(t!=null&&t.options&&((i=t==null?void 0:t.options)==null?void 0:i.length)>0&&((o=t==null?void 0:t.optionUIDs)==null?void 0:o.length)!==(t==null?void 0:t.options.length))}),k={data:t,values:T,valid:ne};re(()=>{const i=Te.on("locale",o=>{o!==m&&(n(o),Be(c).then($))});return()=>{i==null||i.off()}},[m,c]);const Z=Q(i=>{I(o=>({...o,...i}))},[]),le=Q(i=>{var b;let o=Object.keys(i).map(N=>i[N].value).filter(N=>N!==void 0);u||et({optionsUIDs:o.join(",")}),I(N=>({...N,optionsUIDs:o})),E((o==null?void 0:o.length)===((b=t==null?void 0:t.options)==null?void 0:b.length)),Ie(c,o,V==null?void 0:V.anchorOptions).then(N=>{var w;$(N),(w=V==null?void 0:V.anchorOptions)!=null&&w.length&&C(N,o)})},[c]),C=Q((i,o)=>{var w;const b=(i==null?void 0:i.optionUIDs)??[];o.every(F=>b.includes(F))||(f(i==null?void 0:i.options),I(F=>({...F,optionsUIDs:b})),E((b==null?void 0:b.length)===((w=i==null?void 0:i.options)==null?void 0:w.length)))},[c]),ce=Q(i=>{Object.keys(i).length!==0&&E(!1)},[]),g=ve(()=>{var i;return(i=t==null?void 0:t.attributes)==null?void 0:i.map(({label:o,value:b},N)=>{const w=Me(b)?Ce(b,m):b.toString();return R("li",{children:[o,": ",e("span",{dangerouslySetInnerHTML:{__html:w}})]},N)})},[t==null?void 0:t.attributes,m]),ae=!_&&(t!=null&&t.inStock)?e(U,{name:"Quantity",slot:l==null?void 0:l.Quantity,context:{...k},children:e(Ge,{name:"quantity",defaultValue:T.quantity.toString(),min:1,"aria-label":A,className:"pdp-product__quantity",onValue:i=>{Z({quantity:Number(i)})}},"quantity")}):void 0,J=()=>{if(t!=null&&t.options)return e(U,{name:"Options",slot:l==null?void 0:l.Options,context:{...k},children:e(Ye,{options:t.options,defaultOptions:T.optionsUIDs,selectionsToUpdate:O,hideSelectedValue:D,onValues:le,onErrors:ce})})};return e("div",{...Y,children:e(Ke,{title:e(U,{name:"Title",slot:l==null?void 0:l.Title,context:{...k},children:t==null?void 0:t.name}),sku:s?void 0:e(U,{name:"SKU",slot:l==null?void 0:l.SKU,context:{...k},children:t==null?void 0:t.sku}),options:J(),breadcrumbs:(l==null?void 0:l.Breadcrumbs)&&e(U,{name:"Breadcrumbs",slot:l==null?void 0:l.Breadcrumbs,context:{...k,setSeparator(i){this._registerMethod((...o)=>{const b=i(...o),N=b&&e(be,{source:b});this._setProps(w=>({...w,separator:N}))})},appendLink(i){this._registerMethod((...o)=>{const{text:b,...N}=i(...o),w=e("a",{...N,children:b});this._setProps(F=>({...F,categories:[...F.categories||[],w]}))})},appendHTMLElement(i){this._registerMethod((...o)=>{const b=i(...o),N=this._htmlElementToVNode(b);this._setProps(w=>({...w,categories:[...w.categories||[],N]}))})}},render:({separator:i,categories:o})=>e(Ue,{separator:i,categories:o})}),quantity:ae,actions:e(U,{name:"Actions",slot:l==null?void 0:l.Actions,context:{...k,appendButton(i){this._registerMethod((...o)=>{const b=i(...o);if(!b)return;const{text:N,icon:w,...F}=b,q=e(we,{type:"button",...F,icon:w&&e(be,{source:w}),children:N});this._setProps(de=>({children:[...de.children||[],q]}))})}},children:!(l!=null&&l.Actions)&&e(we,{size:"medium",type:"submit",icon:e(be,{source:"Cart"}),disabled:!(t!=null&&t.inStock)||!ne,"aria-label":P,onClick:()=>H==null?void 0:H(T),children:P})}),shortDescription:v?void 0:e(U,{name:"ShortDescription",slot:l==null?void 0:l.ShortDescription,context:{...k},children:e("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.shortDescription)??""}})}),description:p?void 0:e(U,{name:"Description",slot:l==null?void 0:l.Description,context:{...k},children:e("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})}),images:((G=t==null?void 0:t.images)==null?void 0:G.map(({label:i,url:o})=>{var b,N;return e(xe,{title:i,alt:i,src:o,width:((b=r==null?void 0:r.imageParams)==null?void 0:b.width)??960,height:((N=r==null?void 0:r.imageParams)==null?void 0:N.height)??1191,params:(r==null?void 0:r.imageParams)??{width:960}},o)}))??[],specialPrice:(X=t==null?void 0:t.prices)!=null&&X.visible?e(U,{name:"SpecialPrice",slot:l==null?void 0:l.SpecialPrice,context:{...k},children:e(ke,{...t.prices.final,locale:Ne(m)})}):void 0,price:(ie=t==null?void 0:t.prices)!=null&&ie.visible&&t.prices.regular&&t.prices.final.amount!==(t==null?void 0:t.prices.regular.amount)?e(U,{name:"RegularPrice",slot:l==null?void 0:l.RegularPrice,context:{...k},children:e(ke,{...t.prices.regular,locale:Ne(m)})}):void 0,carouselConfig:{...r,thumbnails:r?((se=t==null?void 0:t.images)==null?void 0:se.map(({label:i,url:o})=>{var b,N;return e(xe,{title:i,alt:i,src:o,width:((b=r==null?void 0:r.thumbnailParams)==null?void 0:b.width)??200,height:((N=r==null?void 0:r.thumbnailParams)==null?void 0:N.height)??248,params:(r==null?void 0:r.thumbnailParams)??{width:200}},o)}))??[]:[]},outOfStock:!(t!=null&&t.inStock),attributes:y?void 0:e(U,{name:"Attributes",slot:l==null?void 0:l.Attributes,context:{...k},children:g!=null&&g.length?R(Pe,{children:[h,e("ul",{children:g})]}):null}),galleryContent:(l==null?void 0:l.GalleryContent)&&e(U,{name:"GalleryContent",slot:l.GalleryContent,context:{...k}}),infoContent:(l==null?void 0:l.InfoContent)&&e(U,{name:"InfoContent",slot:l.InfoContent,context:{...k}}),productContent:(l==null?void 0:l.Content)&&e(U,{name:"Content",slot:l.Content,context:{...k}})})})};rt.getInitialData=async function({sku:c,optionsConfig:s}){var v,p,y,u,D,l;const _=((v=tt().optionsUIDs)==null?void 0:v.split(","))||((l=(D=(u=(y=(p=Ee)==null?void 0:p.getConfig())==null?void 0:y.models)==null?void 0:u.ProductDetails)==null?void 0:D.initialData)==null?void 0:l.optionsUIDs);return _!=null&&_.length?await Ie(c,_,s==null?void 0:s.anchorOptions):await Be(c)};export{rt as ProductDetails,rt as default};
//# sourceMappingURL=ProductDetails.js.map
