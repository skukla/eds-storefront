{"version":3,"file":"ProductDetails.js","sources":["../../../ElsieSDK/packages/elsie/src/lib/debounce.ts","../../../ElsieSDK/packages/elsie/src/lib/i18n.ts","../../../ElsieSDK/packages/elsie/src/icons/ChevronDown.svg","../../../ElsieSDK/packages/elsie/src/icons/Close.svg","../../src/components/Carousel/Carousel.tsx","../../src/components/Product/Product.tsx","../../src/components/GalleryGrid/GalleryGrid.tsx","../../src/components/PriceRange/PriceRange.tsx","../../src/components/Overlay/Overlay.tsx","../../src/components/Swatches/Swatches.tsx","../../src/lib/date.ts","../../src/lib/url-params.ts","../../src/containers/ProductDetails/ProductDetails.tsx"],"sourcesContent":["export const debounce = (fn: Function, ms: number) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return function (this: any, ...args: any[]) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn.apply(this, args), ms);\n  };\n};\n","/**\n * Convert locale from Magento standard to react-intl BCP 47 language tag\n *\n * @param {string} locale - A locale (e.g. `fr_FR`).\n * @returns {string} A BCP 47 language tag (e.g. `fr-FR`).\n */\nexport const toLanguageTag = (locale: string) => {\n  return locale.replace('_', '-');\n};\n","import * as React from \"react\";\nconst SvgChevronDown = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701\", stroke: \"currentColor\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\" }));\nexport default SvgChevronDown;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import { FunctionComponent, VNode } from 'preact';\nimport {\n  HTMLAttributes,\n  Children,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n} from 'preact/compat';\nimport { classes, debounce } from '@adobe/elsie/lib';\nimport { Button, Icon } from '@adobe/elsie/components';\nimport { ChevronDown } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nimport '@/pdp/components/Carousel/Carousel.css';\n\ntype Show = number;\n\nexport interface CarouselProps extends Omit<HTMLAttributes<HTMLDivElement>, 'controls'> {\n  children: VNode[] | VNode;\n  thumbnails?: VNode[] | VNode;\n  show?: Show | { small: Show; medium: Show; large: Show };\n  gap?: 'small' | 'medium' | 'large' | null;\n  scrollbar?: boolean;\n  peak?: boolean;\n  arrows?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loop?: boolean;\n  direction?: 'horizontal';\n  style?: Record<string, string | number>;\n  width?: string;\n  height?: string;\n  defaultIndex?: number;\n  infinite?: boolean;\n  isZoomed?: boolean;\n}\n\nexport const Carousel: FunctionComponent<CarouselProps> = ({\n  show = 1,\n  scrollbar = false,\n  peak = false,\n  arrows = false,\n  controls = 'dots',\n  arrowsOnMainImage = false,\n  loop = false,\n  gap = null,\n  direction = 'horizontal',\n  width = '100%',\n  height = '100%',\n  defaultIndex = 0,\n  className,\n  children,\n  thumbnails = null,\n  isZoomed,\n  ...props\n}) => {\n  // i18n\n  const Label = useText('PDP.Carousel.label').label;\n  const SlideLabel = useText('PDP.Carousel.Slide.label').label;\n  const PreviousLabel = useText('PDP.Carousel.Previous.label').label;\n  const NextLabel = useText('PDP.Carousel.Next.label').label;\n  const ControlsLabel = useText('PDP.Carousel.Controls.label').label;\n  const ControlsBtnLabel = useText('PDP.Carousel.Controls.Button.label').label;\n\n  // States\n  const [perPage, setPerPage] = useState(() => getPerPageFromBreakpoint(show));\n\n  // Constants\n  const length = Math.ceil(Children.toArray(children).length / perPage);\n  const gapSizes = { small: 16, medium: 24, large: 64 };\n  const peakWidth = peak ? 24 : 0;\n  const gapWidth = gap ? gapSizes[gap] : 0;\n  const rest = Children.toArray(children).length % perPage;\n  const thumbGap = 16;\n  const thumbSeen = 2;\n  const iconSize = '32';\n\n  // States\n  const [current, setCurrent] = useState(\n    loop ? defaultIndex + 1 : defaultIndex\n  );\n\n  // Thumbnails\n  const thumbnailsRefs = useRef<HTMLLabelElement[]>([]);\n  const [thumbWidth, setThumbWidth] = useState(0);\n  const [thumbHeight, setThumbHeight] = useState(0);\n  \n  const thumbnailSlides = useMemo<VNode[]>(() => {\n    return Children.toArray(thumbnails);\n  }, [thumbnails]);\n\n  // Slides\n  const slides = useMemo<VNode[][]>(() => {\n    const returnValue = Children.toArray(children).reduce((acc, child, i) => {\n      if (i % perPage === 0) {\n        return [...acc, [child]];\n      }\n\n      return [...acc.slice(0, -1), [...acc[acc.length - 1], child]];\n    }, [] as VNode[][]);\n\n    if (!loop || returnValue.length === 1) {\n      return returnValue;\n    }\n\n    if (loop && !(Children.toArray(children).length % perPage !== 0)) {\n      return [returnValue[length - 1]]\n        .concat(returnValue)\n        .concat([returnValue[0], returnValue[1]]);\n    }\n\n    return [Children.toArray(children).slice(-perPage)]\n      .concat(returnValue)\n      .concat([returnValue[0], returnValue[1]]);\n  }, [children, perPage, length, loop]);\n\n  // Wrapper\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailsWrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailControls = controls === 'thumbnailsRow' || controls === 'thumbnailsColumn';\n\n  // Observe Window Resize (responsive)\n  useEffect(() => {\n    const wrapper = document.body;\n\n    const handleResize = debounce(() => {\n      setThumbWidth(wrapperRef.current?.offsetWidth ?? 0)\n      setThumbHeight(wrapperRef.current?.offsetHeight ?? 0)\n      const width = window.innerWidth;\n      const newPerPage = getPerPageFromBreakpoint(show, width);\n\n      if (newPerPage !== perPage) {\n        setPerPage(newPerPage);\n      }\n    }, 50);\n\n    const observer = new ResizeObserver(handleResize);\n    observer.observe(wrapper);\n\n    return () => {\n      observer.unobserve(wrapper);\n    };\n  }, [perPage, show]);\n\n  // Scrolling logic controls\n  const handleThumbnailsScroll = useCallback((nextSlideIndex: number) => {\n    const nextItem = loop ? nextSlideIndex - 1 : nextSlideIndex;\n    const thumbnailRef = thumbnailsRefs?.current[0];\n    const oneItemWidth = thumbnailRef?.offsetWidth + thumbGap;\n    const oneItemHeight = thumbnailRef?.offsetHeight + thumbGap;\n    const thumbnailsWrapper = thumbnailsWrapperRef.current!;\n\n    if (controls === 'thumbnailsRow' && thumbnailsWrapper?.offsetWidth) {\n      if (oneItemWidth * (nextItem + 1) > thumbnailsWrapper.offsetWidth) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollLeft = (nextItem + thumbSeen) * oneItemWidth;\n      }\n\n      if (thumbnailsWrapper.scrollLeft > oneItemWidth * nextItem) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollLeft = (nextItem - thumbSeen) * oneItemWidth;\n      }\n    }\n\n    if (controls === 'thumbnailsColumn' && thumbnailsWrapper?.offsetHeight) {\n      if (oneItemHeight * (nextItem + 1) > thumbnailsWrapper.offsetHeight) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollTop = (nextItem + thumbSeen) * oneItemHeight;\n      }\n\n      if (thumbnailsWrapper.scrollTop > oneItemHeight * nextItem) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollTop = (nextItem - thumbSeen) * oneItemHeight;\n      }\n    }\n  }, [controls, loop]);\n\n  // Navigation\n  const handleScrollTo = useCallback(\n    (nextSlideIndex: number, smooth?: boolean, reset?: boolean) => {\n      if (controls === 'thumbnailsRow' || controls === 'thumbnailsColumn') {\n        handleThumbnailsScroll(nextSlideIndex);\n      }\n\n      const wrapper = wrapperRef.current!;\n      const realWidth = peakWidth\n        ? wrapper.offsetWidth - peakWidth\n        : wrapper.offsetWidth - peakWidth + gapWidth;\n\n      const items = Array.from(wrapper.querySelectorAll('[data-index]')).filter(\n        (element) => {\n          const dataIndex = Number(element.getAttribute('data-index')!);\n          return !isNaN(dataIndex) && dataIndex > -1;\n        }\n      );\n\n      const item = items[nextSlideIndex];\n\n      if (!item) {\n        return;\n      }\n\n      if (reset) {\n        const futureIndex = nextSlideIndex === 0 ? length : 0;\n        const scrollWidth =\n          realWidth * (length + (rest ? rest : perPage) / perPage);\n\n        if (wrapper.scrollLeft >= 0 && wrapper.scrollLeft < realWidth - 5) {\n          handleScrollTo(1, true);\n          return;\n        }\n\n        if (\n          wrapper.scrollLeft > scrollWidth - realWidth &&\n          wrapper.scrollLeft <= scrollWidth\n        ) {\n          handleScrollTo(length, true);\n          return;\n        }\n\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = futureIndex === 0 ? 0 : scrollWidth;\n        handleScrollTo(futureIndex === 0 ? 1 : length, true);\n        return;\n      }\n\n      const diff =\n        ((wrapper.offsetWidth - gapWidth) / perPage) *\n        slides[nextSlideIndex].length -\n        peakWidth;\n\n      wrapper.style.scrollBehavior = smooth ? 'smooth' : 'auto';\n      wrapper.scrollLeft =\n        slides[nextSlideIndex].length === perPage\n          ? realWidth * nextSlideIndex\n          : realWidth * (nextSlideIndex - 1) + diff;\n      return;\n    },\n    [gapWidth, length, peakWidth, perPage, rest, slides, handleThumbnailsScroll, controls]\n  );\n\n  const handleGoToPrev = useCallback(() => {\n    if (loop) {\n      const nextSlideIndex = current - 1;\n      handleScrollTo(nextSlideIndex, true, current === 1);\n      return;\n    }\n\n    const nextSlideIndex = current <= 0 ? 0 : current - 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [current, handleScrollTo, loop]);\n\n  const handleGoToNext = useCallback(() => {\n    const lastSlideIndex = slides.length - 1;\n\n    if (loop) {\n      const nextSlideIndex = current + 1;\n      handleScrollTo(nextSlideIndex, true, current === length);\n      return;\n    }\n\n    const nextSlideIndex =\n      current >= lastSlideIndex ? lastSlideIndex : current + 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [slides.length, loop, current, handleScrollTo, length]);\n\n  // Navigate with keyboard\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'ArrowLeft') {\n        event.preventDefault();\n        handleGoToPrev();\n      }\n\n      if (event.key === 'ArrowRight') {\n        event.preventDefault();\n        handleGoToNext();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleGoToNext, handleGoToPrev]);\n\n  // Set default index\n  useEffect(() => {\n    handleScrollTo(loop ? defaultIndex + 1 : defaultIndex, false);\n  }, [defaultIndex, handleScrollTo, loop]);\n\n  // Track scrolling (swipes)\n  const handleOnScroll = debounce(() => {\n    const wrapper = wrapperRef.current!;\n    const realWidth = peakWidth\n      ? wrapper.offsetWidth - peakWidth\n      : wrapper.offsetWidth - peakWidth + gapWidth;\n    const dividing = wrapper.scrollLeft / realWidth;\n    const nextSlideIndex = Math.round(dividing) - dividing < 1 ? Math.round(dividing) : Math.ceil(dividing);\n\n    if (thumbnailControls) {\n      handleThumbnailsScroll(nextSlideIndex);\n    }\n\n    if (loop) {\n      const totalWidth =\n        realWidth * (length + (rest ? rest : perPage) / perPage);\n\n      if (Math.ceil(wrapper.scrollLeft) >= Math.ceil(totalWidth) - 5) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft =\n          wrapper.offsetWidth * 1 +\n          (Math.ceil(wrapper.scrollLeft) - Math.ceil(totalWidth) - peakWidth);\n        return;\n      }\n\n      if (wrapper.scrollLeft === 0) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = totalWidth - wrapper.offsetWidth + peakWidth;\n        return;\n      }\n    }\n\n    if (current !== nextSlideIndex) {\n      setCurrent(nextSlideIndex);\n    }\n  }, 100);\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    wrapper?.addEventListener('scroll', handleOnScroll);\n\n    return () => {\n      wrapper?.removeEventListener('scroll', handleOnScroll);\n    };\n  }, [handleOnScroll]);\n\n  // thumbnails is column -> container is row reverse, controls is column\n  // thumbnails is row -> container is column, controls is row\n  const getArrow = (forThumbnails: boolean, direction: string, callback: () => void) => {\n    return <Button\n      className={classes([\n        ['pdp-carousel__button', !forThumbnails],\n        [`pdp-carousel__button--${direction}`, !forThumbnails],\n        [`pdp-carousel__button--${controls}`, forThumbnails]\n      ])}\n      style={{\n        '--height': `${thumbHeight}px`,\n      }}\n      variant=\"tertiary\"\n      aria-label={direction === 'next' ? NextLabel : PreviousLabel}\n      onClick={callback}\n      disabled={loop ? false : direction === 'next' ?  current >= slides.length - 1 : current < 1}\n    >\n      <Icon\n        className={classes([\n          ['pdp-carousel__button__icon', !forThumbnails],\n          [`pdp-carousel__button__icon--${direction}`, !forThumbnails],\n          [`pdp-carousel__button__icon--${controls}--${direction}`, forThumbnails]\n        ])}\n        size={iconSize}\n        source={ChevronDown}\n      />\n    </Button>\n  }\n\n  const prevArrow = arrows && slides.length != 1 && getArrow(thumbnailControls, 'prev', handleGoToPrev);\n\n  const nextArrow = arrows && slides.length != 1 && getArrow(thumbnailControls, 'next', handleGoToNext);\n\n  const prevArrowMainImage = arrows && slides.length != 1 && getArrow(false, 'prev', handleGoToPrev);\n  \n  const nextArrowMainImage = arrows && slides.length != 1 && getArrow(false, 'next', handleGoToNext);\n\n  return (\n    <div\n      role=\"region\"\n      aria-roledescription={Label}\n      className={classes([\n        'pdp-carousel',\n        ['pdp-carousel--main-image-controls', arrowsOnMainImage],\n        ['pdp-carousel--arrows', arrows && !thumbnailControls],\n        [`pdp-carousel--${controls}`, thumbnailControls],\n        className,\n      ])}\n      style={{\n        '--flex-carousel': controls === 'thumbnailsColumn' ? 'row-reverse' : 'column',\n        '--gap': thumbnailControls ? '0' : 'var(--spacing-small)',\n        '--width': width,\n      }}\n      {...props}\n    >\n\n      {/* Slideshow */}\n      <div\n        ref={wrapperRef}\n        className={classes([\n          'pdp-carousel__wrapper',\n          `pdp-carousel__wrapper--${direction}`,\n          ['pdp-carousel__wrapper--scrollbar', scrollbar],\n          ['pdp-carousel__wrapper--peak', peak],\n        ])}\n        style={{\n          '--total-width': controls === 'thumbnailsColumn' ? `81.6%` : `100%`,\n          '--height': controls === 'thumbnailsColumn' ? 'auto' : height,\n          '--gap': gap ? `var(--spacing-${gap})` : '0px',\n          '--per-page': perPage,\n        }}\n        tabIndex={0}\n      >\n        {slides.map((page, index) => {\n          const orphan = page.length < perPage;\n\n          return (\n            <div\n              key={index}\n              role=\"group\"\n              aria-roledescription={SlideLabel}\n              data-index={index}\n              className={classes([\n                'pdp-carousel__slide',\n                `pdp-carousel__slide--${direction}`,\n                ['pdp-carousel__slide--active', current === index],\n                ['pdp-carousel__slide--orphan', orphan],\n              ])}\n              style={{\n                '--length': page.length,\n              }}\n            >\n              {page}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Previous and next arrows for Carousel without thumbnails */}\n      {\n        (!thumbnailControls) && (\n          <>\n            {prevArrow}\n            {nextArrow}\n          </>\n        )\n      }\n\n      {\n        (thumbnailControls && arrowsOnMainImage) && (\n          <>\n            {prevArrowMainImage}\n            {nextArrowMainImage}\n          </>\n        )\n      }\n\n      {/* Controls */}\n      {controls && slides.length != 1 && (\n        <div\n          className={classes([\n            [`pdp-carousel__controls__container--${controls}`, thumbnailControls],\n            ['pdp-carousel__controls__container--no-arrows', !arrows || arrowsOnMainImage],\n          ])}\n          style={{\n            '--width': controls === 'thumbnailsRow' ? `${thumbWidth}px` : width,\n            '--height': `${thumbHeight}px`,\n            '--nr-thumbnails': thumbnailSlides.length,\n          }}\n        >\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && prevArrow}\n          <div\n            ref={thumbnailsWrapperRef}\n            className={classes([\n              [`pdp-carousel__controls__wrapper--${controls}`, thumbnailControls],\n              [`pdp-carousel__controls__wrapper`, thumbnailControls],\n            ])}\n          >\n            <div\n              role=\"group\"\n              aria-label={ControlsLabel}\n              className={classes([\n                'pdp-carousel__controls',\n                [`pdp-carousel__controls--${controls}`, thumbnailControls],\n              ])}\n            >\n              {(loop ? slides.slice(0, length) : slides).map((_, key) => {\n                const buttonsLength = loop ? length : slides.length;\n                const active = loop ? current - 1 === key : current === key;\n\n                if (!thumbnailControls) {\n                  return (\n                    <button\n                      key={key}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      onClick={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      className={classes([\n                        'pdp-carousel__controls__button',\n                        ['pdp-carousel__controls__button--active', active],\n                      ])}\n                    />\n                  );\n                }\n                return (\n                  <label\n                    className={classes(['pdp-carousel__thumbnail__container'])}\n                    key={key}\n                    ref={(el: HTMLLabelElement | null) => {\n                      if (el) {\n                        thumbnailsRefs.current[key] = el;\n                      }\n                    }}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={\"carousel-thumbnails\"}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      checked={active && thumbWidth !== 0}\n                      onChange={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      {...props}\n                      className={classes([\n                        'pdp-carousel__thumbnail',\n                        ['pdp-carousel__thumbnail--selected', active && thumbWidth !== 0],\n                      ])}\n                    />\n\n                    <span\n                      className={classes([\n                        'pdp-carousel__thumbnail__span',\n                      ])}\n                    >\n                      {thumbnailSlides[key]}\n                    </span>\n                  </label>\n                )\n              })}\n            </div>\n          </div>\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && nextArrow}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Utilities\nfunction getPerPageFromBreakpoint(\n  breakpoints:\n    | {\n      small: number;\n      medium: number;\n      large: number;\n    }\n    | number,\n  width = 0\n) {\n  if (typeof breakpoints === 'number') return breakpoints;\n\n  const { small, medium, large } = breakpoints;\n  const mediumViewport = 786;\n  const largeVierport = 1024;\n\n  if (width > largeVierport) return large;\n  if (width > mediumViewport) return medium;\n  return small;\n}\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\n\nimport { Carousel, GalleryGrid, Overlay } from '@/pdp/components';\nimport '@/pdp/components/Product/Product.css';\n\nimport { CarouselConfig } from '@/pdp/containers';\n\ninterface ProductCarouselConfig extends CarouselConfig {\n  thumbnails: VNode[];\n}\n\nexport interface ProductProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title'> {\n  title?: VNode;\n  breadcrumbs?: VNode;\n  galleryContent?: VNode;\n  infoContent?: VNode;\n  productContent?: VNode;\n  shortDescription?: VNode;\n  description?: VNode;\n  attributes?: VNode;\n  images: VNode[];\n  options?: VNode;\n  sku?: VNode;\n  price?: VNode;\n  specialPrice?: VNode;\n  outOfStock: boolean;\n  hideSku?: boolean;\n  actions?: VNode;\n  quantity?: VNode;\n  carouselConfig?: ProductCarouselConfig;\n}\n\nexport const Product: FunctionComponent<ProductProps> = ({\n  title,\n  breadcrumbs,\n  galleryContent,\n  infoContent,\n  productContent,\n  sku,\n  outOfStock,\n  hideSku,\n  shortDescription,\n  description,\n  attributes,\n  images,\n  options,\n  price,\n  specialPrice,\n  className,\n  children,\n  quantity,\n  actions,\n  carouselConfig,\n  ...props\n}) => {\n  // i18n\n  const RegularPriceLabel = useText('PDP.Product.RegularPrice.label').label;\n  const SpecialPriceLabel = useText('PDP.Product.SpecialPrice.label').label;\n  const OutOfStockLabel = useText('PDP.Product.OutOfStock.label').label;\n  const ImagesLabel = useText('PDP.Product.Image.label').label;\n\n  const [zoom, setZoom] = useState<number | null>(null);\n\n  const galleryImages = images?.length ? (\n    images.map((image, key) => (\n      <VComponent\n        key={key}\n        node={image}\n        loading={key === 0 ? 'eager' : 'lazy'}\n        alt={\n          title?.props?.children &&\n          ImagesLabel?.replace('{product}', title.props.children.toString())\n            .replace('{key}', String(key + 1))\n            .replace('{total}', String(images.length))\n        }\n        onClick={() => setZoom(key)}\n      />\n    ))\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  const localThumbnailsImages = carouselConfig?.thumbnails?.length ? (\n    carouselConfig.thumbnails.map((image, key) => (\n      <VComponent\n        key={key}\n        node={image}\n        loading={carouselConfig?.thumbnailsLoadingMode || 'lazy'}\n        alt={\n          title?.props?.children &&\n          ImagesLabel?.replace('{product}', title.props.children.toString())\n            .replace('{key}', String(key + 1))\n            .replace('{total}', String(images.length))}\n      />\n    ))\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  return (\n    <div {...props} className={classes(['pdp-product', className])}>\n      {breadcrumbs && (\n        <VComponent node={breadcrumbs} className=\"pdp-product__breadcrumbs\" />\n      )}\n      <div className=\"pdp-product__column-container pdp-product__gallery-column\">\n        <div className=\"pdp-product__column-body\">\n          {\n            carouselConfig?.controls ?\n              <Carousel\n                className=\"pdp-product__overlay__carousel\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? carouselConfig.controls : 'dots'}\n                arrowsOnMainImage={carouselConfig?.arrowsOnMainImage}\n                loop={carouselConfig?.loopable && images?.length > 1}\n                peak={carouselConfig?.thumbnails?.length > 1 && carouselConfig?.peak?.desktop || false}\n                gap={carouselConfig?.gap || null}\n                width=\"100%\"\n                height=\"100%\"\n                defaultIndex={zoom || 0}\n                thumbnails={localThumbnailsImages}\n              >\n                {galleryImages}\n              </Carousel>\n              :\n              <GalleryGrid className=\"pdp-product__images\" gap=\"small\">\n                {galleryImages}\n              </GalleryGrid>\n          }\n        </div>\n        {galleryContent && (\n          <VComponent\n            node={galleryContent}\n            className=\"pdp-product__gallery-content\"\n          />\n        )}\n      </div>\n\n      <div className=\"pdp-product__column-container pdp-product__content-column\">\n        <div className=\"pdp-product__column-body\">\n          <div className=\"pdp-product__header\">\n            {title && (\n              <VComponent\n                node={title}\n                className=\"pdp-product__title\"\n              />\n            )}\n\n            {!hideSku && sku && (\n              <VComponent node={sku} className=\"pdp-product__sku\" />\n            )}\n          </div>\n\n          <div className=\"pdp-product__prices\">\n            {specialPrice && (\n              <VComponent\n                node={specialPrice}\n                className={classes(['pdp-product__price-special', 'pdp-product__price'])}\n                aria-label={SpecialPriceLabel}\n                role=\"text\"\n              />\n            )}\n            {price && (\n              <VComponent\n                node={price}\n                className={classes(['pdp-product__price-regular', 'pdp-product__price--grey'])}\n                aria-label={RegularPriceLabel}\n                role=\"text\"\n              />\n            )}\n          </div>\n\n          {/* Small Screen Gallery */}\n          {\n            carouselConfig?.mobile ?\n              <Carousel\n                className=\"pdp-product__images pdp-product__images--carousel pdp-product__images--carousel--thumbnails\"\n                width=\"100%\"\n                height=\"auto\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? 'thumbnailsRow' : null}\n                loop={carouselConfig?.loopable && images?.length > 1}\n                peak={carouselConfig?.thumbnails?.length > 1 && carouselConfig?.peak?.mobile || false}\n                gap={carouselConfig?.gap || null}\n                thumbnails={localThumbnailsImages}\n              >\n                {galleryImages}\n              </Carousel>\n              :\n              <Carousel\n                className=\"pdp-product__images pdp-product__images--carousel\"\n                peak={carouselConfig?.peak?.mobile && images?.length > 1}\n                gap={carouselConfig?.gap || null}\n                width=\"100%\"\n                height=\"auto\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? 'dots' : null}\n                loop={carouselConfig?.loopable && images?.length > 1}\n              >\n                {galleryImages}\n              </Carousel>\n          }\n\n          <div\n            className={classes([\n              'pdp-product__actions',\n              [`pdp-product__actions--out-of-stock`, outOfStock],\n            ])}\n          >\n            {outOfStock && (\n              <div className=\"pdp-product__out-of-stock__text\">\n                {OutOfStockLabel}\n              </div>\n            )}\n\n            {options && (\n              <VComponent\n                node={options}\n                className={classes(['pdp-product__options'])}\n              />\n            )}\n\n            {quantity && (\n              <div className=\"pdp-product__quantity\">\n                <VComponent node={quantity} />\n              </div>\n            )}\n\n            {actions && (\n              <VComponent\n                node={actions}\n                className={classes(['pdp-product__buttons'])}\n              />\n            )}\n          </div>\n\n          {shortDescription && (\n            <VComponent\n              node={shortDescription}\n              className={classes(['pdp-product__short_description'])}\n            />\n          )}\n\n          {description && (\n            <VComponent\n              node={description}\n              className={classes(['pdp-product__description'])}\n            />\n          )}\n\n          {attributes ? (\n            <div className=\"pdp-product__attributes\">{attributes}</div>\n          ) : null}\n        </div>\n        {infoContent && (\n          <VComponent\n            node={infoContent}\n            className=\"pdp-product__info-content\" />\n        )}\n      </div>\n\n      {productContent && (\n        <VComponent\n          node={productContent}\n          className=\"pdp-product__content\"\n        />\n      )}\n\n      {/* Zoom Overlay */}\n      {zoom === null ? null : (\n        <Overlay\n          className=\"pdp-product__overlay\"\n          onClose={() => setZoom(null)}\n          centered\n        >\n          <Carousel\n            className=\"pdp-product__overlay__carousel\"\n            arrows={images?.length > 1}\n            width=\"100%\"\n            height=\"100%\"\n            defaultIndex={zoom || 0}\n            loop={images?.length > 1}\n            controls={images?.length > 1 ? 'dots' : null}\n            isZoomed\n          >\n            {galleryImages}\n          </Carousel>\n        </Overlay>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, Children } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport '@/pdp/components/GalleryGrid/GalleryGrid.css';\n\nexport interface GalleryGridProps extends HTMLAttributes<HTMLDivElement> {\n  children: VNode[] | VNode;\n  gap?: 'small' | 'medium' | 'large' | null;\n  style?: Record<string, string | number>;\n}\n\nexport const GalleryGrid: FunctionComponent<GalleryGridProps> = ({\n  children,\n  gap = null,\n  className,\n  style,\n  ...props\n}) => {\n  const count = Children.count(children);\n\n  return (\n    <div\n      {...props}\n      className={classes(['pdp-gallery-grid', className])}\n      style={{\n        '--gap': gap ? `var(--spacing-${gap})` : '0px',\n        ...style,\n      }}\n    >\n      {Children.map(\n        children,\n        (child: VNode<HTMLAttributes<HTMLElement>>, key) => (\n          <div key={count + key} className=\"pdp-gallery-grid__item\">\n            <VComponent\n              key={child.props.src}\n              node={child}\n              loading={key === 0 ? 'eager' : 'lazy'}\n            />\n          </div>\n        )\n      )}\n    </div>\n  );\n};\n","/*\nADOBE CONFIDENTIAL\nCopyright 2023 Adobe\nAll Rights Reserved.\nNOTICE: All information contained herein is, and remains\nthe property of Adobe and its suppliers, if any. The intellectual\nand technical concepts contained herein are proprietary to Adobe\nand its suppliers and are protected by all applicable intellectual\nproperty laws, including trade secret and copyright laws.\nDissemination of this information or reproduction of this material\nis strictly forbidden unless prior written permission is obtained\nfrom Adobe.\n*/\n\nimport { HTMLAttributes } from 'preact/compat';\nimport '@/pdp/components/PriceRange/PriceRange.css';\nimport { FunctionalComponent } from 'preact';\nimport { Price } from '@adobe/elsie/components';\n\nexport interface PriceRangeProps extends HTMLAttributes<HTMLDivElement> {\n  locale?: string;\n  variant?: 'default' | 'strikethrough';\n  currency?: string;\n\n  // Simple product\n  amount?: number;\n  sale?: boolean;\n\n  // Complex product (range)\n  minimumAmount?: number;\n  maximumAmount?: number;\n}\n\nexport const PriceRange: FunctionalComponent<PriceRangeProps> = ({\n  amount,\n  currency,\n  locale,\n  variant,\n  sale,\n  minimumAmount,\n  maximumAmount,\n  className,\n  ...props\n}) => {\n  return (\n    <>\n      {amount || minimumAmount === maximumAmount ? (\n        <div className={'pdp-price-range'} {...props}>\n          <Price\n            amount={amount ? amount : minimumAmount}\n            currency={currency}\n            locale={locale}\n            variant={variant}\n            sale={sale}\n            className={className}\n          />\n        </div>\n      ) : (\n        <div className={'pdp-price-range'} {...props}>\n          <Price\n            amount={minimumAmount}\n            currency={currency}\n            locale={locale}\n            className={className}\n          />\n          <span className=\"pdp-price-range__label\">{'-'}</span>\n          <Price\n            amount={maximumAmount}\n            currency={currency}\n            locale={locale}\n            className={className}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useCallback, useEffect } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Close as CloseSVG } from '@adobe/elsie/icons';\nimport { Button } from '@adobe/elsie/components';\n\nimport '@/pdp/components/Overlay/Overlay.css';\n\nexport interface OverlayProps extends HTMLAttributes<HTMLDivElement> {\n  centered?: boolean;\n  onClose?: () => void;\n}\n\nexport const Overlay: FunctionComponent<OverlayProps> = ({\n  centered,\n  onClose,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const CloseLabel = useText('PDP.Overlay.Close.label').label;\n\n  const handleOnClose = useCallback(() => {\n    onClose?.();\n  }, [onClose]);\n\n  // Close on ESC\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        handleOnClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleOnClose]);\n\n  // Prevent document scrolling\n  useEffect(() => {\n    const scrollingElement = document.scrollingElement as HTMLElement;\n\n    const defaultOverflowValue = scrollingElement.style.overflow;\n\n    scrollingElement.style.overflow = 'hidden';\n\n    return () => {\n      scrollingElement.style.overflow = defaultOverflowValue;\n    };\n  }, []);\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'pdp-overlay',\n        ['pdp-overlay--centered', centered],\n        className,\n      ])}\n    >\n      <div className=\"pdp-overlay__content\">{children}</div>\n\n      <Button\n        aria-label={CloseLabel}\n        variant=\"tertiary\"\n        className=\"pdp-overlay__close-button\"\n        onClick={handleOnClose}\n        icon={<CloseSVG />}\n      />\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useState, useMemo, useCallback, useEffect } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\nimport { ColorSwatch, ImageSwatch, TextSwatch, Picker, PickerOption } from '@adobe/elsie/components';\n\nimport '@/pdp/components/Swatches/Swatches.css';\n\nconst supportedTypes = ['text', 'image', 'color', 'dropdown'];\n\nconst mapToPickerOptions = (items: OptionValue[]): PickerOption[] => {\n    return items.map((item: OptionValue) => ({ ...item, text: item.label, disabled: !item.inStock, }));\n}\n\ntype OptionValue = {\n  id: string;\n  label: string;\n  inStock: boolean;\n  value: string;\n  selected?: boolean;\n};\n\nexport type Option = {\n    id: string;\n    type: (typeof supportedTypes)[number];\n    label: string;\n    required?: boolean;\n    multiple?: boolean;\n    items: OptionValue[];\n};\n\ntype Selection = { [id: string]: { label: string; value: string } };\n\nexport interface SwatchesProps extends HTMLAttributes<HTMLDivElement> {\n  options: Array<{\n    id: string;\n    type: (typeof supportedTypes)[number];\n    label: string;\n    required?: boolean;\n    multiple?: boolean;\n    items: OptionValue[];\n  }>;\n  hideSelectedValue?: boolean;\n\n  defaultOptions?: string[];\n  selectionsToUpdate?: Option[];\n  onValues?: (uids: Selection, current: string) => void;\n  onErrors?: (errors: { [id: string]: string }) => void;\n}\n\nexport const Swatches: FunctionComponent<SwatchesProps> = ({\n  options,\n  hideSelectedValue,\n  onValues,\n  onErrors,\n  defaultOptions,\n  selectionsToUpdate,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const RequiredLabel = useText('PDP.Swatches.Required.label').label;\n\n  const [selections, setSelections] = useState<Selection>(() => {\n    const initial = options?.reduce((accum, option) => {\n      const { items } = option;\n      const defaultSelection = items?.find((item) => defaultOptions?.includes(item.id));\n      const selected = items?.find((item) => item.selected);\n      if (defaultSelection) {\n            return {\n                ...accum,\n                [option.id]: { label: defaultSelection.label, value: defaultSelection.id },\n            };\n        } else if (selected) {\n            return {\n                ...accum,\n                [option.id]: { label: selected.label, value: selected.id },\n            };\n        }\n      return accum;\n    }, {} as Selection);\n\n    return initial;\n  });\n\n  // this only applies for the case with anchor options\n  // update selections in the swatches if they are updated in the parent component\n  useEffect(() => {\n    selectionsToUpdate?.forEach((selectionToUpdate) => {\n      setSelections((prev) => {\n        const selectedItem = selectionToUpdate\n          ?.items?.find((item) => item.selected);\n        if (!selectedItem) return prev;\n\n        const next = {\n          ...prev,\n          [selectionToUpdate.id]: {\n            label: selectedItem?.label,\n            value: selectedItem?.id\n          },\n        };\n        return next;\n      });\n    });\n  }, [selectionsToUpdate, setSelections]);\n\n  // Update invalid options\n  useMemo(() => {\n    const errors = options?.reduce((accum, option) => {\n      option?.items?.forEach((item) => {\n        const selected = selections[option.id]?.value === item.id;\n\n        // Validate required\n        if (option.required && !selected) {\n          accum[option.id] = RequiredLabel;\n        }\n      });\n\n      return accum;\n    }, {} as { [id: string]: string });\n\n    // Call the callback\n    onErrors?.(errors);\n\n    return errors;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selections]);\n\n  const handleOnSelection = useCallback(\n    (id: string, label: string, optionId: string) => {\n      setSelections((prev) => {\n        const next = {\n          ...prev,\n          [id]: { label, value: optionId },\n        };\n\n        // Call the callback\n        onValues?.(next, optionId);\n\n        // Return the next state\n        return next;\n      });\n    },\n    [onValues]\n  );\n\n  // Function to handle the picker selection\n  const handlePickerSelect = (optionId: string, selection: any ) => {\n    const label = selection.selectedOptions[0]?.label  ?? '';\n    handleOnSelection(optionId, label, selection.value);\n  };\n\n  const Swatches = useCallback(\n    ({ items, id, required, type, selected, label }: any) => {\n      return (\n        <div className={classes(['pdp-swatches__options'])}>\n          {\n          type?.toLowerCase() === 'dropdown' ?\n          <Picker aria-label={label} handleSelect={(event) => handlePickerSelect(id, event.target)} options={mapToPickerOptions(items)} value={selected} />\n          :\n          items?.map((option: any) => {\n            const common = {\n              key: option.id,\n              id: option.id,\n              name: id,\n              value: option.value,\n              label: option.label,\n              groupAriaLabel: label,\n              selected: selected === option.id,\n              outOfStock: !option.inStock,\n              // API may return null, we default to true as all swatches are required.\n              //  we still comply to this in case the api return \"false\".\n              required: required === null ? true : required,\n              onValue: () => {\n                handleOnSelection(id, option.label, option.id);\n              },\n            };\n\n            switch (type) {\n              case 'text':\n                return <TextSwatch {...common} label={option.label} />;\n\n              case 'image':\n                return (\n                  <ImageSwatch\n                    {...common}\n                    src={option.value}\n                    alt={option.label}\n                  />\n                );\n\n              case 'color':\n                return (\n                  <ColorSwatch {...common} size=\"large\" color={option.value} />\n                );\n\n              default:\n                console.warn(`Invalid swatch type ${type}`);\n                return null;\n            }\n          })}\n        </div>\n      );\n    },\n    [handleOnSelection]\n  );\n\n  return (\n    <div {...props} className={classes(['pdp-swatches', className])}>\n      {options?.map(({ type, label, id, multiple, required, items }) => {\n        if (!type) {\n          console.warn(`Bundle product not supported on UI.`);\n          return;\n        }\n\n        // Only render supported types\n        if (!supportedTypes.includes(type)) {\n          console.warn(`Invalid swatch type ${type}`);\n        }\n\n        if (multiple) {\n          console.warn(\n            'Multiple selection swatches are not currently supported.'\n          );\n        }\n\n        return (\n          <div\n            key={`swatch-item-${id}`}\n            id={`swatch-item-${id}`}\n            data-slot-key={`product-swatch--${id}`}\n            className=\"pdp-swatches__field\"\n          >\n            <div className=\"pdp-swatches__field__label\">\n              {selections[id] ? (hideSelectedValue ? `${label}` : `${label}: ${selections[id].label}`) : label}\n            </div>\n\n            <Swatches\n              id={id}\n              type={type}\n              required={required}\n              items={items}\n              label={label} //label referring to the name of the swatchGroup\n              selected={selections[id]?.value}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import { toLanguageTag } from '@adobe/elsie/lib';\n\nexport function toDateString(value: string, locale = 'en_US') {\n  if (!isDateValid(value)) throw Error('Invalid date string');\n\n  // normalize time to 00:00:00\n  const time = value.split(' ')[1];\n  if (!time) value = `${value} 00:00:00`;\n\n  return new Date(value).toLocaleDateString(toLanguageTag(locale)).toString();\n}\n\nexport function isDateValid(dateString: string) {\n  const acceptedFormats = [\n    /^\\d{4}-\\d{2}-\\d{2}$/, // YYYY-MM-DD\n    /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/, // MM/DD/YYYY\n    /^\\d{2}\\/\\d{2}\\/\\d{4}$/, // MM/DD/YYYY\n    /^\\d{4}\\/\\d{2}\\/\\d{2}$/, // YYYY/MM/DD\n    /^\\d{1,2}\\.\\d{1,2}\\.\\d{4}$/, // DD.MM.YYYY\n    /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/, // YYYY-MM-DD HH:mm:ss\n  ];\n\n  if (!acceptedFormats.some((format) => format.test(dateString))) return false;\n\n  const date = new Date(dateString);\n  return !isNaN(date.getTime());\n}\n","export function setUrlParams(\n  params: Record<string, string | number | null>\n): void {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === null) {\n      urlSearchParams.delete(key);\n    } else {\n      urlSearchParams.set(key, String(value));\n    }\n  });\n\n  let url = window.location.pathname;\n  url += `?${urlSearchParams.toString()}`;\n  url += window.location.hash;\n\n  window.history.replaceState({}, '', url);\n}\n\nexport function getUrlParams(): Record<string, string> {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params: Record<string, string> = {};\n\n  urlSearchParams.forEach((value, key) => {\n    params[key] = value;\n  });\n\n  return params;\n}\n","import {\n  HTMLAttributes,\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n} from 'preact/compat';\n\nimport {\n  Container,\n  toLanguageTag,\n  SlotProps,\n  SlotMethod,\n  Slot,\n  ResolveImageUrlOptions,\n} from '@adobe/elsie/lib';\n\nimport {\n  Button,\n  Icon,\n  ButtonProps,\n  Image,\n  Incrementer,\n  Breadcrumbs,\n} from '@adobe/elsie/components';\nimport { Product, Swatches, PriceRange, Option } from '@/pdp/components';\nimport { config, getProductData, getRefinedProduct } from '@/pdp/api';\nimport { events } from '@adobe/event-bus';\nimport { Lang, useText } from '@adobe/elsie/i18n';\nimport { isDateValid, toDateString } from '@/pdp/lib/date';\nimport { getUrlParams, setUrlParams } from '@/pdp/lib/url-params';\nimport { ProductModel } from '@/pdp/data/models';\n\ntype IconType = keyof typeof import('@adobe/elsie/icons');\n\ntype Values = {\n  sku: string;\n  quantity: number;\n  optionsUIDs?: string[];\n};\n\ntype DefaultSlotContext = {\n  data: ProductModel | null;\n  values: Values;\n  valid: boolean;\n};\n\nexport type CarouselConfig = {\n  mobile?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loopable?: boolean;\n  peak?: {\n    mobile: boolean,\n    desktop: boolean,\n  }\n  gap?: 'small' | 'medium' | 'large' | null;\n  thumbnailsLoadingMode?: 'lazy' | 'eager';\n  imageParams?: ResolveImageUrlOptions,\n  thumbnailParams?: ResolveImageUrlOptions\n};\n\nexport type OptionsConfig = {\n  anchorOptions?: string[];\n};\n\nexport interface ProductDetailsProps extends HTMLAttributes<HTMLDivElement> {\n  sku: string;\n  hideSku?: boolean;\n  productData?: ProductModel;\n  hideQuantity?: boolean;\n  hideShortDescription?: boolean;\n  hideDescription?: boolean;\n  hideAttributes?: boolean;\n  hideURLParams?: boolean;\n  hideSelectedOptionValue?: boolean;\n  slots?: {\n    Title?: SlotProps<DefaultSlotContext>;\n\n    SKU?: SlotProps<DefaultSlotContext>;\n\n    RegularPrice?: SlotProps<DefaultSlotContext>;\n\n    SpecialPrice?: SlotProps<DefaultSlotContext>;\n\n    Options?: SlotProps<DefaultSlotContext>;\n\n    Quantity?: SlotProps<DefaultSlotContext>;\n\n    Actions?: SlotProps<DefaultSlotContext & {\n      appendButton: SlotMethod<\n        Omit<ButtonProps, 'icon'> & {\n          text?: string;\n          icon?: IconType;\n        }\n      >;\n    }>;\n\n    ShortDescription?: SlotProps<DefaultSlotContext>;\n\n    Description?: SlotProps<DefaultSlotContext>;\n\n    Attributes?: SlotProps<DefaultSlotContext>;\n\n    Breadcrumbs?: SlotProps<DefaultSlotContext & {\n      setSeparator: SlotMethod<IconType>;\n\n      appendLink: SlotMethod<\n        HTMLAttributes<HTMLAnchorElement> & { text?: string }\n      >;\n\n      appendHTMLElement: SlotMethod<HTMLElement>;\n    }>;\n\n    GalleryContent?: SlotProps<DefaultSlotContext>;\n\n    InfoContent?: SlotProps<DefaultSlotContext>;\n\n    Content?: SlotProps<DefaultSlotContext>;\n  };\n  carousel?: CarouselConfig;\n  optionsConfig?: OptionsConfig;\n  onAddToCart?: (values: Values) => void;\n}\n\nexport const ProductDetails: Container<\n  ProductDetailsProps,\n  ProductModel | null\n> = ({\n  sku,\n  hideSku,\n  hideQuantity,\n  hideShortDescription,\n  hideDescription,\n  hideAttributes,\n  hideURLParams,\n  hideSelectedOptionValue,\n  slots,\n  children,\n  initialData,\n  carousel,\n  optionsConfig,\n  onAddToCart,\n  ...props\n}) => {\n  // i18n\n  const AddToCartLabel = useText('PDP.Product.AddToCart.label').label;\n  const IncrementerLabel = useText('PDP.Product.Incrementer.label').label;\n  const DetailsLabel = useText('PDP.Product.Details.label').label;\n\n  // TODO: Investigate if the \"|| 'en-US' \" is really necessary\n  const [locale, setLocale] = useState<Lang>(config.getConfig().defaultLocale as Lang || 'en-US');\n\n  const [selectionsToUpdate, setSelectionsToUpdate] = useState<Option[]>();\n\n  const [data = null, setData] = useState(initialData);\n\n  const [values, setValues] = useState<Values>(() => {\n    const defaultValues: Values = { sku, quantity: 1 };\n\n    if (data?.optionUIDs) {\n      defaultValues.optionsUIDs = data.optionUIDs;\n    }\n    return defaultValues;\n  });\n\n  // the context is invalid for a configurable product that doesn't have all the options selected\n  const [valid, setValid] = useState(() => {\n    return !(\n      data?.options &&\n      data?.options?.length > 0 &&\n      data?.optionUIDs?.length !== data?.options.length\n    );\n  });\n\n  const defaultSlotContext: DefaultSlotContext = { data, values, valid };\n\n  // Locale\n  useEffect(() => {\n    const localeEvent = events.on('locale', (payload: string) => {\n      if (payload === locale) return;\n\n      setLocale(payload as Lang);\n\n      getProductData(sku).then(setData);\n\n      // TODO: need to keep the optionsUIDs when locale changes\n      // if (values?.optionsUIDs) {\n      //   getRefinedProduct(sku, values?.optionsUIDs).then(setData);\n      // } else {\n      //   getProductData(sku).then(setData);\n      // }\n    });\n    return () => {\n      localeEvent?.off();\n    };\n  }, [locale, sku]);\n\n  // Callbacks\n  const handleOnValues = useCallback(\n    (newValues: { [key: string]: string | number }) => {\n      setValues((prev) => ({ ...prev, ...newValues }));\n    },\n    []\n  );\n\n  const handleOptionSelected = useCallback(\n    (selections: { [id: string]: { label: string; value: string } }) => {\n      // options Selected\n      let optionsUIDs = Object.keys(selections)\n        .map((id) => selections[id].value)\n        .filter((element) => element !== undefined);\n\n      // set optionUIDs to URL params\n      // ?optionsUIDs=1,2,3\n      if (!hideURLParams) {\n        setUrlParams({ optionsUIDs: optionsUIDs.join(',') });\n      }\n\n      // update state\n      setValues((prev) => ({ ...prev, optionsUIDs }));\n      setValid(optionsUIDs?.length === data?.options?.length);\n\n      // get refined product data and update state\n      getRefinedProduct(sku, optionsUIDs, optionsConfig?.anchorOptions).then((next) => {\n        setData(next);\n\n        // special processing for anchor options (options that should not be refined when other options are selected)\n        if (optionsConfig?.anchorOptions?.length) {\n          processUpdates(next, optionsUIDs);\n        }\n      });\n    },\n    [sku]\n  );\n\n  const processUpdates = useCallback((next: ProductModel | null, previousOptionsUIDs: string[]) => {\n    const updatedOptionsUIDs = next?.optionUIDs ?? [];\n    const haveSameValues = previousOptionsUIDs.every(item => updatedOptionsUIDs.includes(item));\n    if (!haveSameValues) {\n      setSelectionsToUpdate(next?.options);\n      setValues((prev) => ({ ...prev, optionsUIDs: updatedOptionsUIDs }));\n      setValid(updatedOptionsUIDs?.length === next?.options?.length);\n    }\n  }, [sku]);\n\n  const handleOnErrors = useCallback((_errors: { [id: string]: string }) => {\n    if (Object.keys(_errors).length !== 0) setValid(false);\n  }, []);\n\n  // Product Attributes\n  const attributes = useMemo(() => {\n    return data?.attributes?.map(({ label, value }, key: number) => {\n      const __html = isDateValid(value)\n        ? toDateString(value, locale)\n        : value.toString();\n\n      return (\n        <li key={key}>\n          {/* eslint-disable-next-line react/no-danger */}\n          {label}: <span dangerouslySetInnerHTML={{ __html }} />\n        </li>\n      );\n    });\n  }, [data?.attributes, locale]);\n\n  const quantity =\n    !hideQuantity && data?.inStock ? (\n      <Slot\n        name=\"Quantity\"\n        slot={slots?.Quantity}\n        context={{ ...defaultSlotContext }}\n      >\n        <Incrementer\n          key=\"quantity\"\n          name=\"quantity\"\n          defaultValue={values.quantity.toString()}\n          min={1}\n          aria-label={IncrementerLabel}\n          className=\"pdp-product__quantity\"\n          onValue={(quantity) => {\n            handleOnValues({ quantity: Number(quantity) });\n          }}\n        />\n      </Slot>\n    ) : undefined;\n\n  const renderOptions = () => {\n    if (data?.options) {\n      return (\n        <Slot name=\"Options\" slot={slots?.Options} context={{ ...defaultSlotContext }}>\n          <Swatches\n            options={data.options}\n            defaultOptions={values.optionsUIDs}\n            selectionsToUpdate={selectionsToUpdate}\n            hideSelectedValue={hideSelectedOptionValue}\n            onValues={handleOptionSelected}\n            onErrors={handleOnErrors}\n          />\n        </Slot>\n      );\n    }\n  };\n\n  return (\n    <div {...props}>\n      <Product\n        title={\n          <Slot\n            name=\"Title\"\n            slot={slots?.Title}\n            context={{ ...defaultSlotContext }}\n          >\n            {data?.name}\n          </Slot>\n        }\n        sku={\n          hideSku ? undefined : (\n            <Slot\n              name=\"SKU\"\n              slot={slots?.SKU}\n              context={{ ...defaultSlotContext }}\n            >\n              {data?.sku}\n            </Slot>\n          )\n        }\n        options={renderOptions()}\n        breadcrumbs={\n          slots?.Breadcrumbs && (\n            <Slot\n              name=\"Breadcrumbs\"\n              slot={slots?.Breadcrumbs}\n              context={{\n                ...defaultSlotContext,\n\n                setSeparator(callback) {\n                  this._registerMethod((...attrs) => {\n                    const nextSeparator = callback(...attrs);\n\n                    const separator = nextSeparator && <Icon source={nextSeparator} />;\n\n                    this._setProps((prev: any) => {\n                      return { ...prev, separator };\n                    });\n                  });\n                },\n\n                appendLink(callback) {\n                  this._registerMethod((...attrs) => {\n                    const { text, ...p } = callback(...attrs);\n\n                    const link = <a {...p}>{text}</a>;\n\n                    this._setProps((prev: any) => {\n                      return {\n                        ...prev,\n                        categories: [...(prev.categories || []), link],\n                      };\n                    });\n                  });\n                },\n\n                appendHTMLElement(callback) {\n                  this._registerMethod((...attrs) => {\n                    const domElement = callback(...attrs);\n\n                    const vnode = this._htmlElementToVNode(domElement);\n\n                    this._setProps((prev: any) => {\n                      return {\n                        ...prev,\n                        categories: [...(prev.categories || []), vnode],\n                      };\n                    });\n                  });\n                },\n              }}\n              render={({ separator, categories }) => {\n                return (\n                  <Breadcrumbs separator={separator} categories={categories} />\n                );\n              }}\n            />\n          )\n        }\n        quantity={quantity}\n        actions={\n          <Slot\n            name=\"Actions\"\n            slot={slots?.Actions}\n            context={{\n              ...defaultSlotContext,\n\n              appendButton(callback) {\n                this._registerMethod((...attrs) => {\n                  const _button = callback(...attrs);\n\n                  if (!_button) return;\n\n                  const { text, icon, ...buttonProps } = _button;\n\n                  const button = (\n                    <Button\n                      type=\"button\"\n                      {...buttonProps}\n                      icon={icon && <Icon source={icon} />}\n                    >\n                      {text}\n                    </Button>\n                  );\n\n                  this._setProps((prev: any) => ({\n                    children: [...(prev.children || []), button],\n                  }));\n                });\n              },\n            }}\n          >\n            {\n              // Default Add to Cart button if no slot is provided\n              !slots?.Actions && (\n                <Button\n                  size=\"medium\"\n                  type=\"submit\"\n                  icon={<Icon source=\"Cart\" />}\n                  disabled={!data?.inStock || !valid}\n                  aria-label={AddToCartLabel}\n                  onClick={() => {\n                    return onAddToCart?.(values);\n                  }}\n                >\n                  {AddToCartLabel}\n                </Button>\n              )\n            }\n          </Slot>\n        }\n        shortDescription={\n          !hideShortDescription ? (\n            <Slot\n              name=\"ShortDescription\"\n              slot={slots?.ShortDescription}\n              context={{ ...defaultSlotContext }}\n            >\n              {/* eslint-disable-next-line react/no-danger */}\n              <div dangerouslySetInnerHTML={{ __html: data?.shortDescription ?? '' }} />\n            </Slot>\n          ) : undefined\n        }\n        description={\n          !hideDescription ? (\n            <Slot\n              name=\"Description\"\n              slot={slots?.Description}\n              context={{ ...defaultSlotContext }}\n            >\n              {/* eslint-disable-next-line react/no-danger */}\n              <div dangerouslySetInnerHTML={{ __html: data?.description ?? '' }} />\n            </Slot>\n          ) : undefined\n        }\n        images={\n          data?.images?.map(({ label, url }) => (\n            <Image\n              key={url}\n              title={label}\n              alt={label}\n              src={url}\n              // TODO: change width/height for image aspect ratio\n              // pending https://jira.corp.adobe.com/browse/DATA-5122\n              width={carousel?.imageParams?.width ?? 960}\n              height={carousel?.imageParams?.height ?? 1191}\n              params={carousel?.imageParams ?? { width: 960 }}\n            />\n          )) ?? []\n        }\n        specialPrice={\n          data?.prices?.visible ? (\n            <Slot\n              name=\"SpecialPrice\"\n              slot={slots?.SpecialPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange {...data.prices.final} locale={toLanguageTag(locale)} />\n            </Slot>\n          ) : undefined\n        }\n        price={\n          data?.prices?.visible &&\n          data.prices.regular &&\n          data.prices.final.amount !== data?.prices.regular.amount ? (\n            <Slot\n              name=\"RegularPrice\"\n              slot={slots?.RegularPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange\n                {...data.prices.regular}\n                locale={toLanguageTag(locale)}\n              />\n            </Slot>\n          ) : undefined\n        }\n        carouselConfig={{\n          ...carousel,\n          thumbnails: carousel\n            ? data?.images?.map(({ label, url }) => (\n                <Image\n                  key={url}\n                  title={label}\n                  alt={label}\n                  src={url}\n                  // TODO: change width/height for image aspect ratio\n                  // pending https://jira.corp.adobe.com/browse/DATA-5122\n                  width={carousel?.thumbnailParams?.width ?? 200}\n                  height={carousel?.thumbnailParams?.height ?? 248}\n                  params={carousel?.thumbnailParams ?? { width: 200 }}\n                />\n              )) ?? []\n            : [],\n        }}\n        outOfStock={!data?.inStock}\n        attributes={\n          !hideAttributes ? (\n            <Slot\n              name=\"Attributes\"\n              slot={slots?.Attributes}\n              context={{ ...defaultSlotContext }}\n            >\n              {attributes?.length ? (\n                <>\n                  {DetailsLabel}\n                  <ul>{attributes}</ul>\n                </>\n              ) : null}\n            </Slot>\n          ) : undefined\n        }\n        galleryContent={\n          slots?.GalleryContent && (\n            <Slot\n              name=\"GalleryContent\"\n              slot={slots.GalleryContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        infoContent={\n          slots?.InfoContent && (\n            <Slot\n              name=\"InfoContent\"\n              slot={slots.InfoContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        productContent={\n          slots?.Content && (\n            <Slot\n              name=\"Content\"\n              slot={slots.Content}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n      />\n    </div>\n  );\n};\n\nProductDetails.getInitialData = async function ({ sku, optionsConfig }) {\n  // check if default selections are made\n  const defaultSelections = getUrlParams().optionsUIDs?.split(',') || config?.getConfig()?.models?.ProductDetails?.initialData?.optionsUIDs;\n\n  // if it has selections, refine the product data\n  if (defaultSelections?.length) {\n    return await getRefinedProduct(sku, defaultSelections, optionsConfig?.anchorOptions);\n  }\n\n  // otherwise return the product data\n  return await getProductData(sku);\n};\n"],"names":["debounce","fn","ms","timeoutId","args","clearTimeout","setTimeout","apply","toLanguageTag","locale","replace","SvgChevronDown","props","React","SvgClose","Carousel","show","scrollbar","peak","arrows","controls","arrowsOnMainImage","loop","gap","direction","width","height","defaultIndex","className","children","thumbnails","isZoomed","Label","useText","label","SlideLabel","PreviousLabel","NextLabel","ControlsLabel","ControlsBtnLabel","perPage","setPerPage","useState","getPerPageFromBreakpoint","length","Math","ceil","Children","toArray","gapSizes","small","medium","large","peakWidth","gapWidth","rest","thumbGap","thumbSeen","iconSize","current","setCurrent","thumbnailsRefs","useRef","thumbWidth","setThumbWidth","thumbHeight","setThumbHeight","thumbnailSlides","useMemo","slides","returnValue","reduce","acc","child","i","slice","concat","wrapperRef","thumbnailsWrapperRef","thumbnailControls","useEffect","wrapper","document","body","handleResize","offsetWidth","offsetHeight","window","innerWidth","newPerPage","observer","ResizeObserver","observe","unobserve","handleThumbnailsScroll","useCallback","nextSlideIndex","nextItem","thumbnailRef","oneItemWidth","oneItemHeight","thumbnailsWrapper","style","scrollBehavior","scrollLeft","scrollTop","handleScrollTo","smooth","reset","realWidth","Array","from","querySelectorAll","filter","element","dataIndex","Number","getAttribute","isNaN","futureIndex","scrollWidth","diff","handleGoToPrev","handleGoToNext","lastSlideIndex","handleKeyDown","event","key","preventDefault","addEventListener","removeEventListener","handleOnScroll","dividing","round","totalWidth","getArrow","forThumbnails","callback","_jsx","Button","classes","variant","onClick","disabled","Icon","size","source","ChevronDown","prevArrow","nextArrow","prevArrowMainImage","nextArrowMainImage","_jsxs","role","ref","tabIndex","map","page","index","orphan","_Fragment","_","buttonsLength","active","el","type","name","String","checked","onChange","breakpoints","mediumViewport","Product","title","breadcrumbs","galleryContent","infoContent","productContent","sku","outOfStock","hideSku","shortDescription","description","attributes","images","options","price","specialPrice","quantity","actions","carouselConfig","RegularPriceLabel","SpecialPriceLabel","OutOfStockLabel","ImagesLabel","zoom","setZoom","galleryImages","image","VComponent","node","loading","alt","toString","src","localThumbnailsImages","thumbnailsLoadingMode","loopable","desktop","GalleryGrid","mobile","Overlay","onClose","centered","count","PriceRange","amount","currency","sale","minimumAmount","maximumAmount","Price","CloseLabel","handleOnClose","scrollingElement","defaultOverflowValue","overflow","icon","CloseSVG","supportedTypes","mapToPickerOptions","items","item","text","inStock","Swatches","hideSelectedValue","onValues","onErrors","defaultOptions","selectionsToUpdate","RequiredLabel","selections","setSelections","accum","option","defaultSelection","find","includes","id","selected","value","forEach","selectionToUpdate","prev","selectedItem","next","errors","required","handleOnSelection","optionId","handlePickerSelect","selection","selectedOptions","toLowerCase","Picker","handleSelect","target","common","groupAriaLabel","onValue","TextSwatch","ImageSwatch","ColorSwatch","color","warn","multiple","console","toDateString","isDateValid","Error","split","Date","toLocaleDateString","dateString","some","format","test","date","getTime","setUrlParams","params","urlSearchParams","URLSearchParams","location","search","entries","delete","set","url","pathname","hash","history","replaceState","getUrlParams","ProductDetails","hideQuantity","hideShortDescription","hideDescription","hideAttributes","hideURLParams","hideSelectedOptionValue","slots","initialData","carousel","optionsConfig","onAddToCart","AddToCartLabel","IncrementerLabel","DetailsLabel","setLocale","config","getConfig","defaultLocale","setSelectionsToUpdate","data","setData","values","setValues","defaultValues","optionUIDs","optionsUIDs","valid","setValid","defaultSlotContext","localeEvent","events","on","payload","then","off","handleOnValues","newValues","handleOptionSelected","Object","keys","undefined","join","getRefinedProduct","anchorOptions","processUpdates","previousOptionsUIDs","updatedOptionsUIDs","every","handleOnErrors","_errors","__html","dangerouslySetInnerHTML","Slot","slot","Quantity","context","Incrementer","defaultValue","min","renderOptions","Options","Title","SKU","Breadcrumbs","setSeparator","_registerMethod","attrs","nextSeparator","separator","_setProps","appendLink","p","link","categories","appendHTMLElement","domElement","vnode","_htmlElementToVNode","render","Actions","appendButton","_button","buttonProps","button","ShortDescription","Description","Image","imageParams","prices","visible","SpecialPrice","final","regular","RegularPrice","thumbnailParams","Attributes","GalleryContent","InfoContent","Content","getInitialData","defaultSelections","models","getProductData"],"mappings":"gzBAAaA,MAAAA,GAAWA,CAACC,EAAcC,IAAe,CAChDC,IAAAA,EACJ,OAAO,YAAwBC,EAAa,CAC1CC,aAAaF,CAAS,EACtBA,EAAYG,WAAW,IAAML,EAAGM,MAAM,KAAMH,CAAI,EAAGF,CAAE,CAAA,CAEzD,ECAaM,GAAiBC,GACrBA,EAAOC,QAAQ,IAAK,GAAG,ECN1BC,GAAkBC,GAA0BC,GAAM,cAAc,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,KAAM,OAAQ,MAAO,6BAA8B,GAAGD,CAAO,EAAkBC,GAAM,cAAc,OAAQ,CAAE,EAAG,kDAAmD,OAAQ,eAAgB,YAAa,IAAK,cAAe,SAAU,eAAgB,OAAO,CAAE,CAAC,ECAtXC,GAAYF,GAA0BC,GAAM,cAAc,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,KAAM,OAAQ,MAAO,6BAA8B,GAAGD,CAAK,EAAoBC,GAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,EAAG,iCAAkC,OAAQ,cAAc,CAAE,EAAmBA,GAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,EAAG,iCAAkC,OAAQ,cAAc,CAAE,CAAC,ECsC1cE,GAA6CA,CAAC,CACzDC,KAAAA,EAAO,EACPC,UAAAA,EAAY,GACZC,KAAAA,EAAO,GACPC,OAAAA,EAAS,GACTC,SAAAA,EAAW,OACXC,kBAAAA,EAAoB,GACpBC,KAAAA,EAAO,GACPC,IAAAA,EAAM,KACNC,UAAAA,EAAY,aACZC,MAAAA,GAAQ,OACRC,OAAAA,EAAS,OACTC,aAAAA,EAAe,EACfC,UAAAA,EACAC,SAAAA,EACAC,WAAAA,EAAa,KACbC,SAAAA,EACA,GAAGnB,CACL,IAAM,CAEEoB,MAAAA,EAAQC,EAAQ,oBAAoB,EAAEC,MACtCC,EAAaF,EAAQ,0BAA0B,EAAEC,MACjDE,EAAgBH,EAAQ,6BAA6B,EAAEC,MACvDG,EAAYJ,EAAQ,yBAAyB,EAAEC,MAC/CI,EAAgBL,EAAQ,6BAA6B,EAAEC,MACvDK,EAAmBN,EAAQ,oCAAoC,EAAEC,MAGjE,CAACM,EAASC,CAAU,EAAIC,EAAS,IAAMC,GAAyB3B,CAAI,CAAC,EAGrE4B,EAASC,KAAKC,KAAKC,GAASC,QAAQnB,CAAQ,EAAEe,OAASJ,CAAO,EAC9DS,GAAW,CAAEC,MAAO,GAAIC,OAAQ,GAAIC,MAAO,EAAA,EAC3CC,EAAYnC,EAAO,GAAK,EACxBoC,EAAW/B,EAAM0B,GAAS1B,CAAG,EAAI,EACjCgC,EAAOR,GAASC,QAAQnB,CAAQ,EAAEe,OAASJ,EAC3CgB,GAAW,GACXC,EAAY,EACZC,GAAW,KAGX,CAACC,EAASC,EAAU,EAAIlB,EAC5BpB,EAAOK,EAAe,EAAIA,CAC5B,EAGMkC,EAAiBC,GAA2B,CAAA,CAAE,EAC9C,CAACC,EAAYC,CAAa,EAAItB,EAAS,CAAC,EACxC,CAACuB,GAAaC,EAAc,EAAIxB,EAAS,CAAC,EAE1CyB,EAAkBC,GAAiB,IAChCrB,GAASC,QAAQlB,CAAU,EACjC,CAACA,CAAU,CAAC,EAGTuC,EAASD,GAAmB,IAAM,CAChCE,MAAAA,EAAcvB,GAASC,QAAQnB,CAAQ,EAAE0C,OAAO,CAACC,EAAKC,EAAOC,IAC7DA,EAAIlC,IAAY,EACX,CAAC,GAAGgC,EAAK,CAACC,CAAK,CAAC,EAGlB,CAAC,GAAGD,EAAIG,MAAM,EAAG,EAAE,EAAG,CAAC,GAAGH,EAAIA,EAAI5B,OAAS,CAAC,EAAG6B,CAAK,CAAC,EAC3D,CAAgB,CAAA,EAEnB,MAAI,CAACnD,GAAQgD,EAAY1B,SAAW,EAC3B0B,EAGLhD,GAAUyB,GAASC,QAAQnB,CAAQ,EAAEe,OAASJ,IAAY,EACrD,CAAC8B,EAAY1B,EAAS,CAAC,CAAC,EAC5BgC,OAAON,CAAW,EAClBM,OAAO,CAACN,EAAY,CAAC,EAAGA,EAAY,CAAC,CAAC,CAAC,EAGrC,CAACvB,GAASC,QAAQnB,CAAQ,EAAE8C,MAAM,CAACnC,CAAO,CAAC,EAC/CoC,OAAON,CAAW,EAClBM,OAAO,CAACN,EAAY,CAAC,EAAGA,EAAY,CAAC,CAAC,CAAC,GACzC,CAACzC,EAAUW,EAASI,EAAQtB,CAAI,CAAC,EAG9BuD,EAAaf,GAAuB,IAAI,EACxCgB,EAAuBhB,GAAuB,IAAI,EAClDiB,EAAoB3D,IAAa,iBAAmBA,IAAa,mBAGvE4D,GAAU,IAAM,CACd,MAAMC,EAAUC,SAASC,KAEnBC,EAAepF,GAAS,IAAM,UACpB6E,IAAAA,EAAAA,EAAWlB,UAAXkB,YAAAA,EAAoBQ,cAAe,CAAC,EACnCR,KAAAA,GAAAA,EAAWlB,UAAXkB,YAAAA,GAAoBS,eAAgB,CAAC,EACpD,MAAM7D,EAAQ8D,OAAOC,WACfC,EAAa9C,GAAyB3B,EAAMS,CAAK,EAEnDgE,IAAejD,GACjBC,EAAWgD,CAAU,GAEtB,EAAE,EAECC,EAAW,IAAIC,eAAeP,CAAY,EAChDM,OAAAA,EAASE,QAAQX,CAAO,EAEjB,IAAM,CACXS,EAASG,UAAUZ,CAAO,CAAA,CAC5B,EACC,CAACzC,EAASxB,CAAI,CAAC,EAGZ8E,MAAAA,EAAyBC,EAAaC,GAA2B,CAC/DC,MAAAA,EAAW3E,EAAO0E,EAAiB,EAAIA,EACvCE,EAAerC,GAAAA,YAAAA,EAAgBF,QAAQ,GACvCwC,GAAeD,GAAAA,YAAAA,EAAcb,aAAc7B,GAC3C4C,GAAgBF,GAAAA,YAAAA,EAAcZ,cAAe9B,GAC7C6C,EAAoBvB,EAAqBnB,QAE3CvC,IAAa,kBAAmBiF,GAAAA,MAAAA,EAAmBhB,eACjDc,GAAgBF,EAAW,GAAKI,EAAkBhB,cACpDgB,EAAkBC,MAAMC,eAAiB,SACvBC,EAAAA,YAAcP,EAAWxC,GAAa0C,GAGtDE,EAAkBG,WAAaL,EAAeF,IAChDI,EAAkBC,MAAMC,eAAiB,SACvBC,EAAAA,YAAcP,EAAWxC,GAAa0C,IAIxD/E,IAAa,qBAAsBiF,GAAAA,MAAAA,EAAmBf,gBACpDc,GAAiBH,EAAW,GAAKI,EAAkBf,eACrDe,EAAkBC,MAAMC,eAAiB,SACvBE,EAAAA,WAAaR,EAAWxC,GAAa2C,GAGrDC,EAAkBI,UAAYL,EAAgBH,IAChDI,EAAkBC,MAAMC,eAAiB,SACvBE,EAAAA,WAAaR,EAAWxC,GAAa2C,GAE3D,EACC,CAAChF,EAAUE,CAAI,CAAC,EAGboF,EAAiBX,EACrB,CAACC,EAAwBW,EAAkBC,IAAoB,EACzDxF,IAAa,iBAAmBA,IAAa,qBAC/C0E,EAAuBE,CAAc,EAGvC,MAAMf,EAAUJ,EAAWlB,QACrBkD,EAAYxD,EACd4B,EAAQI,YAAchC,EACtB4B,EAAQI,YAAchC,EAAYC,EAWtC,GAAI,CATUwD,MAAMC,KAAK9B,EAAQ+B,iBAAiB,cAAc,CAAC,EAAEC,OACpDC,IAAA,CACX,MAAMC,GAAYC,OAAOF,GAAQG,aAAa,YAAY,CAAE,EAC5D,MAAO,CAACC,MAAMH,EAAS,GAAKA,GAAY,EAAA,CAE5C,EAEmBnB,CAAc,EAG/B,OAGF,GAAIY,EAAO,CACHW,MAAAA,GAAcvB,IAAmB,EAAIpD,EAAS,EAC9C4E,GACJX,GAAajE,GAAUW,GAAcf,GAAWA,GAElD,GAAIyC,EAAQuB,YAAc,GAAKvB,EAAQuB,WAAaK,EAAY,EAAG,CACjEH,EAAe,EAAG,EAAI,EACtB,MACF,CAEA,GACEzB,EAAQuB,WAAagB,GAAcX,GACnC5B,EAAQuB,YAAcgB,GACtB,CACAd,EAAe9D,EAAQ,EAAI,EAC3B,MACF,CAEAqC,EAAQqB,MAAMC,eAAiB,OACvBC,EAAAA,WAAae,KAAgB,EAAI,EAAIC,GAC7Cd,EAAea,KAAgB,EAAI,EAAI3E,EAAQ,EAAI,EACnD,MACF,CAEM6E,MAAAA,IACFxC,EAAQI,YAAc/B,GAAYd,EACpC6B,EAAO2B,CAAc,EAAEpD,OACvBS,EAEMiD,EAAAA,MAAMC,eAAiBI,EAAS,SAAW,OAC3CH,EAAAA,WACNnC,EAAO2B,CAAc,EAAEpD,SAAWJ,EAC9BqE,EAAYb,EACZa,GAAab,EAAiB,GAAKyB,EACzC,EAEF,CAACnE,EAAUV,EAAQS,EAAWb,EAASe,EAAMc,EAAQyB,EAAwB1E,CAAQ,CACvF,EAEMsG,GAAiB3B,EAAY,IAAM,CACvC,GAAIzE,EAAM,CACR,MAAM0E,EAAiBrC,EAAU,EAClBqC,EAAAA,EAAgB,GAAMrC,IAAY,CAAC,EAClD,MACF,CAEA,MAAMqC,EAAiBrC,GAAW,EAAI,EAAIA,EAAU,EAEpD+C,EAAeV,EAAgB,EAAI,CAClC,EAAA,CAACrC,EAAS+C,EAAgBpF,CAAI,CAAC,EAE5BqG,GAAiB5B,EAAY,IAAM,CACjC6B,MAAAA,EAAiBvD,EAAOzB,OAAS,EAEvC,GAAItB,EAAM,CACR,MAAM0E,EAAiBrC,EAAU,EAClBqC,EAAAA,EAAgB,GAAMrC,IAAYf,CAAM,EACvD,MACF,CAEA,MAAMoD,EACJrC,GAAWiE,EAAiBA,EAAiBjE,EAAU,EAEzD+C,EAAeV,EAAgB,EAAI,CAAA,EAClC,CAAC3B,EAAOzB,OAAQtB,EAAMqC,EAAS+C,EAAgB9D,CAAM,CAAC,EAGzDoC,GAAU,IAAM,CACR6C,MAAAA,EAAiBC,GAAyB,CAC1CA,EAAMC,MAAQ,cAChBD,EAAME,eAAe,EACNN,MAGbI,EAAMC,MAAQ,eAChBD,EAAME,eAAe,EACNL,KACjB,EAGKM,cAAAA,iBAAiB,UAAWJ,CAAa,EAEzC,IAAM,CACJK,OAAAA,oBAAoB,UAAWL,CAAa,CAAA,CACrD,EACC,CAACF,GAAgBD,EAAc,CAAC,EAGnC1C,GAAU,IAAM,CACd0B,EAAepF,EAAOK,EAAe,EAAIA,EAAc,EAAK,CAC3D,EAAA,CAACA,EAAc+E,EAAgBpF,CAAI,CAAC,EAGjC6G,MAAAA,GAAiBnI,GAAS,IAAM,CACpC,MAAMiF,EAAUJ,EAAWlB,QACrBkD,EAAYxD,EACd4B,EAAQI,YAAchC,EACtB4B,EAAQI,YAAchC,EAAYC,EAChC8E,EAAWnD,EAAQuB,WAAaK,EAChCb,EAAiBnD,KAAKwF,MAAMD,CAAQ,EAAIA,EAAW,EAAIvF,KAAKwF,MAAMD,CAAQ,EAAIvF,KAAKC,KAAKsF,CAAQ,EAMtG,GAJIrD,GACFe,EAAuBE,CAAc,EAGnC1E,EAAM,CACR,MAAMgH,EACJzB,GAAajE,GAAUW,GAAcf,GAAWA,GAE9CK,GAAAA,KAAKC,KAAKmC,EAAQuB,UAAU,GAAK3D,KAAKC,KAAKwF,CAAU,EAAI,EAAG,CAC9DrD,EAAQqB,MAAMC,eAAiB,OAC/BtB,EAAQuB,WACNvB,EAAQI,YAAc,GACrBxC,KAAKC,KAAKmC,EAAQuB,UAAU,EAAI3D,KAAKC,KAAKwF,CAAU,EAAIjF,GAC3D,MACF,CAEI4B,GAAAA,EAAQuB,aAAe,EAAG,CAC5BvB,EAAQqB,MAAMC,eAAiB,OACvBC,EAAAA,WAAa8B,EAAarD,EAAQI,YAAchC,EACxD,MACF,CACF,CAEIM,IAAYqC,GACdpC,GAAWoC,CAAc,GAE1B,GAAG,EAENhB,GAAU,IAAM,CACd,MAAMC,EAAUJ,EAAWlB,QAClBsE,OAAAA,GAAAA,MAAAA,EAAAA,iBAAiB,SAAUE,IAE7B,IAAM,CACFD,GAAAA,MAAAA,EAAAA,oBAAoB,SAAUC,GAAc,CACvD,EACC,CAACA,EAAc,CAAC,EAInB,MAAMI,GAAWA,CAACC,EAAwBhH,EAAmBiH,IACpDC,EAACC,GAAM,CACZ/G,UAAWgH,EAAQ,CACjB,CAAC,uBAAwB,CAACJ,CAAa,EACvC,CAAE,yBAAwBhH,CAAU,GAAG,CAACgH,CAAa,EACrD,CAAE,yBAAwBpH,CAAS,GAAGoH,CAAa,CAAC,CACrD,EACDlC,MAAO,CACL,WAAa,GAAErC,EAAY,IAC7B,EACA4E,QAAQ,WACR,aAAYrH,IAAc,OAASa,EAAYD,EAC/C0G,QAASL,EACTM,SAAUzH,EAAO,GAAQE,IAAc,OAAUmC,GAAWU,EAAOzB,OAAS,EAAIe,EAAU,EAAE9B,SAE5F6G,EAACM,GAAI,CACHpH,UAAWgH,EAAQ,CACjB,CAAC,6BAA8B,CAACJ,CAAa,EAC7C,CAAE,+BAA8BhH,CAAU,GAAG,CAACgH,CAAa,EAC3D,CAAE,+BAA8BpH,CAAS,KAAII,CAAU,GAAGgH,CAAa,CAAC,CACzE,EACDS,KAAMvF,GACNwF,OAAQC,EAAAA,CACT,CAAA,CACK,EAGJC,GAAYjI,GAAUkD,EAAOzB,QAAU,GAAK2F,GAASxD,EAAmB,OAAQ2C,EAAc,EAE9F2B,GAAYlI,GAAUkD,EAAOzB,QAAU,GAAK2F,GAASxD,EAAmB,OAAQ4C,EAAc,EAE9F2B,GAAqBnI,GAAUkD,EAAOzB,QAAU,GAAK2F,GAAS,GAAO,OAAQb,EAAc,EAE3F6B,GAAqBpI,GAAUkD,EAAOzB,QAAU,GAAK2F,GAAS,GAAO,OAAQZ,EAAc,EAEjG,OACE6B,EAAA,MAAA,CACEC,KAAK,SACL,uBAAsBzH,EACtBJ,UAAWgH,EAAQ,CACjB,eACA,CAAC,oCAAqCvH,CAAiB,EACvD,CAAC,uBAAwBF,GAAU,CAAC4D,CAAiB,EACrD,CAAE,iBAAgB3D,CAAS,GAAG2D,CAAiB,EAC/CnD,CAAS,CACV,EACD0E,MAAO,CACL,kBAAmBlF,IAAa,mBAAqB,cAAgB,SACrE,QAAS2D,EAAoB,IAAM,uBACnC,UAAWtD,EACb,EAAE,GACEb,EAAKiB,UAIT6G,EAAA,MAAA,CACEgB,IAAK7E,EACLjD,UAAWgH,EAAQ,CACjB,wBACC,0BAAyBpH,CAAU,GACpC,CAAC,mCAAoCP,CAAS,EAC9C,CAAC,8BAA+BC,CAAI,CAAC,CACtC,EACDoF,MAAO,CACL,gBAAiBlF,IAAa,mBAAsB,QAAU,OAC9D,WAAYA,IAAa,mBAAqB,OAASM,EACvD,QAASH,EAAO,iBAAgBA,CAAI,IAAK,MACzC,aAAciB,CAChB,EACAmH,SAAU,EAAE9H,SAEXwC,EAAOuF,IAAI,CAACC,EAAMC,IAAU,CACrBC,MAAAA,EAASF,EAAKjH,OAASJ,EAE7B,OACEkG,EAAA,MAAA,CAEEe,KAAK,QACL,uBAAsBtH,EACtB,aAAY2H,EACZlI,UAAWgH,EAAQ,CACjB,sBACC,wBAAuBpH,CAAU,GAClC,CAAC,8BAA+BmC,IAAYmG,CAAK,EACjD,CAAC,8BAA+BC,CAAM,CAAC,CACxC,EACDzD,MAAO,CACL,WAAYuD,EAAKjH,MACnB,EAAEf,SAEDgI,GAdIC,CAeF,CAAA,CAER,CACE,CAAA,EAIF,CAAC/E,GACAyE,EAAAQ,GAAA,CAAAnI,SAAA,CACGuH,GACAC,EAAS,CACV,CAAA,EAKHtE,GAAqB1D,GACpBmI,EAAAQ,GAAA,CAAAnI,SAAA,CACGyH,GACAC,EAAkB,CAAA,CACnB,EAKLnI,GAAYiD,EAAOzB,QAAU,GAC5B4G,EAAA,MAAA,CACE5H,UAAWgH,EAAQ,CACjB,CAAE,sCAAqCxH,CAAS,GAAG2D,CAAiB,EACpE,CAAC,+CAAgD,CAAC5D,GAAUE,CAAiB,CAAC,CAC/E,EACDiF,MAAO,CACL,UAAWlF,IAAa,gBAAmB,GAAE2C,CAAW,KAAMtC,GAC9D,WAAa,GAAEwC,EAAY,KAC3B,kBAAmBE,EAAgBvB,MACrC,EAAEf,SAAA,EAEAkD,GAAqBhD,IAAa,CAACV,GAAqB+H,GAC1DV,EAAA,MAAA,CACEgB,IAAK5E,EACLlD,UAAWgH,EAAQ,CACjB,CAAE,oCAAmCxH,CAAS,GAAG2D,CAAiB,EAClE,CAAE,kCAAkCA,CAAiB,CAAC,CACvD,EAAElD,SAEH6G,EAAA,MAAA,CACEe,KAAK,QACL,aAAYnH,EACZV,UAAWgH,EAAQ,CACjB,yBACA,CAAE,2BAA0BxH,CAAS,GAAG2D,CAAiB,CAAC,CAC3D,EAAElD,UAEDP,EAAO+C,EAAOM,MAAM,EAAG/B,CAAM,EAAIyB,GAAQuF,IAAI,CAACK,EAAGlC,IAAQ,CACnDmC,MAAAA,EAAgB5I,EAAOsB,EAASyB,EAAOzB,OACvCuH,EAAS7I,EAAOqC,EAAU,IAAMoE,EAAMpE,IAAYoE,EAExD,OAAKhD,EAmBHyE,EAAA,QAAA,CACE5H,UAAWgH,EAAQ,CAAC,oCAAoC,CAAC,EAEzDc,IAAMU,GAAgC,CAChCA,IACazG,EAAAA,QAAQoE,CAAG,EAAIqC,EAElC,EAAEvI,UAEF6G,EAAA,QAAA,CACE2B,KAAK,QACLC,KAAM,sBACN,aAAY/H,EAAiB7B,QAC3B,QACA6J,OAAOxC,EAAM,CAAC,CAChB,EAAErH,QAAQ,UAAW6J,OAAOL,CAAa,CAAC,EAC1CM,QAASL,GAAUpG,IAAe,EAClC0G,SAAUA,IAAM,CACd/D,EAAepF,EAAOyG,EAAM,EAAIA,EAAK,EAAI,CAC3C,EAAE,GACEnH,EACJgB,UAAWgH,EAAQ,CACjB,0BACA,CAAC,oCAAqCuB,GAAUpG,IAAe,CAAC,CAAC,CAClE,CAAA,CACF,EAED2E,EAAA,OAAA,CACE9G,UAAWgH,EAAQ,CACjB,+BAA+B,CAChC,EAAE/G,SAEFsC,EAAgB4D,CAAG,CAAA,CAChB,CAAC,GA/BFA,CAgCA,EAnDLW,EAAA,SAAA,CAEE,aAAYnG,EAAiB7B,QAC3B,QACA6J,OAAOxC,EAAM,CAAC,CAChB,EAAErH,QAAQ,UAAW6J,OAAOL,CAAa,CAAC,EAC1CpB,QAASA,IAAM,CACbpC,EAAepF,EAAOyG,EAAM,EAAIA,EAAK,EAAI,CAC3C,EACAnG,UAAWgH,EAAQ,CACjB,iCACA,CAAC,yCAA0CuB,CAAM,CAAC,CACnD,GAXIpC,CAYN,CAsCI,CAEV,CAAA,CACE,CACF,CAAA,GACHhD,GAAqBhD,IAAa,CAACV,GAAqBgI,EAAS,CAAA,CAChE,CACN,CAAA,CACE,CAET,EAGA,SAAS1G,GACP+H,EAOAjJ,EAAQ,EACR,CACA,GAAI,OAAOiJ,GAAgB,SAAiBA,OAAAA,EAEtC,KAAA,CAAExH,MAAAA,EAAOC,OAAAA,EAAQC,MAAAA,CAAUsH,EAAAA,EAC3BC,EAAiB,IAGvB,OAAIlJ,EAFkB,KAEY2B,EAC9B3B,EAAQkJ,EAAuBxH,EAC5BD,CACT,CC7hBO,MAAM0H,GAA2CA,CAAC,CACvDC,MAAAA,EACAC,YAAAA,EACAC,eAAAA,EACAC,YAAAA,EACAC,eAAAA,EACAC,IAAAA,EACAC,WAAAA,EACAC,QAAAA,EACAC,iBAAAA,EACAC,YAAAA,GACAC,WAAAA,EACAC,OAAAA,EACAC,QAAAA,EACAC,MAAAA,EACAC,aAAAA,EACA/J,UAAAA,EACAC,SAAAA,EACA+J,SAAAA,EACAC,QAAAA,EACAC,eAAAA,EACA,GAAGlL,CACL,IAAM,oBAEEmL,MAAAA,EAAoB9J,EAAQ,gCAAgC,EAAEC,MAC9D8J,EAAoB/J,EAAQ,gCAAgC,EAAEC,MAC9D+J,EAAkBhK,EAAQ,8BAA8B,EAAEC,MAC1DgK,EAAcjK,EAAQ,yBAAyB,EAAEC,MAEjD,CAACiK,EAAMC,EAAO,EAAI1J,EAAwB,IAAI,EAE9C2J,EAAgBb,GAAAA,MAAAA,EAAQ5I,OAC5B4I,EAAO5B,IAAI,CAAC0C,EAAOvE,WACjBW,OAAAA,EAAC6D,EAAU,CAETC,KAAMF,EACNG,QAAS1E,IAAQ,EAAI,QAAU,OAC/B2E,MACE7B,EAAAA,GAAAA,YAAAA,EAAOjK,QAAPiK,YAAAA,EAAchJ,YACdqK,GAAAA,YAAAA,EAAaxL,QAAQ,YAAamK,EAAMjK,MAAMiB,SAAS8K,SAAU,GAC9DjM,QAAQ,QAAS6J,OAAOxC,EAAM,CAAC,GAC/BrH,QAAQ,UAAW6J,OAAOiB,EAAO5I,MAAM,IAE5CkG,QAASA,IAAMsD,GAAQrE,CAAG,CATrBA,EAAAA,CAUN,EACF,EAEDW,EAAA,MAAA,CACEkE,IAAI,iFACJhL,UAAU,mCACV,cAAA,EAAA,CACD,EAGGiL,GAAwBf,EAAAA,GAAAA,YAAAA,EAAgBhK,aAAhBgK,MAAAA,EAA4BlJ,OACxDkJ,EAAehK,WAAW8H,IAAI,CAAC0C,EAAOvE,IACpCW,OAAAA,OAAAA,EAAC6D,EAAU,CAETC,KAAMF,EACNG,SAASX,GAAAA,YAAAA,EAAgBgB,wBAAyB,OAClDJ,MACE7B,EAAAA,GAAAA,YAAAA,EAAOjK,QAAPiK,YAAAA,EAAchJ,YACdqK,GAAAA,YAAAA,EAAaxL,QAAQ,YAAamK,EAAMjK,MAAMiB,SAAS8K,SAAU,GAC9DjM,QAAQ,QAAS6J,OAAOxC,EAAM,CAAC,GAC/BrH,QAAQ,UAAW6J,OAAOiB,EAAO5I,MAAM,GAPvCmF,EAAAA,CAQN,EACF,EAEDW,EAAA,MAAA,CACEkE,IAAI,iFACJhL,UAAU,mCACV,cAAA,EAAA,CACD,EAGH,OACE4H,EAAA,MAAA,CAAA,GAAS5I,EAAOgB,UAAWgH,EAAQ,CAAC,cAAehH,CAAS,CAAC,EAAEC,SAC5DiJ,CAAAA,GACCpC,EAAC6D,EAAU,CAACC,KAAM1B,EAAalJ,UAAU,0BAAA,CAA4B,EAEvE4H,EAAA,MAAA,CAAK5H,UAAU,4DAA2DC,UACxE6G,EAAA,MAAA,CAAK9G,UAAU,2BAA0BC,SAErCiK,GAAAA,MAAAA,EAAgB1K,SACdsH,EAAC3H,GAAQ,CACPa,UAAU,iCACVT,QAAQqK,GAAAA,YAAAA,EAAQ5I,QAAS,EACzBxB,UAAUoK,GAAAA,YAAAA,EAAQ5I,QAAS,EAAIkJ,EAAe1K,SAAW,OACzDC,kBAAmByK,GAAAA,YAAAA,EAAgBzK,kBACnCC,MAAMwK,GAAAA,YAAAA,EAAgBiB,YAAYvB,GAAAA,YAAAA,EAAQ5I,QAAS,EACnD1B,OAAM4K,GAAAA,GAAAA,YAAAA,EAAgBhK,aAAhBgK,YAAAA,GAA4BlJ,QAAS,KAAKkJ,EAAAA,GAAAA,YAAAA,EAAgB5K,OAAhB4K,YAAAA,EAAsBkB,UAAW,GACjFzL,KAAKuK,GAAAA,YAAAA,EAAgBvK,MAAO,KAC5BE,MAAM,OACNC,OAAO,OACPC,aAAcwK,GAAQ,EACtBrK,WAAY+K,EAAsBhL,SAEjCwK,CAAAA,CACO,EAEV3D,EAACuE,GAAW,CAACrL,UAAU,sBAAsBL,IAAI,QAAOM,SACrDwK,CAAAA,CACU,CAAA,CAEd,EACJtB,GACCrC,EAAC6D,EAAU,CACTC,KAAMzB,EACNnJ,UAAU,8BAAA,CACX,CACF,CAAA,CACE,EAEL4H,EAAA,MAAA,CAAK5H,UAAU,4DAA2DC,UACxE2H,EAAA,MAAA,CAAK5H,UAAU,2BAA0BC,UACvC2H,EAAA,MAAA,CAAK5H,UAAU,sBAAqBC,SACjCgJ,CAAAA,GACCnC,EAAC6D,EAAU,CACTC,KAAM3B,EACNjJ,UAAU,oBACX,CAAA,EAGF,CAACwJ,GAAWF,GACXxC,EAAC6D,EAAU,CAACC,KAAMtB,EAAKtJ,UAAU,kBAAA,CAAoB,CACtD,CAAA,CACE,EAEL4H,EAAA,MAAA,CAAK5H,UAAU,sBAAqBC,SACjC8J,CAAAA,GACCjD,EAAC6D,EAAU,CACTC,KAAMb,EACN/J,UAAWgH,EAAQ,CAAC,6BAA8B,oBAAoB,CAAC,EACvE,aAAYoD,EACZvC,KAAK,MAAA,CACN,EAEFiC,GACChD,EAAC6D,EAAU,CACTC,KAAMd,EACN9J,UAAWgH,EAAQ,CAAC,6BAA8B,0BAA0B,CAAC,EAC7E,aAAYmD,EACZtC,KAAK,MAAA,CACN,CACF,CACE,CAAA,EAIHqC,GAAAA,MAAAA,EAAgBoB,OACdxE,EAAC3H,GAAQ,CACPa,UAAU,8FACVH,MAAM,OACNC,OAAO,OACPP,QAAQqK,GAAAA,YAAAA,EAAQ5I,QAAS,EACzBxB,UAAUoK,GAAAA,YAAAA,EAAQ5I,QAAS,EAAI,gBAAkB,KACjDtB,MAAMwK,GAAAA,YAAAA,EAAgBiB,YAAYvB,GAAAA,YAAAA,EAAQ5I,QAAS,EACnD1B,OAAM4K,GAAAA,GAAAA,YAAAA,EAAgBhK,aAAhBgK,YAAAA,GAA4BlJ,QAAS,KAAKkJ,EAAAA,GAAAA,YAAAA,EAAgB5K,OAAhB4K,YAAAA,EAAsBoB,SAAU,GAChF3L,KAAKuK,GAAAA,YAAAA,EAAgBvK,MAAO,KAC5BO,WAAY+K,EAAsBhL,SAEjCwK,CAAAA,CACO,EAEV3D,EAAC3H,GAAQ,CACPa,UAAU,oDACVV,OAAM4K,GAAAA,GAAAA,YAAAA,EAAgB5K,OAAhB4K,YAAAA,GAAsBoB,UAAU1B,GAAAA,YAAAA,EAAQ5I,QAAS,EACvDrB,KAAKuK,GAAAA,YAAAA,EAAgBvK,MAAO,KAC5BE,MAAM,OACNC,OAAO,OACPP,QAAQqK,GAAAA,YAAAA,EAAQ5I,QAAS,EACzBxB,UAAUoK,GAAAA,YAAAA,EAAQ5I,QAAS,EAAI,OAAS,KACxCtB,MAAMwK,GAAAA,YAAAA,EAAgBiB,YAAYvB,GAAAA,YAAAA,EAAQ5I,QAAS,EAAEf,SAEpDwK,CAAAA,CACO,EAGd7C,EAAA,MAAA,CACE5H,UAAWgH,EAAQ,CACjB,uBACA,CAAE,qCAAqCuC,CAAU,CAAC,CACnD,EAAEtJ,SAAA,CAEFsJ,GACCzC,EAAA,MAAA,CAAK9G,UAAU,kCAAiCC,SAC7CoK,CAAAA,CACE,EAGNR,GACC/C,EAAC6D,EAAU,CACTC,KAAMf,EACN7J,UAAWgH,EAAQ,CAAC,sBAAsB,CAAC,CAAA,CAC5C,EAGFgD,GACClD,EAAA,MAAA,CAAK9G,UAAU,wBAAuBC,SACpC6G,EAAC6D,EAAU,CAACC,KAAMZ,CAAAA,CAAW,CAAA,CAC1B,EAGNC,GACCnD,EAAC6D,EAAU,CACTC,KAAMX,EACNjK,UAAWgH,EAAQ,CAAC,sBAAsB,CAAC,CAAA,CAC5C,CACF,CAAA,CACE,EAEJyC,GACC3C,EAAC6D,EAAU,CACTC,KAAMnB,EACNzJ,UAAWgH,EAAQ,CAAC,gCAAgC,CAAC,CAAA,CACtD,EAGF0C,IACC5C,EAAC6D,EAAU,CACTC,KAAMlB,GACN1J,UAAWgH,EAAQ,CAAC,0BAA0B,CAAC,CAAA,CAChD,EAGF2C,EACC7C,EAAA,MAAA,CAAK9G,UAAU,0BAAyBC,SAAE0J,CAAgB,CAAA,EACxD,IAAI,CAAA,CACL,EACJP,GACCtC,EAAC6D,EAAU,CACTC,KAAMxB,EACNpJ,UAAU,2BAAA,CAA6B,CAC1C,CAAA,CACE,EAEJqJ,GACCvC,EAAC6D,EAAU,CACTC,KAAMvB,EACNrJ,UAAU,sBACX,CAAA,EAIFuK,IAAS,KAAO,KACfzD,EAACyE,GAAO,CACNvL,UAAU,uBACVwL,QAASA,IAAMhB,GAAQ,IAAI,EAC3BiB,SAAQ,GAAAxL,SAER6G,EAAC3H,GAAQ,CACPa,UAAU,iCACVT,QAAQqK,GAAAA,YAAAA,EAAQ5I,QAAS,EACzBnB,MAAM,OACNC,OAAO,OACPC,aAAcwK,GAAQ,EACtB7K,MAAMkK,GAAAA,YAAAA,EAAQ5I,QAAS,EACvBxB,UAAUoK,GAAAA,YAAAA,EAAQ5I,QAAS,EAAI,OAAS,KACxCb,SAAQ,GAAAF,SAEPwK,CAAAA,CACO,CAAA,CACH,CACV,CAAA,CACE,CAET,ECnSaY,GAAmDA,CAAC,CAC/DpL,SAAAA,EACAN,IAAAA,EAAM,KACNK,UAAAA,EACA0E,MAAAA,EACA,GAAG1F,CACL,IAAM,CACE0M,MAAAA,EAAQvK,GAASuK,MAAMzL,CAAQ,EAErC,OACE6G,EAAA,MAAA,CAAA,GACM9H,EACJgB,UAAWgH,EAAQ,CAAC,mBAAoBhH,CAAS,CAAC,EAClD0E,MAAO,CACL,QAAS/E,EAAO,iBAAgBA,CAAI,IAAK,MACzC,GAAG+E,CACL,EAAEzE,SAEDkB,GAAS6G,IACR/H,EACA,CAAC4C,EAA2CsD,IAC1CW,EAAA,MAAA,CAAuB9G,UAAU,yBAAwBC,SACvD6G,EAAC6D,EAAU,CAETC,KAAM/H,EACNgI,QAAS1E,IAAQ,EAAI,QAAU,MAAA,EAF1BtD,EAAM7D,MAAMgM,GAGlB,CAAA,EALOU,EAAQvF,CAMb,CAET,CAAA,CACG,CAET,ECVawF,GAAmDA,CAAC,CAC/DC,OAAAA,EACAC,SAAAA,EACAhN,OAAAA,EACAoI,QAAAA,EACA6E,KAAAA,EACAC,cAAAA,EACAC,cAAAA,EACAhM,UAAAA,EACA,GAAGhB,CACL,IAEI8H,EAAAsB,GAAA,CAAAnI,SACG2L,GAAUG,IAAkBC,EAC3BlF,EAAA,MAAA,CAAK9G,UAAW,kBAAkB,GAAKhB,EAAKiB,SAC1C6G,EAACmF,GAAK,CACJL,OAAQA,GAAkBG,EAC1BF,SAAAA,EACAhN,OAAAA,EACAoI,QAAAA,EACA6E,KAAAA,EACA9L,UAAAA,CAAAA,CACD,CAAA,CACE,EAEL4H,EAAA,MAAA,CAAK5H,UAAW,kBAAkB,GAAKhB,EAAKiB,SAAA,CAC1C6G,EAACmF,GAAK,CACJL,OAAQG,EACRF,SAAAA,EACAhN,OAAAA,EACAmB,UAAAA,CAAAA,CACD,EACD8G,EAAA,OAAA,CAAM9G,UAAU,yBAAwBC,SAAE,GAAA,CAAU,EACpD6G,EAACmF,GAAK,CACJL,OAAQI,EACRH,SAAAA,EACAhN,OAAAA,EACAmB,UAAAA,CAAAA,CACD,CAAC,CAAA,CACC,CAAA,CAEP,EC5DOuL,GAA2CA,CAAC,CACvDE,SAAAA,EACAD,QAAAA,EACAxL,UAAAA,EACAC,SAAAA,EACA,GAAGjB,CACL,IAAM,CAEEkN,MAAAA,EAAa7L,EAAQ,yBAAyB,EAAEC,MAEhD6L,EAAgBhI,EAAY,IAAM,CAC5BqH,GAAA,MAAAA,GAAA,EACT,CAACA,CAAO,CAAC,EAGZpI,OAAAA,GAAU,IAAM,CACR6C,MAAAA,EAAiBC,GAAyB,CAC1CA,EAAMC,MAAQ,UACFgG,GAChB,EAGO9F,gBAAAA,iBAAiB,UAAWJ,CAAa,EAE3C,IAAM,CACFK,SAAAA,oBAAoB,UAAWL,CAAa,CAAA,CACvD,EACC,CAACkG,CAAa,CAAC,EAGlB/I,GAAU,IAAM,CACd,MAAMgJ,EAAmB9I,SAAS8I,iBAE5BC,EAAuBD,EAAiB1H,MAAM4H,SAEpDF,OAAAA,EAAiB1H,MAAM4H,SAAW,SAE3B,IAAM,CACXF,EAAiB1H,MAAM4H,SAAWD,CAAAA,CAEtC,EAAG,CAAE,CAAA,EAGHzE,EAAA,MAAA,CAAA,GACM5I,EACJgB,UAAWgH,EAAQ,CACjB,cACA,CAAC,wBAAyByE,CAAQ,EAClCzL,CAAS,CACV,EAAEC,UAEH6G,EAAA,MAAA,CAAK9G,UAAU,uBAAsBC,SAAAA,CAAAA,CAAgB,EAErD6G,EAACC,GAAM,CACL,aAAYmF,EACZjF,QAAQ,WACRjH,UAAU,4BACVkH,QAASiF,EACTI,KAAMzF,EAAC0F,GAAU,EAAA,CAAA,CAClB,CAAC,CAAA,CACC,CAET,ECpEMC,GAAiB,CAAC,OAAQ,QAAS,QAAS,UAAU,EAEtDC,GAAsBC,GACjBA,EAAM3E,IAAK4E,IAAuB,CAAE,GAAGA,EAAMC,KAAMD,EAAKtM,MAAO6G,SAAU,CAACyF,EAAKE,OAAW,EAAA,EAuCxFC,GAA6CA,CAAC,CACzDlD,QAAAA,EACAmD,kBAAAA,EACAC,SAAAA,EACAC,SAAAA,EACAC,eAAAA,EACAC,mBAAAA,EACApN,UAAAA,EACAC,SAAAA,EACA,GAAGjB,CACL,IAAM,CAEEqO,MAAAA,GAAgBhN,EAAQ,6BAA6B,EAAEC,MAEvD,CAACgN,EAAYC,CAAa,EAAIzM,EAAoB,IACtC+I,GAAAA,YAAAA,EAASlH,OAAO,CAAC6K,EAAOC,IAAW,CAC3C,KAAA,CAAEd,MAAAA,CAAUc,EAAAA,EACZC,EAAmBf,GAAAA,YAAAA,EAAOgB,KAAMf,GAASO,GAAAA,YAAAA,EAAgBS,SAAShB,EAAKiB,KACvEC,EAAWnB,GAAAA,YAAAA,EAAOgB,KAAMf,GAASA,EAAKkB,UAC5C,OAAIJ,EACS,CACH,GAAGF,EACH,CAACC,EAAOI,EAAE,EAAG,CAAEvN,MAAOoN,EAAiBpN,MAAOyN,MAAOL,EAAiBG,EAAG,CAAA,EAEtEC,EACA,CACH,GAAGN,EACH,CAACC,EAAOI,EAAE,EAAG,CAAEvN,MAAOwN,EAASxN,MAAOyN,MAAOD,EAASD,EAAG,CAAA,EAG5DL,CACT,EAAG,CAAgB,EAGpB,EAIDpK,GAAU,IAAM,CACdgK,GAAAA,MAAAA,EAAoBY,QAA+BC,GAAA,CACjDV,EAAwBW,GAAA,OACtB,MAAMC,GAAeF,EAAAA,GAAAA,YAAAA,EACjBtB,QADiBsB,YAAAA,EACVN,KAAMf,GAASA,EAAKkB,UAC/B,OAAKK,EAEQ,CACX,GAAGD,EACH,CAACD,EAAkBJ,EAAE,EAAG,CACtBvN,MAAO6N,GAAAA,YAAAA,EAAc7N,MACrByN,MAAOI,GAAAA,YAAAA,EAAcN,EACvB,CAAA,EAPwBK,CASnBE,CACR,CAAA,EACF,EACA,CAAChB,EAAoBG,CAAa,CAAC,EAGtC/K,GAAQ,IAAM,CACZ,MAAM6L,EAASxE,GAAAA,YAAAA,EAASlH,OAAO,CAAC6K,EAAOC,IAAW,OACxCd,OAAAA,EAAAA,GAAAA,YAAAA,EAAAA,QAAAA,MAAAA,EAAOqB,QAAkBpB,GAAA,OAC/B,MAAMkB,IAAWR,EAAAA,EAAWG,EAAOI,EAAE,IAApBP,YAAAA,EAAuBS,SAAUnB,EAAKiB,GAGnDJ,EAAOa,UAAY,CAACR,IAChBL,EAAAA,EAAOI,EAAE,EAAIR,GACrB,GAGKG,CACT,EAAG,CAA+B,GAGlCN,OAAAA,GAAAA,MAAAA,EAAWmB,GAEJA,CAAAA,EAEN,CAACf,CAAU,CAAC,EAEf,MAAMiB,EAAoBpK,EACxB,CAAC0J,EAAYvN,EAAekO,IAAqB,CAC/CjB,EAAwBW,GAAA,CACtB,MAAME,EAAO,CACX,GAAGF,EACH,CAACL,CAAE,EAAG,CAAEvN,MAAAA,EAAOyN,MAAOS,CAAS,CAAA,EAIjCvB,OAAAA,GAAAA,MAAAA,EAAWmB,EAAMI,GAGVJ,CAAAA,CACR,CAAA,EAEH,CAACnB,CAAQ,CACX,EAGMwB,EAAqBA,CAACD,EAAkBE,IAAoB,OAChE,MAAMpO,IAAQoO,EAAAA,EAAUC,gBAAgB,CAAC,IAA3BD,YAAAA,EAA8BpO,QAAU,GACpCkO,EAAAA,EAAUlO,EAAOoO,EAAUX,KAAK,CAAA,EAG9ChB,EAAW5I,EACf,CAAC,CAAEwI,MAAAA,EAAOkB,GAAAA,EAAIS,SAAAA,EAAU7F,KAAAA,EAAMqF,SAAAA,EAAUxN,MAAAA,CAAAA,IAEpCwG,EAAA,MAAA,CAAK9G,UAAWgH,EAAQ,CAAC,uBAAuB,CAAC,EAAE/G,UAEjDwI,GAAAA,YAAAA,EAAMmG,iBAAkB,WACxB9H,EAAC+H,GAAM,CAAC,aAAYvO,EAAOwO,aAAe5I,GAAUuI,EAAmBZ,EAAI3H,EAAM6I,MAAM,EAAGlF,QAAS6C,GAAmBC,CAAK,EAAGoB,MAAOD,CAAW,CAAA,EAEhJnB,GAAAA,YAAAA,EAAO3E,IAAKyF,GAAgB,CAC1B,MAAMuB,EAAS,CACb7I,IAAKsH,EAAOI,GACZA,GAAIJ,EAAOI,GACXnF,KAAMmF,EACNE,MAAON,EAAOM,MACdzN,MAAOmN,EAAOnN,MACd2O,eAAgB3O,EAChBwN,SAAUA,IAAaL,EAAOI,GAC9BtE,WAAY,CAACkE,EAAOX,QAGpBwB,SAAUA,IAAa,KAAO,GAAOA,EACrCY,QAASA,IAAM,CACbX,EAAkBV,EAAIJ,EAAOnN,MAAOmN,EAAOI,EAAE,CAC/C,CAAA,EAGF,OAAQpF,EAAI,CACV,IAAK,OACH,OAAO3B,EAACqI,GAAU,CAAA,GAAKH,EAAQ1O,MAAOmN,EAAOnN,KAAAA,CAAQ,EAEvD,IAAK,QACH,OACEwG,EAACsI,GAAW,CAAA,GACNJ,EACJhE,IAAKyC,EAAOM,MACZjD,IAAK2C,EAAOnN,KAAAA,CACb,EAGL,IAAK,QACH,OACEwG,EAACuI,GAAW,CAAA,GAAKL,EAAQ3H,KAAK,QAAQiI,MAAO7B,EAAOM,KAAAA,CAAQ,EAGhE,QACUwB,eAAAA,KAAM,uBAAsB9G,CAAK,EAAC,EACnC,IACX,CAAA,EACD,CACE,EAGT,CAAC8F,CAAiB,CACpB,EAEA,OACEzH,EAAA,MAAA,CAAA,GAAS9H,EAAOgB,UAAWgH,EAAQ,CAAC,eAAgBhH,CAAS,CAAC,EAAEC,SAC7D4J,GAAAA,YAAAA,EAAS7B,IAAI,CAAC,CAAES,KAAAA,EAAMnI,MAAAA,EAAOuN,GAAAA,EAAI2B,SAAAA,EAAUlB,SAAAA,EAAU3B,MAAAA,CAAAA,IAAY,OAChE,GAAI,CAAClE,EAAM,CACTgH,QAAQF,KAAM,qCAAoC,EAClD,MACF,CAGA,OAAK9C,GAAemB,SAASnF,CAAI,GACvB8G,QAAAA,KAAM,uBAAsB9G,CAAK,EAAC,EAGxC+G,GACFC,QAAQF,KACN,0DACF,EAIA3H,EAAA,MAAA,CAEEiG,GAAK,eAAcA,CAAG,GACtB,gBAAgB,mBAAkBA,CAAG,GACrC7N,UAAU,sBAAqBC,UAE/B6G,EAAA,MAAA,CAAK9G,UAAU,6BAA4BC,SACxCqN,EAAWO,CAAE,EAAKb,EAAqB,GAAE1M,CAAM,GAAK,GAAEA,CAAM,KAAIgN,EAAWO,CAAE,EAAEvN,KAAM,GAAKA,CAAAA,CACxF,EAELwG,EAACiG,EAAQ,CACPc,GAAAA,EACApF,KAAAA,EACA6F,SAAAA,EACA3B,MAAAA,EACArM,MAAAA,EACAwN,UAAUR,EAAAA,EAAWO,CAAE,IAAbP,YAAAA,EAAgBS,KAAAA,CAC3B,CAAC,CAAA,EAhBI,eAAcF,CAAG,EAiBpB,CAAA,EAER,CACE,CAET,ECzPgB6B,SAAAA,GAAa3B,EAAelP,EAAS,QAAS,CACxD,GAAA,CAAC8Q,GAAY5B,CAAK,EAAG,MAAM6B,MAAM,qBAAqB,EAI1D,OADa7B,EAAM8B,MAAM,GAAG,EAAE,CAAC,IACpB9B,EAAS,GAAEA,CAAM,aAErB,IAAI+B,KAAK/B,CAAK,EAAEgC,mBAAmBnR,GAAcC,CAAM,CAAC,EAAEkM,UACnE,CAEO,SAAS4E,GAAYK,EAAoB,CAU9C,GAAI,CAToB,CACtB,sBACA,4BACA,wBACA,wBACA,4BACA,uCAAA,EAGmBC,QAAiBC,EAAOC,KAAKH,CAAU,CAAC,EAAU,MAAA,GAEjEI,MAAAA,EAAO,IAAIN,KAAKE,CAAU,EAChC,MAAO,CAACtK,MAAM0K,EAAKC,QAAS,CAAA,CAC9B,CC1BO,SAASC,GACdC,EACM,CACN,MAAMC,EAAkB,IAAIC,gBAAgB9M,OAAO+M,SAASC,MAAM,EAE3DC,OAAAA,QAAQL,CAAM,EAAEvC,QAAQ,CAAC,CAAC7H,EAAK4H,CAAK,IAAM,CAC3CA,IAAU,KACZyC,EAAgBK,OAAO1K,CAAG,EAE1BqK,EAAgBM,IAAI3K,EAAKwC,OAAOoF,CAAK,CAAC,CACxC,CACD,EAEGgD,IAAAA,EAAMpN,OAAO+M,SAASM,SAClBD,GAAA,IAAGP,EAAgBzF,SAAAA,CAAW,GACtCgG,GAAOpN,OAAO+M,SAASO,KAEvBtN,OAAOuN,QAAQC,aAAa,CAAC,EAAG,GAAIJ,CAAG,CACzC,CAEO,SAASK,IAAuC,CACrD,MAAMZ,EAAkB,IAAIC,gBAAgB9M,OAAO+M,SAASC,MAAM,EAC5DJ,EAAiC,CAAA,EAEvBvC,OAAAA,EAAAA,QAAQ,CAACD,EAAO5H,IAAQ,CACtCoK,EAAOpK,CAAG,EAAI4H,CAAAA,CACf,EAEMwC,CACT,CCgGO,MAAMc,GAGTA,CAAC,CACH/H,IAAAA,EACAE,QAAAA,EACA8H,aAAAA,EACAC,qBAAAA,EACAC,gBAAAA,EACAC,eAAAA,EACAC,cAAAA,EACAC,wBAAAA,EACAC,MAAAA,EACA3R,SAAAA,GACA4R,YAAAA,EACAC,SAAAA,EACAC,cAAAA,EACAC,YAAAA,EACA,GAAGhT,CACL,IAAM,eAEEiT,MAAAA,EAAiB5R,EAAQ,6BAA6B,EAAEC,MACxD4R,EAAmB7R,EAAQ,+BAA+B,EAAEC,MAC5D6R,EAAe9R,EAAQ,2BAA2B,EAAEC,MAGpD,CAACzB,EAAQuT,CAAS,EAAItR,EAAeuR,GAAOC,UAAYC,EAAAA,eAAyB,OAAO,EAExF,CAACnF,EAAoBoF,CAAqB,EAAI1R,EAAmB,EAEjE,CAAC2R,EAAO,KAAMC,CAAO,EAAI5R,EAAS+Q,CAAW,EAE7C,CAACc,EAAQC,CAAS,EAAI9R,EAAiB,IAAM,CACjD,MAAM+R,EAAwB,CAAEvJ,IAAAA,EAAKU,SAAU,CAAA,EAE/C,OAAIyI,GAAAA,MAAAA,EAAMK,aACRD,EAAcE,YAAcN,EAAKK,YAE5BD,CAAAA,CACR,EAGK,CAACG,GAAOC,CAAQ,EAAInS,EAAS,IAAM,SAChC,MAAA,EACL2R,GAAAA,MAAAA,EAAM5I,WACN4I,EAAAA,GAAAA,YAAAA,EAAM5I,UAAN4I,YAAAA,EAAezR,QAAS,KACxByR,EAAAA,GAAAA,YAAAA,EAAMK,aAANL,YAAAA,EAAkBzR,WAAWyR,GAAAA,YAAAA,EAAM5I,QAAQ7I,QAAAA,CAE9C,EAEKkS,EAAyC,CAAET,KAAAA,EAAME,OAAAA,EAAQK,MAAAA,EAAAA,EAG/D5P,GAAU,IAAM,CACd,MAAM+P,EAAcC,GAAOC,GAAG,SAAWC,GAAoB,CACvDA,IAAYzU,IAEhBuT,EAAUkB,CAAgB,EAEXhK,GAAAA,CAAG,EAAEiK,KAAKb,CAAO,EAAA,CAQjC,EACD,MAAO,IAAM,CACXS,GAAAA,MAAAA,EAAaK,KAAI,CACnB,EACC,CAAC3U,EAAQyK,CAAG,CAAC,EAGVmK,MAAAA,EAAiBtP,EACpBuP,GAAkD,CACjDd,EAAqB1E,IAAA,CAAE,GAAGA,EAAM,GAAGwF,CAAY,EAAA,CACjD,EACA,CACF,CAAA,EAEMC,GAAuBxP,EAC1BmJ,GAAmE,OAElE,IAAIyF,EAAca,OAAOC,KAAKvG,CAAU,EACrCtF,IAAK6F,GAAOP,EAAWO,CAAE,EAAEE,KAAK,EAChC1I,OAAQC,GAAYA,IAAYwO,MAAS,EAIvCpC,GACUpB,GAAA,CAAEyC,YAAaA,EAAYgB,KAAK,GAAG,CAAA,CAAG,EAIrDnB,EAAqB1E,IAAA,CAAE,GAAGA,EAAM6E,YAAAA,CAAc,EAAA,EAC9CE,GAASF,GAAAA,YAAAA,EAAa/R,YAAWyR,EAAAA,GAAAA,YAAAA,EAAM5I,UAAN4I,YAAAA,EAAezR,OAAM,EAGtDgT,GAAkB1K,EAAKyJ,EAAahB,GAAAA,YAAAA,EAAekC,aAAa,EAAEV,KAAenF,GAAA,OAC/EsE,EAAQtE,CAAI,GAGR2D,EAAAA,GAAAA,YAAAA,EAAekC,gBAAflC,MAAAA,EAA8B/Q,QAChCkT,EAAe9F,EAAM2E,CAAW,CAClC,CACD,CAAA,EAEH,CAACzJ,CAAG,CACN,EAEM4K,EAAiB/P,EAAY,CAACiK,EAA2B+F,IAAkC,OACzFC,MAAAA,GAAqBhG,GAAAA,YAAAA,EAAM0E,aAAc,GACxBqB,EAAoBE,SAAcD,EAAmBxG,SAAShB,CAAI,CAAC,IAExF4F,EAAsBpE,GAAAA,YAAAA,EAAMvE,OAAO,EACnC+I,EAAqB1E,IAAA,CAAE,GAAGA,EAAM6E,YAAaqB,CAAqB,EAAA,EAClEnB,GAASmB,GAAAA,YAAAA,EAAoBpT,YAAWoN,EAAAA,GAAAA,YAAAA,EAAMvE,UAANuE,YAAAA,EAAepN,OAAM,EAC/D,EACC,CAACsI,CAAG,CAAC,EAEFgL,GAAiBnQ,EAAaoQ,GAAsC,CACpEX,OAAOC,KAAKU,CAAO,EAAEvT,SAAW,GAAGiS,EAAS,EAAK,CACvD,EAAG,CAAE,CAAA,EAGCtJ,EAAanH,GAAQ,IAAM,OACxBiQ,OAAAA,EAAAA,GAAAA,YAAAA,EAAM9I,aAAN8I,YAAAA,EAAkBzK,IAAI,CAAC,CAAE1H,MAAAA,EAAOyN,MAAAA,GAAS5H,IAAgB,CACxDqO,MAAAA,EAAS7E,GAAY5B,CAAK,EAC5B2B,GAAa3B,EAAOlP,CAAM,EAC1BkP,EAAMhD,WAEV,OACEnD,EAAA,KAAA,CAAA3H,SAEGK,CAAAA,EAAM,KAAEwG,EAAA,OAAA,CAAM2N,wBAAyB,CAAED,OAAAA,CAAO,CAAA,CAAI,CAAC,GAF/CrO,CAGL,CAAA,EAGP,EAAA,CAACsM,GAAAA,YAAAA,EAAM9I,WAAY9K,CAAM,CAAC,EAEvBmL,GACJ,CAACsH,IAAgBmB,GAAAA,MAAAA,EAAM3F,SACrBhG,EAAC4N,EAAI,CACHhM,KAAK,WACLiM,KAAM/C,GAAAA,YAAAA,EAAOgD,SACbC,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAEnC6G,EAACgO,GAAW,CAEVpM,KAAK,WACLqM,aAAcpC,EAAO3I,SAASe,SAAS,EACvCiK,IAAK,EACL,aAAY9C,EACZlS,UAAU,wBACVkP,QAAUlF,GAAa,CACNyJ,EAAA,CAAEzJ,SAAUxE,OAAOwE,CAAQ,CAAA,CAAG,CAC/C,GARI,UASL,CAAA,CACG,EACJ8J,OAEAmB,EAAgBA,IAAM,CAC1B,GAAIxC,GAAAA,MAAAA,EAAM5I,QACR,OACE/C,EAAC4N,EAAI,CAAChM,KAAK,UAAUiM,KAAM/C,GAAAA,YAAAA,EAAOsD,QAASL,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAC5E6G,EAACiG,GAAQ,CACPlD,QAAS4I,EAAK5I,QACdsD,eAAgBwF,EAAOI,YACvB3F,mBAAAA,EACAJ,kBAAmB2E,EACnB1E,SAAU0G,GACVzG,SAAUoH,EAAAA,CACX,CAAA,CACG,CAEV,EAGF,OACExN,EAAA,MAAA,CAAA,GAAS9H,EAAKiB,SACZ6G,EAACkC,GAAO,CACNC,MACEnC,EAAC4N,EAAI,CACHhM,KAAK,QACLiM,KAAM/C,GAAAA,YAAAA,EAAOuD,MACbN,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAElCwS,GAAAA,YAAAA,EAAM/J,IAAAA,CACH,EAERY,IACEE,EAAUsK,OACRhN,EAAC4N,EAAI,CACHhM,KAAK,MACLiM,KAAM/C,GAAAA,YAAAA,EAAOwD,IACbP,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAElCwS,GAAAA,YAAAA,EAAMnJ,GAAAA,CACH,EAGVO,QAASoL,EAAc,EACvB/L,aACE0I,GAAAA,YAAAA,EAAOyD,cACLvO,EAAC4N,EAAI,CACHhM,KAAK,cACLiM,KAAM/C,GAAAA,YAAAA,EAAOyD,YACbR,QAAS,CACP,GAAG3B,EAEHoC,aAAazO,EAAU,CAChB0O,KAAAA,gBAAgB,IAAIC,IAAU,CAC3BC,MAAAA,EAAgB5O,EAAS,GAAG2O,CAAK,EAEjCE,EAAYD,GAAiB3O,EAACM,GAAI,CAACE,OAAQmO,CAAAA,CAAgB,EAE5DE,KAAAA,UAAWzH,IACP,CAAE,GAAGA,EAAMwH,UAAAA,CAAAA,EACnB,CAAA,CACF,CACH,EAEAE,WAAW/O,EAAU,CACd0O,KAAAA,gBAAgB,IAAIC,IAAU,CAC3B,KAAA,CAAE3I,KAAAA,EAAM,GAAGgJ,CAAAA,EAAMhP,EAAS,GAAG2O,CAAK,EAElCM,EAAOhP,EAAA,IAAA,CAAA,GAAO+O,EAAC5V,SAAG4M,CAAAA,CAAQ,EAE3B8I,KAAAA,UAAWzH,IACP,CACL,GAAGA,EACH6H,WAAY,CAAC,GAAI7H,EAAK6H,YAAc,CAAA,EAAKD,CAAI,CAAA,EAEhD,CAAA,CACF,CACH,EAEAE,kBAAkBnP,EAAU,CACrB0O,KAAAA,gBAAgB,IAAIC,IAAU,CAC3BS,MAAAA,EAAapP,EAAS,GAAG2O,CAAK,EAE9BU,EAAQ,KAAKC,oBAAoBF,CAAU,EAE5CN,KAAAA,UAAWzH,IACP,CACL,GAAGA,EACH6H,WAAY,CAAC,GAAI7H,EAAK6H,YAAc,CAAA,EAAKG,CAAK,CAAA,EAEjD,CAAA,CACF,CACH,CACF,EACAE,OAAQA,CAAC,CAAEV,UAAAA,EAAWK,WAAAA,CAAAA,IAElBjP,EAACuO,GAAW,CAACK,UAAAA,EAAsBK,WAAAA,CAAAA,CAAyB,CAEhE,CACD,EAGL/L,SAAAA,GACAC,QACEnD,EAAC4N,EAAI,CACHhM,KAAK,UACLiM,KAAM/C,GAAAA,YAAAA,EAAOyE,QACbxB,QAAS,CACP,GAAG3B,EAEHoD,aAAazP,EAAU,CAChB0O,KAAAA,gBAAgB,IAAIC,IAAU,CAC3Be,MAAAA,EAAU1P,EAAS,GAAG2O,CAAK,EAEjC,GAAI,CAACe,EAAS,OAER,KAAA,CAAE1J,KAAAA,EAAMN,KAAAA,EAAM,GAAGiK,CAAgBD,EAAAA,EAEjCE,EACJ3P,EAACC,GAAM,CACL0B,KAAK,SAAQ,GACT+N,EACJjK,KAAMA,GAAQzF,EAACM,GAAI,CAACE,OAAQiF,CAAAA,CAAO,EAAEtM,SAEpC4M,CAAAA,CACK,EAGL8I,KAAAA,UAAWzH,KAAe,CAC7BjO,SAAU,CAAC,GAAIiO,GAAKjO,UAAY,CAAA,EAAKwW,CAAM,CAC3C,EAAA,CAAA,CACH,CACH,CACF,EAAExW,SAIA,EAAC2R,GAAAA,MAAAA,EAAOyE,UACNvP,EAACC,GAAM,CACLM,KAAK,SACLoB,KAAK,SACL8D,KAAMzF,EAACM,GAAI,CAACE,OAAO,MAAA,CAAQ,EAC3BH,SAAU,EAACsL,GAAAA,MAAAA,EAAM3F,UAAW,CAACkG,GAC7B,aAAYf,EACZ/K,QAASA,IACA8K,GAAAA,YAAAA,EAAcW,GACrB1S,SAEDgS,CAAAA,CACK,CAAA,CAGR,EAERxI,iBACG8H,EASGuC,OARFhN,EAAC4N,EAAI,CACHhM,KAAK,mBACLiM,KAAM/C,GAAAA,YAAAA,EAAO8E,iBACb7B,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAGnC6G,EAAA,MAAA,CAAK2N,wBAAyB,CAAED,QAAQ/B,GAAAA,YAAAA,EAAMhJ,mBAAoB,EAAG,CAAA,CAAI,CACrE,CAAA,EAGVC,YACG8H,EASGsC,OARFhN,EAAC4N,EAAI,CACHhM,KAAK,cACLiM,KAAM/C,GAAAA,YAAAA,EAAO+E,YACb9B,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAGnC6G,EAAA,MAAA,CAAK2N,wBAAyB,CAAED,QAAQ/B,GAAAA,YAAAA,EAAM/I,cAAe,EAAG,CAAA,CAAI,CAChE,CAAA,EAGVE,SACE6I,EAAAA,GAAAA,YAAAA,EAAM7I,SAAN6I,YAAAA,EAAczK,IAAI,CAAC,CAAE1H,MAAAA,EAAOyQ,IAAAA,CAAAA,IAC1BjK,SAAAA,OAAAA,EAAC8P,GAAK,CAEJ3N,MAAO3I,EACPwK,IAAKxK,EACL0K,IAAK+F,EAGLlR,QAAOiS,EAAAA,GAAAA,YAAAA,EAAU+E,cAAV/E,YAAAA,EAAuBjS,QAAS,IACvCC,SAAQgS,EAAAA,GAAAA,YAAAA,EAAU+E,cAAV/E,YAAAA,EAAuBhS,SAAU,KACzCyQ,QAAQuB,GAAAA,YAAAA,EAAU+E,cAAe,CAAEhX,MAAO,GAAI,CAAA,EARzCkR,CASN,MACG,CACP,EACDhH,cACE0I,EAAAA,GAAAA,YAAAA,EAAMqE,SAANrE,MAAAA,EAAcsE,QACZjQ,EAAC4N,EAAI,CACHhM,KAAK,eACLiM,KAAM/C,GAAAA,YAAAA,EAAOoF,aACbnC,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAEnC6G,EAAC6E,GAAU,CAAA,GAAK8G,EAAKqE,OAAOG,MAAOpY,OAAQD,GAAcC,CAAM,CAAA,CAAI,CAC/D,CAAA,EACJiV,OAENhK,OACE2I,GAAAA,GAAAA,YAAAA,EAAMqE,SAANrE,MAAAA,GAAcsE,SACdtE,EAAKqE,OAAOI,SACZzE,EAAKqE,OAAOG,MAAMrL,UAAW6G,GAAAA,YAAAA,EAAMqE,OAAOI,QAAQtL,QAChD9E,EAAC4N,EAAI,CACHhM,KAAK,eACLiM,KAAM/C,GAAAA,YAAAA,EAAOuF,aACbtC,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAEnC6G,EAAC6E,GAAU,CAAA,GACL8G,EAAKqE,OAAOI,QAChBrY,OAAQD,GAAcC,CAAM,CAAA,CAC7B,CACG,CAAA,EACJiV,OAEN5J,eAAgB,CACd,GAAG4H,EACH5R,WAAY4R,IACRW,GAAAA,GAAAA,YAAAA,EAAM7I,SAAN6I,YAAAA,GAAczK,IAAI,CAAC,CAAE1H,MAAAA,EAAOyQ,IAAAA,CAAAA,IAC1BjK,SAAAA,OAAAA,EAAC8P,GAAK,CAEJ3N,MAAO3I,EACPwK,IAAKxK,EACL0K,IAAK+F,EAGLlR,QAAOiS,EAAAA,GAAAA,YAAAA,EAAUsF,kBAAVtF,YAAAA,EAA2BjS,QAAS,IAC3CC,SAAQgS,EAAAA,GAAAA,YAAAA,EAAUsF,kBAAVtF,YAAAA,EAA2BhS,SAAU,IAC7CyQ,QAAQuB,GAAAA,YAAAA,EAAUsF,kBAAmB,CAAEvX,MAAO,GAAI,CAAA,EAR7CkR,CASN,MACG,CAAA,EACN,CAAA,CACN,EACAxH,WAAY,EAACkJ,GAAAA,MAAAA,EAAM3F,SACnBnD,WACG8H,EAaGqC,OAZFhN,EAAC4N,EAAI,CACHhM,KAAK,aACLiM,KAAM/C,GAAAA,YAAAA,EAAOyF,WACbxC,QAAS,CAAE,GAAG3B,CAAmB,EAAEjT,SAElC0J,GAAAA,MAAAA,EAAY3I,OACX4G,EAAAQ,GAAA,CAAAnI,SAAA,CACGkS,EACDrL,EAAA,KAAA,CAAA7G,SAAK0J,CAAAA,CAAe,CAAC,CACrB,CAAA,EACA,IACA,CAAA,EAGVR,gBACEyI,GAAAA,YAAAA,EAAO0F,iBACLxQ,EAAC4N,EAAI,CACHhM,KAAK,iBACLiM,KAAM/C,EAAM0F,eACZzC,QAAS,CAAE,GAAG3B,CAAmB,CAAA,CAClC,EAGL9J,aACEwI,GAAAA,YAAAA,EAAO2F,cACLzQ,EAAC4N,EAAI,CACHhM,KAAK,cACLiM,KAAM/C,EAAM2F,YACZ1C,QAAS,CAAE,GAAG3B,CAAmB,CAAA,CAClC,EAGL7J,gBACEuI,GAAAA,YAAAA,EAAO4F,UACL1Q,EAAC4N,EAAI,CACHhM,KAAK,UACLiM,KAAM/C,EAAM4F,QACZ3C,QAAS,CAAE,GAAG3B,CAAmB,CAAA,CAClC,CAAA,CAGN,CAAA,CACE,CAET,EAEA7B,GAAeoG,eAAiB,eAAgB,CAAEnO,IAAAA,EAAKyI,cAAAA,CAAc,EAAG,iBAEtE,MAAM2F,IAAoBtG,EAAAA,GAAAA,EAAe2B,cAAf3B,YAAAA,EAA4BvB,MAAM,SAAQwC,GAAAA,GAAAA,GAAAA,GAAAA,EAAAA,KAAAA,YAAAA,EAAQC,cAARD,YAAAA,EAAqBsF,SAArBtF,YAAAA,EAA6BhB,iBAA7BgB,YAAAA,EAA6CR,cAA7CQ,YAAAA,EAA0DU,aAG9H,OAAI2E,GAAAA,MAAAA,EAAmB1W,OACd,MAAMgT,GAAkB1K,EAAKoO,EAAmB3F,GAAAA,YAAAA,EAAekC,aAAa,EAI9E,MAAM2D,GAAetO,CAAG,CACjC"}