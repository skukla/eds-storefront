import{F as S,p as N,q as C,P as I,x as l,_ as m}from"../chunks/icons/Add.js";import"../chunks/image-params-keymap.js";import{jsx as _}from"../preact-jsx-runtime.js";import{IntlContext as R}from"../i18n.js";function b(o={},c,s){const d=S(null),u=S(!1),h=S([]),[a,g]=N({children:[s==null?void 0:s({})]}),[f,P]=N({}),w=C(()=>({get:t=>f[t],set:(t,e)=>{P({...w,[t]:e})}}),[f]),{intl:y}=I(R);o.dictionary=y.dictionary,o._setProps=g;const i=l(t=>{typeof t=="function"?h.current.push(t):console.warn("Skipped: Invalid _registerMethod",t)},[]);o._registerMethod=i;const p=l(t=>_("div",{"data-slot-html-element":t.tagName.toLowerCase(),ref:e=>{e==null||e.appendChild(t)}}),[]);return o._htmlElementToVNode=p,o.getSlotElement=l(t=>{const e=document.querySelector(`[data-slot-key="${t}"]`);if(e)return{appendChild:n=>{e.appendChild(n)},prependChild:n=>{e.insertBefore(n,e.firstChild)},appendSibling:n=>{const r=e.parentNode;r==null||r.insertBefore(n,e.nextSibling)},prependSibling:n=>{const r=e.parentNode;r==null||r.insertBefore(n,e)}}},[]),o.onChange=l(t=>{h.current.push(t)},[]),o.replaceWith=l(t=>{i(e=>{const n=p(t);e._setProps({children:[n]})})},[p,i]),o.appendChild=l(t=>{i(e=>{const n=p(t);e._setProps(r=>({...r,children:[...r.children,n]}))})},[p,i]),o.prependChild=l(t=>{i(e=>{const n=p(t);e._setProps(r=>({...r,children:[n,...r.children]}))})},[p,i]),o.appendSibling=l(t=>{i(()=>{var n,r;const e=(n=d.current)==null?void 0:n.parentNode;e==null||e.insertBefore(t,((r=d.current)==null?void 0:r.nextSibling)??null)})},[i]),o.prependSibling=l(t=>{i(()=>{var n;const e=(n=d.current)==null?void 0:n.parentNode;e==null||e.insertBefore(t,d.current)})},[i]),m(()=>{const t=d.current;if(!(!c||!t))try{c(o,t)}catch(e){console.error(`Error in "${c.name}" Slot callback`,e)}},[]),m(()=>{g({children:[s==null?void 0:s(a)]}),h.current.forEach(t=>{t(o,w)}),(s==null?void 0:s.name)==="render"&&u.current===!1&&(u.current=!0)},[JSON.stringify(o),JSON.stringify(f),u.current]),[d,a]}function v({name:o,slot:c,context:s,children:d,render:u,...h}){const[a,g]=b(s,c,u??(()=>d));return m(()=>{o||console.warn('Slot "name" is required')},[o]),_("div",{...h,ref:a,"data-slot":o,children:g.children})}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async o=>{window.sessionStorage.setItem("dropin-debugger--show-slots",o.toString()),document.body.classList.toggle("dropin-debugger--show-slots",o)};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");export{v as Slot,b as useSlot};
//# sourceMappingURL=slot.js.map
